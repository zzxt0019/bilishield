// ==UserScript==
// @name        bilibili屏蔽
// @version     1.0
// @author      zzxt0019
// @match       *://www.bilibili.com/*
// @match       *://search.bilibili.com/*
// @match       *://live.bilibili.com/*
// @match       *://space.bilibili.com/*
// @match       *://t.bilibili.com/*
// @match       *://h.bilibili.com/*
// @match       *://manga.bilibili.com/*
// @match       *://message.bilibili.com/*
// @noframes
// @description bilibili屏蔽
// @grant       GM_setValue
// @grant       GM_getValue
// @grant       GM_deleteValue
// @grant       GM_registerMenuCommand
// ==/UserScript==
(()=>{var L={640:()=>{var M=function(m,h,g){"use strict";if(!m.MutationObserver||typeof HTMLElement=="undefined")return;var E=0,o=function(){var a=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(u,e){return u instanceof HTMLElement&&a.call(u,e)},addMethod:function(u,e,i){var n=u[e];u[e]=function(){if(i.length==arguments.length)return i.apply(this,arguments);if(typeof n=="function")return n.apply(this,arguments)}},callCallbacks:function(u,e){e&&e.options.onceOnly&&e.firedElems.length==1&&(u=[u[0]]);for(var i=0,n;n=u[i];i++)n&&n.callback&&n.callback.call(n.elem,n.elem);e&&e.options.onceOnly&&e.firedElems.length==1&&e.me.unbindEventWithSelectorAndCallback.call(e.target,e.selector,e.callback)},checkChildNodesRecursively:function(u,e,i,n){for(var t=0,r;r=u[t];t++)i(r,e,n)&&n.push({callback:e.callback,elem:r}),r.childNodes.length>0&&o.checkChildNodesRecursively(r.childNodes,e,i,n)},mergeArrays:function(u,e){var i={},n;for(n in u)u.hasOwnProperty(n)&&(i[n]=u[n]);for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},toElementsArray:function(u){return typeof u!="undefined"&&(typeof u.length!="number"||u===m)&&(u=[u]),u}}}(),A=function(){var a=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return a.prototype.addEvent=function(u,e,i,n){var t={target:u,selector:e,options:i,callback:n,firedElems:[]};return this._beforeAdding&&this._beforeAdding(t),this._eventsBucket.push(t),t},a.prototype.removeEvent=function(u){for(var e=this._eventsBucket.length-1,i;i=this._eventsBucket[e];e--)if(u(i)){this._beforeRemoving&&this._beforeRemoving(i);var n=this._eventsBucket.splice(e,1);n&&n.length&&(n[0].callback=null)}},a.prototype.beforeAdding=function(u){this._beforeAdding=u},a.prototype.beforeRemoving=function(u){this._beforeRemoving=u},a}(),k=function(a,u){var e=new A,i=this,n={fireOnAttributesModification:!1};return e.beforeAdding(function(t){var r=t.target,l;(r===m.document||r===m)&&(r=document.getElementsByTagName("html")[0]),l=new MutationObserver(function(s){u.call(this,s,t)});var c=a(t.options);l.observe(r,c),t.observer=l,t.me=i}),e.beforeRemoving(function(t){t.observer.disconnect()}),this.bindEvent=function(t,r,l){r=o.mergeArrays(n,r);for(var c=o.toElementsArray(this),s=0;s<c.length;s++)e.addEvent(c[s],t,r,l)},this.unbindEvent=function(){var t=o.toElementsArray(this);e.removeEvent(function(r){for(var l=0;l<t.length;l++)if(this===g||r.target===t[l])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(t){var r=o.toElementsArray(this),l=t,c;typeof t=="function"?c=function(s){for(var f=0;f<r.length;f++)if((this===g||s.target===r[f])&&s.callback===l)return!0;return!1}:c=function(s){for(var f=0;f<r.length;f++)if((this===g||s.target===r[f])&&s.selector===t)return!0;return!1},e.removeEvent(c)},this.unbindEventWithSelectorAndCallback=function(t,r){var l=o.toElementsArray(this);e.removeEvent(function(c){for(var s=0;s<l.length;s++)if((this===g||c.target===l[s])&&c.selector===t&&c.callback===r)return!0;return!1})},this},b=function(){var a={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function u(t){var r={attributes:!1,childList:!0,subtree:!0};return t.fireOnAttributesModification&&(r.attributes=!0),r}function e(t,r){t.forEach(function(l){var c=l.addedNodes,s=l.target,f=[],C;c!==null&&c.length>0?o.checkChildNodesRecursively(c,r,i,f):l.type==="attributes"&&i(s,r,f)&&f.push({callback:r.callback,elem:s}),o.callCallbacks(f,r)})}function i(t,r,l){return o.matchesSelector(t,r.selector)&&(t._id===g&&(t._id=E++),r.firedElems.indexOf(t._id)==-1)?(r.firedElems.push(t._id),!0):!1}v=new k(u,e);var n=v.bindEvent;return v.bindEvent=function(t,r,l){typeof l=="undefined"?(l=r,r=a):r=o.mergeArrays(a,r);var c=o.toElementsArray(this);if(r.existing){for(var s=[],f=0;f<c.length;f++)for(var C=c[f].querySelectorAll(t),G=0;G<C.length;G++)s.push({callback:l,elem:C[G]});if(r.onceOnly&&s.length)return l.call(s[0].elem,s[0].elem);setTimeout(o.callCallbacks,1,s)}n.call(this,t,r,l)},v},V=function(){var a={};function u(){var t={childList:!0,subtree:!0};return t}function e(t,r){t.forEach(function(l){var c=l.removedNodes,s=[];c!==null&&c.length>0&&o.checkChildNodesRecursively(c,r,i,s),o.callCallbacks(s,r)})}function i(t,r){return o.matchesSelector(t,r.selector)}d=new k(u,e);var n=d.bindEvent;return d.bindEvent=function(t,r,l){typeof l=="undefined"?(l=r,r=a):r=o.mergeArrays(a,r),n.call(this,t,r,l)},d},v=new b,d=new V;function _(a,u,e){o.addMethod(u,e,a.unbindEvent),o.addMethod(u,e,a.unbindEventWithSelectorOrCallback),o.addMethod(u,e,a.unbindEventWithSelectorAndCallback)}function p(a){a.arrive=v.bindEvent,_(v,a,"unbindArrive"),a.leave=d.bindEvent,_(d,a,"unbindLeave")}h&&p(h.fn),p(HTMLElement.prototype),p(NodeList.prototype),p(HTMLCollection.prototype),p(HTMLDocument.prototype),p(Window.prototype);var y={};return _(v,y,"unbindAllArrive"),_(d,y,"unbindAllLeave"),y}(window,typeof jQuery=="undefined"?null:jQuery,void 0)}},S={};function w(M){var m=S[M];if(m!==void 0)return m.exports;var h=S[M]={exports:{}};return L[M](h,h.exports,w),h.exports}var R={};(()=>{"use strict";var M=w(640);let m=["\u4E43\u7433","\u5411\u665A","\u8D1D\u62C9","\u73C8\u4E50","\u5609\u7136"],h=[730732],g=null;function E(){GM_getValue("cards")||GM_setValue("cards",m),GM_registerMenuCommand("\u6DFB\u52A0\u5361\u7247",()=>{let i=prompt(`card:
            ${GM_getValue("cards",[]).join(",")}`);if(i){let n=GM_getValue("cards");n.push(...i.split(" ")),GM_setValue("cards",n)}}),GM_registerMenuCommand("\u5220\u9664\u5361\u7247",()=>{let i=prompt(`card:
            ${GM_getValue("cards",[]).join(",")}`);if(i){let n=new Set(i.split(" "));GM_setValue("cards",GM_getValue("cards").filter(t=>!n.has(t)))}}),GM_registerMenuCommand("\u5C55\u793A\u5361\u7247",()=>{alert(`card:
            ${GM_getValue("cards",[]).join(",")}`)})}function o(e){if(e){for(const i of GM_getValue("cards",[]))if(e.includes(i))return!0}return!1}function A(){GM_getValue("uids")||GM_setValue("uids",h),GM_registerMenuCommand("\u6DFB\u52A0up",()=>{let i=GM_getValue("uids",[]).map(t=>`${t}(${b(t)})`).join(","),n=prompt(`uid:
            ${i}`);if(n){let t=GM_getValue("uids");t.push(...n.split(" ").map(Number)),GM_setValue("uids",t)}}),GM_registerMenuCommand("\u5220\u9664up",()=>{let i=GM_getValue("uids",[]).map(t=>`${t}(${b(t)})`).join(","),n=prompt(`uid:
            ${i}`);if(n){let t=new Set(n.split(" ").map(Number));GM_setValue("uids",GM_getValue("uids").filter(r=>!t.has(r)))}}),GM_registerMenuCommand("\u5C55\u793Aup",()=>{let i=GM_getValue("uids",[]).map(n=>`${n}(${b(n)})`).join(",");alert(`uid:
            ${i}`)})}class k{constructor(i,n,t){this.uid=i,this.username=n,this.expiretime=t}}function b(e){let n=GM_getValue("uid_"+e);if(n&&new Date().getTime()<n.expiretime)return n.username;{let t=new XMLHttpRequest;t.open("GET","https://api.bilibili.com/x/space/acc/info?mid="+e,!1),t.send(null);let r=JSON.parse(t.responseText).data.name;return n={uid:e,username:r,expiretime:new Date().getTime()+Math.random()*24*60*60*1e3},GM_setValue("uid_"+e,n),n.username}}function V(e){return e?GM_getValue("uids",[]).includes(e):!1}function v(e){return e?GM_getValue("uids",[]).map(b).includes(e):!1}class d{bingo(i){return!1}ifRemove(i){if(this.innerSelector===void 0){if(this.bingo(i))return!0}else{let n=i.querySelectorAll(this.innerSelector);for(let t=0;t<n.length;t++){const r=n[t];if(this.bingo(r))return!0}}return!1}}class _ extends d{constructor(){super(...arguments),this.mainSelector=".rank-wrap",this.innerSelector=".info .name"}bingo(i){return v(i.innerHTML)}}class p extends d{constructor(){super(...arguments),this.mainSelector=".list-item",this.innerSelector=".sailing-img"}bingo(i){return o(i.getAttribute("alt"))}}class y extends d{constructor(){super(...arguments),this.mainSelector=".list-item",this.innerSelector="p.text img"}bingo(i){return o(i.getAttribute("alt"))}}class a extends d{constructor(){super(...arguments),this.mainSelector=".reply-item",this.innerSelector="img"}bingo(i){return o(i.getAttribute("alt"))}}u();function u(){E(),A();for(const e of[new _,new p,new y,new a])document.arrive(e.mainSelector,{fireOnAttributesModification:!0,onceOnly:!1,existing:!0},i=>{e.ifRemove(i)&&i.remove()})}})()})();
