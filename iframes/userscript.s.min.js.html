<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>bilishield</title>
    <link href="github.css"  type="text/css" rel="stylesheet">
</head>
<body>
<pre><code class="language-js"><span class="hljs-comment">// ==UserScript==</span>
<span class="hljs-comment">// @name            bilibili屏蔽</span>
<span class="hljs-comment">// @version         1.1.1675420140035</span>
<span class="hljs-comment">// @author          zzxt0019</span>
<span class="hljs-comment">// @namespace       zzxt0019/bilishield</span>
<span class="hljs-comment">// @icon64          https://zzxt0019.github.io/bilishield/img/Elysia.png</span>
<span class="hljs-comment">// @updateURL       https://zzxt0019.github.io/bilishield/userscript.s.min.js</span>
<span class="hljs-comment">// @downloadURL     https://zzxt0019.github.io/bilishield/userscript.s.min.js</span>
<span class="hljs-comment">// @supportURL      https://github.com/zzxt0019/bilishield</span>
<span class="hljs-comment">// @homepage        https://github.com/zzxt0019/bilishield</span>
<span class="hljs-comment">// @description     bilibili屏蔽 更新时间: 2023-02-03 18:29:00.035</span>
<span class="hljs-comment">// @require         https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js</span>
<span class="hljs-comment">// @require         https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js</span>
<span class="hljs-comment">// @require         https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.7/dayjs.min.js</span>
<span class="hljs-comment">// @require         https://cdnjs.cloudflare.com/ajax/libs/antd/5.1.7/antd.min.js</span>
<span class="hljs-comment">// @require         https://cdnjs.cloudflare.com/ajax/libs/arrive/2.4.1/arrive.min.js</span>
<span class="hljs-comment">// @require         https://cdnjs.cloudflare.com/ajax/libs/ant-design-icons/5.0.1/index.umd.min.js</span>

<span class="hljs-comment">// @match           *://*.bilibili.com/*</span>
<span class="hljs-comment">// @noframes</span>
<span class="hljs-comment">// @grant           GM_setValue</span>
<span class="hljs-comment">// @grant           GM_getValue</span>
<span class="hljs-comment">// @grant           GM_deleteValue</span>
<span class="hljs-comment">// @grant           GM_listValues</span>
<span class="hljs-comment">// @grant           GM_registerMenuCommand</span>
<span class="hljs-comment">// @grant           GM_xmlhttpRequest</span>
<span class="hljs-comment">// @grant           GM_info</span>
<span class="hljs-comment">// @connect         *</span>
<span class="hljs-comment">// ==/UserScript==</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">Ri</span>=<span class="hljs-title class_">Object</span>.<span class="hljs-property">defineProperty</span>;<span class="hljs-keyword">var</span> sn=<span class="hljs-title class_">Object</span>.<span class="hljs-property">getOwnPropertySymbols</span>;<span class="hljs-keyword">var</span> qi=<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>,<span class="hljs-title class_">Ki</span>=<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">propertyIsEnumerable</span>;<span class="hljs-keyword">var</span> <span class="hljs-title function_">Wt</span>=(<span class="hljs-params">H,R,T</span>)=&gt;R <span class="hljs-keyword">in</span> H?<span class="hljs-title class_">Ri</span>(H,R,{<span class="hljs-attr">enumerable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">configurable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">writable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">value</span>:T}):H[R]=T,ae=<span class="hljs-function">(<span class="hljs-params">H,R</span>)=&gt;</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> T <span class="hljs-keyword">in</span> R||(R={}))qi.<span class="hljs-title function_">call</span>(R,T)&amp;&amp;<span class="hljs-title class_">Wt</span>(H,T,R[T]);<span class="hljs-keyword">if</span>(sn)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> T <span class="hljs-keyword">of</span> <span class="hljs-title function_">sn</span>(R))<span class="hljs-title class_">Ki</span>.<span class="hljs-title function_">call</span>(R,T)&amp;&amp;<span class="hljs-title class_">Wt</span>(H,T,R[T]);<span class="hljs-keyword">return</span> H};<span class="hljs-keyword">var</span> <span class="hljs-title function_">N</span>=(<span class="hljs-params">H,R,T</span>)=&gt;(<span class="hljs-title class_">Wt</span>(H,<span class="hljs-keyword">typeof</span> R!=<span class="hljs-string">&quot;symbol&quot;</span>?R+<span class="hljs-string">&quot;&quot;</span>:R,T),T);<span class="hljs-keyword">var</span> <span class="hljs-title function_">q</span>=(<span class="hljs-params">H,R,T</span>)=&gt;<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">zt,I</span>)=&gt;</span>{<span class="hljs-keyword">var</span> <span class="hljs-title function_">M</span>=P=&gt;{<span class="hljs-keyword">try</span>{<span class="hljs-title function_">U</span>(T.<span class="hljs-title function_">next</span>(P))}<span class="hljs-keyword">catch</span>(te){<span class="hljs-title function_">I</span>(te)}},v=<span class="hljs-function"><span class="hljs-params">P</span>=&gt;</span>{<span class="hljs-keyword">try</span>{<span class="hljs-title function_">U</span>(T.<span class="hljs-keyword">throw</span>(P))}<span class="hljs-keyword">catch</span>(te){<span class="hljs-title function_">I</span>(te)}},U=<span class="hljs-function"><span class="hljs-params">P</span>=&gt;</span>P.<span class="hljs-property">done</span>?<span class="hljs-title function_">zt</span>(P.<span class="hljs-property">value</span>):<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(P.<span class="hljs-property">value</span>).<span class="hljs-title function_">then</span>(M,v);<span class="hljs-title function_">U</span>((T=T.<span class="hljs-title function_">apply</span>(H,R)).<span class="hljs-title function_">next</span>())});(<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">var</span> H={<span class="hljs-number">852</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">I,M,v</span>){(<span class="hljs-keyword">function</span>(<span class="hljs-params">U,P</span>){I.<span class="hljs-property">exports</span>=<span class="hljs-title function_">P</span>(<span class="hljs-title function_">v</span>(<span class="hljs-number">212</span>))})(<span class="hljs-variable language_">this</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">U</span>){<span class="hljs-string">&quot;use strict&quot;</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">P</span>(<span class="hljs-params">Q</span>){<span class="hljs-keyword">return</span> Q&amp;&amp;<span class="hljs-keyword">typeof</span> Q==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;<span class="hljs-string">&quot;default&quot;</span><span class="hljs-keyword">in</span> Q?<span class="hljs-attr">Q</span>:{<span class="hljs-attr">default</span>:Q}}<span class="hljs-keyword">var</span> te=<span class="hljs-title function_">P</span>(U),<span class="hljs-title class_">Pe</span>={<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;zh-cn&quot;</span>,<span class="hljs-attr">weekdays</span>:<span class="hljs-string">&quot;\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D&quot;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;_&quot;</span>),<span class="hljs-attr">weekdaysShort</span>:<span class="hljs-string">&quot;\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D&quot;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;_&quot;</span>),<span class="hljs-attr">weekdaysMin</span>:<span class="hljs-string">&quot;\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D&quot;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;_&quot;</span>),<span class="hljs-attr">months</span>:<span class="hljs-string">&quot;\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708&quot;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;_&quot;</span>),<span class="hljs-attr">monthsShort</span>:<span class="hljs-string">&quot;1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708&quot;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;_&quot;</span>),<span class="hljs-attr">ordinal</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">Q,B</span>){<span class="hljs-keyword">return</span> B===<span class="hljs-string">&quot;W&quot;</span>?Q+<span class="hljs-string">&quot;\u5468&quot;</span>:Q+<span class="hljs-string">&quot;\u65E5&quot;</span>},<span class="hljs-attr">weekStart</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">yearStart</span>:<span class="hljs-number">4</span>,<span class="hljs-attr">formats</span>:{<span class="hljs-attr">LT</span>:<span class="hljs-string">&quot;HH:mm&quot;</span>,<span class="hljs-attr">LTS</span>:<span class="hljs-string">&quot;HH:mm:ss&quot;</span>,<span class="hljs-attr">L</span>:<span class="hljs-string">&quot;YYYY/MM/DD&quot;</span>,<span class="hljs-attr">LL</span>:<span class="hljs-string">&quot;YYYY\u5E74M\u6708D\u65E5&quot;</span>,<span class="hljs-attr">LLL</span>:<span class="hljs-string">&quot;YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206&quot;</span>,<span class="hljs-attr">LLLL</span>:<span class="hljs-string">&quot;YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206&quot;</span>,<span class="hljs-attr">l</span>:<span class="hljs-string">&quot;YYYY/M/D&quot;</span>,<span class="hljs-attr">ll</span>:<span class="hljs-string">&quot;YYYY\u5E74M\u6708D\u65E5&quot;</span>,<span class="hljs-attr">lll</span>:<span class="hljs-string">&quot;YYYY\u5E74M\u6708D\u65E5 HH:mm&quot;</span>,<span class="hljs-attr">llll</span>:<span class="hljs-string">&quot;YYYY\u5E74M\u6708D\u65E5dddd HH:mm&quot;</span>},<span class="hljs-attr">relativeTime</span>:{<span class="hljs-attr">future</span>:<span class="hljs-string">&quot;%s\u5185&quot;</span>,<span class="hljs-attr">past</span>:<span class="hljs-string">&quot;%s\u524D&quot;</span>,<span class="hljs-attr">s</span>:<span class="hljs-string">&quot;\u51E0\u79D2&quot;</span>,<span class="hljs-attr">m</span>:<span class="hljs-string">&quot;1 \u5206\u949F&quot;</span>,<span class="hljs-attr">mm</span>:<span class="hljs-string">&quot;%d \u5206\u949F&quot;</span>,<span class="hljs-attr">h</span>:<span class="hljs-string">&quot;1 \u5C0F\u65F6&quot;</span>,<span class="hljs-attr">hh</span>:<span class="hljs-string">&quot;%d \u5C0F\u65F6&quot;</span>,<span class="hljs-attr">d</span>:<span class="hljs-string">&quot;1 \u5929&quot;</span>,<span class="hljs-attr">dd</span>:<span class="hljs-string">&quot;%d \u5929&quot;</span>,<span class="hljs-attr">M</span>:<span class="hljs-string">&quot;1 \u4E2A\u6708&quot;</span>,<span class="hljs-attr">MM</span>:<span class="hljs-string">&quot;%d \u4E2A\u6708&quot;</span>,<span class="hljs-attr">y</span>:<span class="hljs-string">&quot;1 \u5E74&quot;</span>,<span class="hljs-attr">yy</span>:<span class="hljs-string">&quot;%d \u5E74&quot;</span>},<span class="hljs-attr">meridiem</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">Q,B</span>){<span class="hljs-keyword">var</span> he=<span class="hljs-number">100</span>*Q+B;<span class="hljs-keyword">return</span> he&lt;<span class="hljs-number">600</span>?<span class="hljs-string">&quot;\u51CC\u6668&quot;</span>:he&lt;<span class="hljs-number">900</span>?<span class="hljs-string">&quot;\u65E9\u4E0A&quot;</span>:he&lt;<span class="hljs-number">1100</span>?<span class="hljs-string">&quot;\u4E0A\u5348&quot;</span>:he&lt;<span class="hljs-number">1300</span>?<span class="hljs-string">&quot;\u4E2D\u5348&quot;</span>:he&lt;<span class="hljs-number">1800</span>?<span class="hljs-string">&quot;\u4E0B\u5348&quot;</span>:<span class="hljs-string">&quot;\u665A\u4E0A&quot;</span>}};<span class="hljs-keyword">return</span> te.<span class="hljs-property">default</span>.<span class="hljs-title function_">locale</span>(<span class="hljs-title class_">Pe</span>,<span class="hljs-literal">null</span>,!<span class="hljs-number">0</span>),<span class="hljs-title class_">Pe</span>})},<span class="hljs-number">745</span>:<span class="hljs-function">(<span class="hljs-params">I,M,v</span>)=&gt;</span>{<span class="hljs-string">&quot;use strict&quot;</span>;<span class="hljs-keyword">var</span> U,P=<span class="hljs-title function_">v</span>(<span class="hljs-number">533</span>);<span class="hljs-keyword">if</span>(!<span class="hljs-number">0</span>)M.<span class="hljs-property">s</span>=P.<span class="hljs-property">createRoot</span>,U=P.<span class="hljs-property">hydrateRoot</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">var</span> te},<span class="hljs-number">533</span>:<span class="hljs-function"><span class="hljs-params">I</span>=&gt;</span>{<span class="hljs-string">&quot;use strict&quot;</span>;I.<span class="hljs-property">exports</span>=<span class="hljs-title class_">ReactDOM</span>},<span class="hljs-number">212</span>:<span class="hljs-function"><span class="hljs-params">I</span>=&gt;</span>{<span class="hljs-string">&quot;use strict&quot;</span>;I.<span class="hljs-property">exports</span>=dayjs}},R={};<span class="hljs-keyword">function</span> <span class="hljs-title function_">T</span>(<span class="hljs-params">I</span>){<span class="hljs-keyword">var</span> M=R[I];<span class="hljs-keyword">if</span>(M!==<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> M.<span class="hljs-property">exports</span>;<span class="hljs-keyword">var</span> v=R[I]={<span class="hljs-attr">exports</span>:{}};<span class="hljs-keyword">return</span> H[I].<span class="hljs-title function_">call</span>(v.<span class="hljs-property">exports</span>,v,v.<span class="hljs-property">exports</span>,T),v.<span class="hljs-property">exports</span>}T.<span class="hljs-property">n</span>=<span class="hljs-function"><span class="hljs-params">I</span>=&gt;</span>{<span class="hljs-keyword">var</span> M=I&amp;&amp;I.<span class="hljs-property">__esModule</span>?<span class="hljs-function">()=&gt;</span>I.<span class="hljs-property">default</span>:<span class="hljs-function">()=&gt;</span>I;<span class="hljs-keyword">return</span> T.<span class="hljs-title function_">d</span>(M,{<span class="hljs-attr">a</span>:M}),M},T.<span class="hljs-property">d</span>=<span class="hljs-function">(<span class="hljs-params">I,M</span>)=&gt;</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> v <span class="hljs-keyword">in</span> M)T.<span class="hljs-title function_">o</span>(M,v)&amp;&amp;!T.<span class="hljs-title function_">o</span>(I,v)&amp;&amp;<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(I,v,{<span class="hljs-attr">enumerable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">get</span>:M[v]})},T.<span class="hljs-property">o</span>=<span class="hljs-function">(<span class="hljs-params">I,M</span>)=&gt;</span><span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(I,M);<span class="hljs-keyword">var</span> zt={};(<span class="hljs-function">()=&gt;</span>{<span class="hljs-string">&quot;use strict&quot;</span>;<span class="hljs-keyword">const</span> I=arrive,M=<span class="hljs-string">&quot;zzxt0019-bilishield-app&quot;</span>,v=<span class="hljs-string">&quot;zzxt0019-bilishield-class&quot;</span>,U=<span class="hljs-string">&quot;zzxt0019-bilishield-style&quot;</span>,P=<span class="hljs-string">&quot;zzxt0019-bilishield-display&quot;</span>,te={<span class="hljs-attr">hide</span>:<span class="hljs-string">`.<span class="hljs-subst">${v}</span> { display: none !important; }`</span>,<span class="hljs-attr">debug</span>:<span class="hljs-string">`.<span class="hljs-subst">${v}</span> { background-color: yellow !important; border: 5px groove yellow; }`</span>};<span class="hljs-keyword">class</span> <span class="hljs-title class_">Pe</span>{<span class="hljs-keyword">static</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">sp</span>.<span class="hljs-title function_">set</span>(e.<span class="hljs-property">key</span>,e)}}<span class="hljs-title function_">N</span>(<span class="hljs-title class_">Pe</span>,<span class="hljs-string">&quot;sp&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>);<span class="hljs-keyword">class</span> <span class="hljs-title class_">Q</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;name&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;mainSelector&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;checker&quot;</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>=e.<span class="hljs-property">key</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=e.<span class="hljs-property">name</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">mainSelector</span>=e.<span class="hljs-property">mainSelector</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">checker</span>=e.<span class="hljs-property">checker</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">checker</span>.<span class="hljs-property">bingo</span>&amp;&amp;<span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">checker</span>.<span class="hljs-property">bingo</span>}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>{<span class="hljs-keyword">static</span> <span class="hljs-title function_">_selectSettingData</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;settings.&quot;</span>+e,[]);<span class="hljs-keyword">const</span> s=<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();<span class="hljs-keyword">let</span> i=t.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>!r.<span class="hljs-property">expireTime</span>||r.<span class="hljs-property">expireTime</span>&gt;s);<span class="hljs-keyword">return</span> i.<span class="hljs-property">length</span>!==t.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;setting.&quot;</span>+e,i),i}<span class="hljs-keyword">static</span> <span class="hljs-title function_">_resetSettingData</span>(<span class="hljs-params">e,t</span>){<span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;settings.&quot;</span>+e,t)}<span class="hljs-keyword">static</span> <span class="hljs-title function_">_insertSettingData</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">let</span> s=B.<span class="hljs-title function_">_selectSettingData</span>(e),i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(s.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>r.<span class="hljs-property">key</span>));s.<span class="hljs-title function_">push</span>(...t.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>!i.<span class="hljs-title function_">has</span>(r.<span class="hljs-property">key</span>))),B.<span class="hljs-title function_">_resetSettingData</span>(e,s)}<span class="hljs-keyword">static</span> <span class="hljs-title function_">_updateSettingData</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">let</span> s=B.<span class="hljs-title function_">_selectSettingData</span>(e),i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>;t.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>i.<span class="hljs-title function_">set</span>(r.<span class="hljs-property">key</span>,r)),s.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>{i.<span class="hljs-title function_">has</span>(r.<span class="hljs-property">key</span>)&amp;&amp;(r.<span class="hljs-property">hide</span>=i.<span class="hljs-title function_">get</span>(r.<span class="hljs-property">key</span>).<span class="hljs-property">hide</span>,r.<span class="hljs-property">expireTime</span>=i.<span class="hljs-title function_">get</span>(r.<span class="hljs-property">key</span>).<span class="hljs-property">expireTime</span>)}),B.<span class="hljs-title function_">_resetSettingData</span>(e,s)}<span class="hljs-keyword">static</span> <span class="hljs-title function_">_deleteSettingData</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">let</span> s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(t);B.<span class="hljs-title function_">_resetSettingData</span>(e,B.<span class="hljs-title function_">_selectSettingData</span>(e).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>!s.<span class="hljs-title function_">has</span>(i.<span class="hljs-property">key</span>)))}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">he</span>{}<span class="hljs-keyword">const</span> be=<span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> he{<span class="hljs-title function_">select</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">if</span>(e===<span class="hljs-string">&quot;uid&quot;</span>){<span class="hljs-keyword">let</span> t=B.<span class="hljs-title function_">_selectSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>);<span class="hljs-keyword">return</span> t.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>s.<span class="hljs-property">uid</span>=s.<span class="hljs-property">key</span>),t}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e===<span class="hljs-string">&quot;username&quot;</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">select</span>(<span class="hljs-string">&quot;uid&quot;</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(t.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>{<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">uid2username</span>(s.<span class="hljs-property">key</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span><span class="hljs-title function_">i</span>({<span class="hljs-attr">key</span>:s.<span class="hljs-property">key</span>,<span class="hljs-attr">username</span>:r,<span class="hljs-attr">hide</span>:s.<span class="hljs-property">hide</span>,<span class="hljs-attr">expireTime</span>:s.<span class="hljs-property">expireTime</span>}))})))}<span class="hljs-keyword">return</span>[]})}<span class="hljs-title function_">reset</span>(<span class="hljs-params">e,t</span>){B.<span class="hljs-title function_">_resetSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>,t)}<span class="hljs-title function_">insert</span>(<span class="hljs-params">e,t</span>){B.<span class="hljs-title function_">_insertSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>,t)}<span class="hljs-title function_">update</span>(<span class="hljs-params">e,t</span>){B.<span class="hljs-title function_">_updateSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>,t)}<span class="hljs-title function_">delete</span>(<span class="hljs-params">e,t</span>){B.<span class="hljs-title function_">_deleteSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>,t)}<span class="hljs-title function_">type</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> e===<span class="hljs-string">&quot;uid&quot;</span>?<span class="hljs-string">&quot;equal&quot;</span>:(e===<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&quot;like&quot;</span>)}<span class="hljs-title function_">uid2username</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">if</span>(e===<span class="hljs-string">&quot;&quot;</span>)<span class="hljs-keyword">return</span><span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">let</span> t=<span class="hljs-title class_">Number</span>(e),i=<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;uid_&quot;</span>+t);<span class="hljs-keyword">return</span> i&amp;&amp;<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()&lt;i.<span class="hljs-property">expireTime</span>?i.<span class="hljs-property">username</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">r,l</span>)=&gt;</span>{<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">queryUsername</span>(r,l,t,be.<span class="hljs-property">apiIndex</span>,be.<span class="hljs-property">apiIndex</span>)}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&quot;&quot;</span>))})}<span class="hljs-title function_">username2infos</span>(<span class="hljs-params">e,t=<span class="hljs-number">1</span></span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">s,i</span>)=&gt;</span>{<span class="hljs-title function_">GM_xmlhttpRequest</span>({<span class="hljs-attr">method</span>:<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-attr">url</span>:<span class="hljs-string">&quot;http://api.bilibili.com/x/web-interface/search/type?search_type=bili_user&amp;page=&quot;</span>+t+<span class="hljs-string">&quot;&amp;keyword=&quot;</span>+e,<span class="hljs-attr">onload</span>:<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>{<span class="hljs-keyword">var</span> a;<span class="hljs-keyword">let</span> l=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(r.<span class="hljs-property">responseText</span>);<span class="hljs-keyword">if</span>(l.<span class="hljs-property">code</span>===<span class="hljs-number">0</span>&amp;&amp;((a=l.<span class="hljs-property">data</span>)!=<span class="hljs-literal">null</span>&amp;&amp;a.<span class="hljs-property">result</span>)){<span class="hljs-keyword">let</span> o=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> c=<span class="hljs-number">0</span>;c&lt;l.<span class="hljs-property">data</span>.<span class="hljs-property">result</span>.<span class="hljs-property">length</span>;c++)o.<span class="hljs-title function_">push</span>({<span class="hljs-attr">uid</span>:l.<span class="hljs-property">data</span>.<span class="hljs-property">result</span>[c].<span class="hljs-property">mid</span>,<span class="hljs-attr">username</span>:l.<span class="hljs-property">data</span>.<span class="hljs-property">result</span>[c].<span class="hljs-property">uname</span>});<span class="hljs-title function_">s</span>(o)}<span class="hljs-keyword">else</span> <span class="hljs-title function_">i</span>()}})}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>([]))})}<span class="hljs-title function_">queryUsername</span>(<span class="hljs-params">e,t,s,i,r</span>){<span class="hljs-keyword">let</span> l=be.<span class="hljs-property">apis</span>[r];<span class="hljs-title function_">GM_xmlhttpRequest</span>({<span class="hljs-attr">method</span>:<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-attr">url</span>:l.<span class="hljs-title function_">url</span>(s),<span class="hljs-attr">onload</span>:<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span>{<span class="hljs-keyword">let</span> o=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(a.<span class="hljs-property">responseText</span>);<span class="hljs-keyword">if</span>(l.<span class="hljs-title function_">success</span>(o)){be.<span class="hljs-property">apiIndex</span>=r;<span class="hljs-keyword">let</span> c=l.<span class="hljs-title function_">username</span>(o),u={<span class="hljs-attr">uid</span>:s,<span class="hljs-attr">username</span>:c,<span class="hljs-attr">expireTime</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()+<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()*<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>};<span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;uid_&quot;</span>+s,u),<span class="hljs-title function_">e</span>(c)}<span class="hljs-keyword">else</span> l.<span class="hljs-title function_">change</span>(o)?(r=(r+<span class="hljs-number">1</span>)%be.<span class="hljs-property">apis</span>.<span class="hljs-property">length</span>,i!==r?<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">queryUsername</span>(e,t,s,i,r):<span class="hljs-title function_">t</span>()):<span class="hljs-title function_">t</span>()}})}};<span class="hljs-keyword">let</span> de=be;<span class="hljs-title function_">N</span>(de,<span class="hljs-string">&quot;apiIndex&quot;</span>,<span class="hljs-number">0</span>),<span class="hljs-title function_">N</span>(de,<span class="hljs-string">&quot;apis&quot;</span>,[{<span class="hljs-attr">url</span>:<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span><span class="hljs-string">&quot;http://api.bilibili.com/x/web-interface/card?mid=&quot;</span>+e,<span class="hljs-attr">success</span>:<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>e.<span class="hljs-property">code</span>===<span class="hljs-number">0</span>,<span class="hljs-attr">username</span>:<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>e.<span class="hljs-property">data</span>.<span class="hljs-property">card</span>.<span class="hljs-property">name</span>,<span class="hljs-attr">change</span>:<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>e.<span class="hljs-property">code</span>===-<span class="hljs-number">412</span>},{<span class="hljs-attr">url</span>:<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span><span class="hljs-string">&quot;https://api.bilibili.com/x/space/acc/info?mid=&quot;</span>+e,<span class="hljs-attr">success</span>:<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>e.<span class="hljs-property">code</span>===<span class="hljs-number">0</span>,<span class="hljs-attr">username</span>:<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>e.<span class="hljs-property">data</span>.<span class="hljs-property">name</span>,<span class="hljs-attr">change</span>:<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>e.<span class="hljs-property">code</span>===-<span class="hljs-number">412</span>}]);<span class="hljs-keyword">class</span> <span class="hljs-title class_">Ui</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;uid&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;username&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;expireTime&quot;</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">uid</span>=e,<span class="hljs-variable language_">this</span>.<span class="hljs-property">username</span>=t,<span class="hljs-variable language_">this</span>.<span class="hljs-property">expireTime</span>=s}}<span class="hljs-keyword">const</span> oe={<span class="hljs-attr">uid</span>:<span class="hljs-keyword">new</span> de,<span class="hljs-attr">username</span>:<span class="hljs-keyword">new</span> de},nn=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(oe));<span class="hljs-keyword">function</span> <span class="hljs-title function_">pe</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">return</span> nn.<span class="hljs-title function_">has</span>(n)}<span class="hljs-keyword">class</span> <span class="hljs-title class_">rn</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;hide&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;expireTime&quot;</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>=e.<span class="hljs-property">key</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">hide</span>=e.<span class="hljs-property">hide</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">expireTime</span>=e.<span class="hljs-property">expireTime</span>}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">ln</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;name&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;type&quot;</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>=e.<span class="hljs-property">key</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=e.<span class="hljs-property">name</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>=e.<span class="hljs-property">type</span>}}<span class="hljs-keyword">const</span> fe=<span class="hljs-keyword">class</span>{<span class="hljs-keyword">static</span> <span class="hljs-title function_">getSystemSettings</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">if</span>(!fe.<span class="hljs-property">settingMap</span>){<span class="hljs-keyword">let</span> e=<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;script.setting&quot;</span>);fe.<span class="hljs-property">settingMap</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(e).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>{<span class="hljs-keyword">let</span> s=e[t];s.<span class="hljs-property">key</span>=t,fe.<span class="hljs-property">settingMap</span>.<span class="hljs-title function_">set</span>(t,s)}),[<span class="hljs-string">&quot;uid&quot;</span>,<span class="hljs-string">&quot;username&quot;</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>{fe.<span class="hljs-property">settingMap</span>.<span class="hljs-title function_">set</span>(t,<span class="hljs-keyword">new</span> <span class="hljs-title function_">ln</span>({<span class="hljs-attr">key</span>:t,<span class="hljs-attr">name</span>:t,<span class="hljs-attr">type</span>:oe[t].<span class="hljs-title function_">type</span>(t)}))})}<span class="hljs-keyword">return</span> fe.<span class="hljs-property">settingMap</span>}<span class="hljs-keyword">static</span> <span class="hljs-title function_">toSettingData</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(e)?e.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>?[]:<span class="hljs-keyword">typeof</span> e[<span class="hljs-number">0</span>]==<span class="hljs-string">&quot;string&quot;</span>?e.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title function_">rn</span>({<span class="hljs-attr">key</span>:t})):<span class="hljs-attr">e</span>:<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;string&quot;</span>?[{<span class="hljs-attr">key</span>:e}]:[e]}<span class="hljs-keyword">static</span> <span class="hljs-title function_">toSettingKey</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(e)?e.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>?[]:<span class="hljs-keyword">typeof</span> e[<span class="hljs-number">0</span>]==<span class="hljs-string">&quot;string&quot;</span>?<span class="hljs-attr">e</span>:e.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>t.<span class="hljs-property">key</span>):<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;string&quot;</span>?[e]:[e.<span class="hljs-property">key</span>]}<span class="hljs-keyword">static</span> <span class="hljs-title function_">selectSettingData</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">return</span> <span class="hljs-title function_">pe</span>(e)?<span class="hljs-keyword">yield</span> oe[e].<span class="hljs-title function_">select</span>(e):B.<span class="hljs-title function_">_selectSettingData</span>(e)})}<span class="hljs-keyword">static</span> <span class="hljs-title function_">selectSettingDataString</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">return</span> <span class="hljs-title function_">pe</span>(e)?(<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">selectSettingData</span>(e)).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>t[e]):(<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">selectSettingData</span>(e)).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>t.<span class="hljs-property">key</span>)})}<span class="hljs-keyword">static</span> <span class="hljs-title function_">resetSettingData</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">let</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toSettingData</span>(t);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">pe</span>(e))<span class="hljs-keyword">return</span> oe[e].<span class="hljs-title function_">reset</span>(e,s);B.<span class="hljs-title function_">_resetSettingData</span>(e,s)}<span class="hljs-keyword">static</span> <span class="hljs-title function_">insertSettingData</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">let</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toSettingData</span>(t);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">pe</span>(e))<span class="hljs-keyword">return</span> oe[e].<span class="hljs-title function_">insert</span>(e,s);B.<span class="hljs-title function_">_insertSettingData</span>(e,s)}<span class="hljs-keyword">static</span> <span class="hljs-title function_">updateSettingData</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">let</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toSettingData</span>(t);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">pe</span>(e))<span class="hljs-keyword">return</span> oe[e].<span class="hljs-title function_">update</span>(e,s);B.<span class="hljs-title function_">_updateSettingData</span>(e,s)}<span class="hljs-keyword">static</span> <span class="hljs-title function_">deleteSettingData</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">let</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toSettingKey</span>(t);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">pe</span>(e))<span class="hljs-keyword">return</span> oe[e].<span class="hljs-title function_">delete</span>(e,s);B.<span class="hljs-title function_">_deleteSettingData</span>(e,s)}<span class="hljs-keyword">static</span> <span class="hljs-title function_">getCheckType</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">pe</span>(e)?oe[e].<span class="hljs-title function_">type</span>(e):fe.<span class="hljs-title function_">getSystemSettings</span>().<span class="hljs-title function_">get</span>(e).<span class="hljs-property">type</span>}};<span class="hljs-keyword">let</span> j=fe;<span class="hljs-title function_">N</span>(j,<span class="hljs-string">&quot;settingMap&quot;</span>);<span class="hljs-keyword">class</span> <span class="hljs-title class_">an</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;mainSelector&quot;</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">mainSelector</span>=e}<span class="hljs-title function_">display</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){(<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bingo</span>(e))&amp;&amp;!e.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(v)&amp;&amp;e.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(v)})}<span class="hljs-title function_">show</span>(<span class="hljs-params">e=<span class="hljs-variable language_">window</span>.<span class="hljs-variable language_">document</span></span>){<span class="hljs-keyword">let</span> t=e.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mainSelector</span>+<span class="hljs-string">&quot;.&quot;</span>+v);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;s&lt;t.<span class="hljs-property">length</span>;s++)t[s].<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(v)}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">on</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">an</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">t,s</span>){<span class="hljs-variable language_">super</span>(t);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;mainSelector&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;checkers&quot;</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">mainSelector</span>=t,<span class="hljs-variable language_">this</span>.<span class="hljs-property">checkers</span>=s}<span class="hljs-title function_">bingo</span>(<span class="hljs-params">t</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">checkers</span>)<span class="hljs-keyword">if</span>(s.<span class="hljs-property">innerSelector</span>){<span class="hljs-keyword">let</span> i=t.<span class="hljs-title function_">querySelectorAll</span>(s.<span class="hljs-property">innerSelector</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;r&lt;i.<span class="hljs-property">length</span>;r++){<span class="hljs-keyword">const</span> l=i[r];<span class="hljs-keyword">if</span>(<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bingo0</span>(l,s))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bingo0</span>(t,s))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>})}<span class="hljs-title function_">bingo0</span>(<span class="hljs-params">t,s</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">var</span> i,r;<span class="hljs-keyword">if</span>(s.<span class="hljs-property">bingo</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span> s.<span class="hljs-title function_">bingo</span>(t);<span class="hljs-keyword">if</span>(s.<span class="hljs-property">always</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(s.<span class="hljs-property">innerHTML</span>&amp;&amp;s.<span class="hljs-property">setting</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> l <span class="hljs-keyword">of</span> <span class="hljs-keyword">yield</span> j.<span class="hljs-title function_">selectSettingDataString</span>(s.<span class="hljs-property">setting</span>.<span class="hljs-property">key</span>))<span class="hljs-keyword">switch</span>((i=s.<span class="hljs-property">type</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">i</span>:j.<span class="hljs-title function_">getCheckType</span>(s.<span class="hljs-property">setting</span>.<span class="hljs-property">key</span>)){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;equal&quot;</span>:<span class="hljs-keyword">if</span>(t.<span class="hljs-property">innerHTML</span>===l)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;like&quot;</span>:<span class="hljs-keyword">if</span>(t.<span class="hljs-property">innerHTML</span>.<span class="hljs-title function_">includes</span>(l))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;regexp&quot;</span>:<span class="hljs-keyword">if</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(l,<span class="hljs-string">&quot;i&quot;</span>).<span class="hljs-title function_">test</span>(t.<span class="hljs-property">innerHTML</span>))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(s.<span class="hljs-property">attribute</span>&amp;&amp;s.<span class="hljs-property">setting</span>&amp;&amp;t.<span class="hljs-title function_">hasAttribute</span>(s.<span class="hljs-property">attribute</span>))<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> l <span class="hljs-keyword">of</span> <span class="hljs-keyword">yield</span> j.<span class="hljs-title function_">selectSettingDataString</span>(s.<span class="hljs-property">setting</span>.<span class="hljs-property">key</span>)){<span class="hljs-keyword">let</span> a=(r=s.<span class="hljs-property">type</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">r</span>:j.<span class="hljs-title function_">getCheckType</span>(s.<span class="hljs-property">setting</span>.<span class="hljs-property">key</span>),o=t.<span class="hljs-title function_">getAttribute</span>(s.<span class="hljs-property">attribute</span>);<span class="hljs-keyword">switch</span>(a){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;equal&quot;</span>:<span class="hljs-keyword">if</span>(o===l)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;like&quot;</span>:<span class="hljs-keyword">if</span>(o.<span class="hljs-title function_">includes</span>(l))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;regexp&quot;</span>:<span class="hljs-keyword">if</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(l,<span class="hljs-string">&quot;i&quot;</span>).<span class="hljs-title function_">test</span>(o))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>}}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>})}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">cn</span>{}<span class="hljs-keyword">class</span> <span class="hljs-title class_">un</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">cn</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>){<span class="hljs-variable language_">super</span>(...<span class="hljs-variable language_">arguments</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;pageKey&quot;</span>,<span class="hljs-string">&quot;bilibili_live&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;danmakuMap&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;spCheckers&quot;</span>,[{<span class="hljs-attr">mainSelector</span>:<span class="hljs-string">&quot;.chat-item.danmaku-item&quot;</span>,<span class="hljs-attr">bingo</span>:<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span><span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">var</span> s;<span class="hljs-keyword">if</span>((<span class="hljs-keyword">yield</span> j.<span class="hljs-title function_">selectSettingDataString</span>(<span class="hljs-string">&quot;uid&quot;</span>)).<span class="hljs-title function_">includes</span>((s=t.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;[data-anchor-id]&quot;</span>))==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;data-anchor-id&quot;</span>))){<span class="hljs-keyword">try</span>{<span class="hljs-keyword">let</span> i=<span class="hljs-title class_">String</span>(t.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;data-danmaku&quot;</span>)),r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">danmakuMap</span>.<span class="hljs-title function_">get</span>(i);<span class="hljs-variable language_">this</span>.<span class="hljs-property">danmakuMap</span>.<span class="hljs-title function_">set</span>(i,r?r+<span class="hljs-number">1</span>:<span class="hljs-number">1</span>);<span class="hljs-keyword">let</span> l=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.bilibili-danmaku.mode-roll&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;l.<span class="hljs-property">length</span>;a++){<span class="hljs-keyword">const</span> o=l[a];<span class="hljs-keyword">if</span>(o.<span class="hljs-property">innerHTML</span>===i){o.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(v),<span class="hljs-variable language_">this</span>.<span class="hljs-property">danmakuMap</span>.<span class="hljs-title function_">get</span>(i)===<span class="hljs-number">1</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">danmakuMap</span>.<span class="hljs-title function_">delete</span>(i):<span class="hljs-variable language_">this</span>.<span class="hljs-property">danmakuMap</span>.<span class="hljs-title function_">set</span>(i,<span class="hljs-variable language_">this</span>.<span class="hljs-property">danmakuMap</span>.<span class="hljs-title function_">get</span>(i)-<span class="hljs-number">1</span>);<span class="hljs-keyword">break</span>}}}<span class="hljs-keyword">catch</span>(i){<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(i,t)}<span class="hljs-keyword">finally</span>{<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(!<span class="hljs-number">0</span>,t)}<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>})},{<span class="hljs-attr">mainSelector</span>:<span class="hljs-string">&quot;.bilibili-danmaku.mode-roll&quot;</span>,<span class="hljs-attr">bingo</span>:<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span><span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">let</span> s=t.<span class="hljs-property">innerHTML</span>,i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">danmakuMap</span>.<span class="hljs-title function_">get</span>(s);<span class="hljs-keyword">return</span> i?(<span class="hljs-variable language_">this</span>.<span class="hljs-property">danmakuMap</span>.<span class="hljs-title function_">set</span>(s,i-<span class="hljs-number">1</span>),!<span class="hljs-number">0</span>):!<span class="hljs-number">1</span>})}])}}<span class="hljs-keyword">const</span> <span class="hljs-title class_">Qt</span>=<span class="hljs-keyword">class</span>{<span class="hljs-keyword">static</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">sp</span>.<span class="hljs-title function_">set</span>(e.<span class="hljs-property">pageKey</span>,e)}};<span class="hljs-keyword">let</span> je=<span class="hljs-title class_">Qt</span>;<span class="hljs-title function_">N</span>(je,<span class="hljs-string">&quot;sp&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>),(<span class="hljs-function">()=&gt;</span>{<span class="hljs-title class_">Qt</span>.<span class="hljs-title function_">init</span>(<span class="hljs-keyword">new</span> un)})();<span class="hljs-keyword">class</span> <span class="hljs-title class_">Xt</span>{<span class="hljs-title function_">windowKey</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(e===<span class="hljs-variable language_">window</span>)<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>.<span class="hljs-property">length</span>;t++)<span class="hljs-keyword">if</span>(e===<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>[t])<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>}<span class="hljs-title function_">wrKey</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">windowKey</span>(t)+<span class="hljs-string">&quot;:&quot;</span>+e.<span class="hljs-property">mainSelector</span>}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">fn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Xt</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>){<span class="hljs-variable language_">super</span>(...<span class="hljs-variable language_">arguments</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;observerMap&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>)}<span class="hljs-title function_">start</span>(<span class="hljs-params">t,s</span>){<span class="hljs-keyword">let</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wrKey</span>(t,s);<span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">observerMap</span>.<span class="hljs-title function_">has</span>(i)){<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handle</span>(t,s);<span class="hljs-keyword">let</span> r=<span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">()=&gt;</span>{<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handle</span>(t,s)});r.<span class="hljs-title function_">observe</span>(s.<span class="hljs-property">document</span>,{<span class="hljs-attr">childList</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">subtree</span>:!<span class="hljs-number">0</span>}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">observerMap</span>.<span class="hljs-title function_">set</span>(i,r)}}<span class="hljs-title function_">handle</span>(<span class="hljs-params">t,s</span>){<span class="hljs-keyword">let</span> i=s.<span class="hljs-property">document</span>.<span class="hljs-title function_">querySelectorAll</span>(t.<span class="hljs-property">mainSelector</span>+<span class="hljs-string">&quot;:not(.&quot;</span>+v+<span class="hljs-string">&quot;)&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;r&lt;i.<span class="hljs-property">length</span>;r++)t.<span class="hljs-title function_">display</span>(i[r])}<span class="hljs-title function_">stop</span>(<span class="hljs-params">t,s</span>){<span class="hljs-keyword">var</span> r;<span class="hljs-keyword">let</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wrKey</span>(t,s);(r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">observerMap</span>.<span class="hljs-title function_">get</span>(i))==<span class="hljs-literal">null</span>||r.<span class="hljs-title function_">disconnect</span>(),<span class="hljs-variable language_">this</span>.<span class="hljs-property">observerMap</span>.<span class="hljs-title function_">delete</span>(i)}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">hn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Xt</span>{<span class="hljs-title function_">start</span>(<span class="hljs-params">e,t</span>){t.<span class="hljs-property">document</span>.<span class="hljs-title function_">arrive</span>(e.<span class="hljs-property">mainSelector</span>,{<span class="hljs-attr">fireOnAttributesModification</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">existing</span>:!<span class="hljs-number">0</span>},<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>{e.<span class="hljs-title function_">display</span>(s)})}<span class="hljs-title function_">stop</span>(<span class="hljs-params">e,t</span>){t.<span class="hljs-property">document</span>.<span class="hljs-title function_">unbindArrive</span>(e.<span class="hljs-property">mainSelector</span>)}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">dn</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;name&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;regexp&quot;</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;observer&quot;</span>,<span class="hljs-keyword">new</span> hn);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;iframeObserver&quot;</span>,<span class="hljs-keyword">new</span> fn);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;working&quot;</span>,!<span class="hljs-number">1</span>);<span class="hljs-title function_">N</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;checkerMap&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>);<span class="hljs-keyword">var</span> t;<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>=e.<span class="hljs-property">key</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=(t=e.<span class="hljs-property">name</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">t</span>:e.<span class="hljs-property">key</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">regexp</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(e.<span class="hljs-property">regexp</span>.<span class="hljs-property">pattern</span>,e.<span class="hljs-property">regexp</span>.<span class="hljs-property">modifiers</span>),je.<span class="hljs-property">sp</span>.<span class="hljs-title function_">has</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>)&amp;&amp;je.<span class="hljs-property">sp</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>).<span class="hljs-property">spCheckers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>{<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insert</span>({<span class="hljs-attr">name</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">key</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">mainSelector</span>:i.<span class="hljs-property">mainSelector</span>,<span class="hljs-attr">checker</span>:{<span class="hljs-attr">bingo</span>:i.<span class="hljs-property">bingo</span>}})})}<span class="hljs-title function_">isCurrent</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">regexp</span>.<span class="hljs-title function_">test</span>(location.<span class="hljs-property">href</span>)}<span class="hljs-title function_">insert</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">checkerMap</span>.<span class="hljs-title function_">get</span>(e.<span class="hljs-property">mainSelector</span>),s=t||[];s.<span class="hljs-title function_">push</span>(e.<span class="hljs-property">checker</span>),t||<span class="hljs-variable language_">this</span>.<span class="hljs-property">checkerMap</span>.<span class="hljs-title function_">set</span>(e.<span class="hljs-property">mainSelector</span>,s)}<span class="hljs-title function_">rules</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">let</span> e=[];<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">checkerMap</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">t,s</span>)=&gt;</span>{e.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">on</span>(s,t))}),e}<span class="hljs-title function_">start</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> e <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">rules</span>()){<span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">start</span>(e,<span class="hljs-variable language_">window</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>.<span class="hljs-property">length</span>;t++)<span class="hljs-keyword">try</span>{<span class="hljs-keyword">let</span> s=<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>[t];<span class="hljs-variable language_">this</span>.<span class="hljs-property">iframeObserver</span>.<span class="hljs-title function_">start</span>(e,s)}<span class="hljs-keyword">catch</span>(s){}}<span class="hljs-variable language_">this</span>.<span class="hljs-property">working</span>=!<span class="hljs-number">0</span>}<span class="hljs-title function_">stop</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> e <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">rules</span>()){<span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">stop</span>(e,<span class="hljs-variable language_">window</span>),e.<span class="hljs-title function_">show</span>();<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>.<span class="hljs-property">length</span>;t++)<span class="hljs-keyword">try</span>{<span class="hljs-keyword">let</span> s=<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>[t];<span class="hljs-variable language_">this</span>.<span class="hljs-property">iframeObserver</span>.<span class="hljs-title function_">stop</span>(e,s),e.<span class="hljs-title function_">show</span>(s.<span class="hljs-property">document</span>)}<span class="hljs-keyword">catch</span>(s){}}<span class="hljs-variable language_">this</span>.<span class="hljs-property">working</span>=!<span class="hljs-number">1</span>}<span class="hljs-title function_">arrive</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCurrent</span>()){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> t <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">rules</span>())e===<span class="hljs-variable language_">window</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">start</span>(t,e):<span class="hljs-variable language_">this</span>.<span class="hljs-property">iframeObserver</span>.<span class="hljs-title function_">start</span>(t,e);<span class="hljs-variable language_">document</span>===<span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">working</span>=!<span class="hljs-number">0</span>)}}<span class="hljs-title function_">leave</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCurrent</span>())<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> t <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">rules</span>())e===<span class="hljs-variable language_">window</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">stop</span>(t,e):<span class="hljs-variable language_">this</span>.<span class="hljs-property">iframeObserver</span>.<span class="hljs-title function_">stop</span>(t,e)}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">pn</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">let</span> n=<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;script.page&quot;</span>),e=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>;<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(n).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>{n[s].<span class="hljs-property">key</span>=s,e.<span class="hljs-title function_">set</span>(s,<span class="hljs-keyword">new</span> <span class="hljs-title function_">dn</span>(n[s]))}),<span class="hljs-title class_">Pe</span>.<span class="hljs-property">sp</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">s,i</span>)=&gt;</span>{e.<span class="hljs-title function_">set</span>(i,s)});<span class="hljs-keyword">let</span> t=<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;script.rule&quot;</span>);<span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(t).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>{<span class="hljs-keyword">var</span> r,l;<span class="hljs-keyword">let</span> i=t[s];i.<span class="hljs-property">key</span>=s,(r=i.<span class="hljs-property">checker</span>)!=<span class="hljs-literal">null</span>&amp;&amp;r.<span class="hljs-property">setting</span>&amp;&amp;(i.<span class="hljs-property">checker</span>.<span class="hljs-property">setting</span>=j.<span class="hljs-title function_">getSystemSettings</span>().<span class="hljs-title function_">get</span>(i.<span class="hljs-property">checker</span>.<span class="hljs-property">setting</span>)),(l=e.<span class="hljs-title function_">get</span>(i.<span class="hljs-property">page</span>))==<span class="hljs-literal">null</span>||l.<span class="hljs-title function_">insert</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">Q</span>(i))}),e}<span class="hljs-keyword">const</span> gt=<span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&quot;yaml.alias&quot;</span>),yt=<span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&quot;yaml.document&quot;</span>),ce=<span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&quot;yaml.map&quot;</span>),<span class="hljs-title class_">Zt</span>=<span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&quot;yaml.pair&quot;</span>),re=<span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&quot;yaml.scalar&quot;</span>),ke=<span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&quot;yaml.seq&quot;</span>),W=<span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">&quot;yaml.node.type&quot;</span>),<span class="hljs-title class_">Ee</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!!n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;n[W]===gt,<span class="hljs-title class_">Je</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!!n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;n[W]===yt,_e=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!!n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;n[W]===ce,D=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!!n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;n[W]===<span class="hljs-title class_">Zt</span>,L=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!!n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;n[W]===re,<span class="hljs-title class_">Fe</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!!n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;n[W]===ke;<span class="hljs-keyword">function</span> <span class="hljs-title function_">$</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">if</span>(n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>)<span class="hljs-keyword">switch</span>(n[W]){<span class="hljs-keyword">case</span> <span class="hljs-attr">ce</span>:<span class="hljs-keyword">case</span> <span class="hljs-attr">ke</span>:<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">if</span>(n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>)<span class="hljs-keyword">switch</span>(n[W]){<span class="hljs-keyword">case</span> <span class="hljs-attr">gt</span>:<span class="hljs-keyword">case</span> <span class="hljs-attr">ce</span>:<span class="hljs-keyword">case</span> <span class="hljs-attr">re</span>:<span class="hljs-keyword">case</span> <span class="hljs-attr">ke</span>:<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">const</span> <span class="hljs-title function_">mn</span>=n=&gt;(<span class="hljs-title function_">L</span>(n)||$(n))&amp;&amp;!!n.<span class="hljs-property">anchor</span>;<span class="hljs-keyword">class</span> <span class="hljs-title class_">bt</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>,W,{<span class="hljs-attr">value</span>:e})}<span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptors</span>(<span class="hljs-variable language_">this</span>));<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">range</span>&amp;&amp;(e.<span class="hljs-property">range</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">range</span>.<span class="hljs-title function_">slice</span>()),e}}<span class="hljs-keyword">const</span> x=<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;break visit&quot;</span>),es=<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;skip children&quot;</span>),se=<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;remove node&quot;</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">me</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">ts</span>(e);<span class="hljs-title class_">Je</span>(n)?<span class="hljs-title class_">Oe</span>(<span class="hljs-literal">null</span>,n.<span class="hljs-property">contents</span>,t,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>([n]))===se&amp;&amp;(n.<span class="hljs-property">contents</span>=<span class="hljs-literal">null</span>):<span class="hljs-title class_">Oe</span>(<span class="hljs-literal">null</span>,n,t,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>([]))}me.<span class="hljs-property">BREAK</span>=x,me.<span class="hljs-property">SKIP</span>=es,me.<span class="hljs-property">REMOVE</span>=se;<span class="hljs-keyword">function</span> <span class="hljs-title function_">Oe</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">const</span> i=<span class="hljs-title function_">ss</span>(n,e,t,s);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">F</span>(i)||<span class="hljs-title function_">D</span>(i))<span class="hljs-keyword">return</span> <span class="hljs-title function_">ns</span>(n,s,i),<span class="hljs-title class_">Oe</span>(n,i,t,s);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> i!=<span class="hljs-string">&quot;symbol&quot;</span>){<span class="hljs-keyword">if</span>($(e)){s=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(s.<span class="hljs-title function_">concat</span>(e));<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;r&lt;e.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;++r){<span class="hljs-keyword">const</span> l=<span class="hljs-title class_">Oe</span>(r,e.<span class="hljs-property">items</span>[r],t,s);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> l==<span class="hljs-string">&quot;number&quot;</span>)r=l-<span class="hljs-number">1</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(l===x)<span class="hljs-keyword">return</span> x;l===se&amp;&amp;(e.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(r,<span class="hljs-number">1</span>),r-=<span class="hljs-number">1</span>)}}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(e)){s=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(s.<span class="hljs-title function_">concat</span>(e));<span class="hljs-keyword">const</span> r=<span class="hljs-title class_">Oe</span>(<span class="hljs-string">&quot;key&quot;</span>,e.<span class="hljs-property">key</span>,t,s);<span class="hljs-keyword">if</span>(r===x)<span class="hljs-keyword">return</span> x;r===se&amp;&amp;(e.<span class="hljs-property">key</span>=<span class="hljs-literal">null</span>);<span class="hljs-keyword">const</span> l=<span class="hljs-title class_">Oe</span>(<span class="hljs-string">&quot;value&quot;</span>,e.<span class="hljs-property">value</span>,t,s);<span class="hljs-keyword">if</span>(l===x)<span class="hljs-keyword">return</span> x;l===se&amp;&amp;(e.<span class="hljs-property">value</span>=<span class="hljs-literal">null</span>)}}<span class="hljs-keyword">return</span> i}<span class="hljs-keyword">function</span> <span class="hljs-title function_">wt</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">ts</span>(e);<span class="hljs-title class_">Je</span>(n)?(<span class="hljs-keyword">yield</span> <span class="hljs-title class_">Ae</span>(<span class="hljs-literal">null</span>,n.<span class="hljs-property">contents</span>,t,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>([n])))===se&amp;&amp;(n.<span class="hljs-property">contents</span>=<span class="hljs-literal">null</span>):<span class="hljs-keyword">yield</span> <span class="hljs-title class_">Ae</span>(<span class="hljs-literal">null</span>,n,t,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>([]))})}wt.<span class="hljs-property">BREAK</span>=x,wt.<span class="hljs-property">SKIP</span>=es,wt.<span class="hljs-property">REMOVE</span>=se;<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ae</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">const</span> i=<span class="hljs-keyword">yield</span> <span class="hljs-title function_">ss</span>(n,e,t,s);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">F</span>(i)||<span class="hljs-title function_">D</span>(i))<span class="hljs-keyword">return</span> <span class="hljs-title function_">ns</span>(n,s,i),<span class="hljs-title class_">Ae</span>(n,i,t,s);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> i!=<span class="hljs-string">&quot;symbol&quot;</span>){<span class="hljs-keyword">if</span>($(e)){s=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(s.<span class="hljs-title function_">concat</span>(e));<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;r&lt;e.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;++r){<span class="hljs-keyword">const</span> l=<span class="hljs-keyword">yield</span> <span class="hljs-title class_">Ae</span>(r,e.<span class="hljs-property">items</span>[r],t,s);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> l==<span class="hljs-string">&quot;number&quot;</span>)r=l-<span class="hljs-number">1</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(l===x)<span class="hljs-keyword">return</span> x;l===se&amp;&amp;(e.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(r,<span class="hljs-number">1</span>),r-=<span class="hljs-number">1</span>)}}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(e)){s=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(s.<span class="hljs-title function_">concat</span>(e));<span class="hljs-keyword">const</span> r=<span class="hljs-keyword">yield</span> <span class="hljs-title class_">Ae</span>(<span class="hljs-string">&quot;key&quot;</span>,e.<span class="hljs-property">key</span>,t,s);<span class="hljs-keyword">if</span>(r===x)<span class="hljs-keyword">return</span> x;r===se&amp;&amp;(e.<span class="hljs-property">key</span>=<span class="hljs-literal">null</span>);<span class="hljs-keyword">const</span> l=<span class="hljs-keyword">yield</span> <span class="hljs-title class_">Ae</span>(<span class="hljs-string">&quot;value&quot;</span>,e.<span class="hljs-property">value</span>,t,s);<span class="hljs-keyword">if</span>(l===x)<span class="hljs-keyword">return</span> x;l===se&amp;&amp;(e.<span class="hljs-property">value</span>=<span class="hljs-literal">null</span>)}}<span class="hljs-keyword">return</span> i})}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ts</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;(n.<span class="hljs-property">Collection</span>||n.<span class="hljs-property">Node</span>||n.<span class="hljs-property">Value</span>)?<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({<span class="hljs-title class_">Alias</span>:n.<span class="hljs-property">Node</span>,<span class="hljs-title class_">Map</span>:n.<span class="hljs-property">Node</span>,<span class="hljs-title class_">Scalar</span>:n.<span class="hljs-property">Node</span>,<span class="hljs-title class_">Seq</span>:n.<span class="hljs-property">Node</span>},n.<span class="hljs-property">Value</span>&amp;&amp;{<span class="hljs-title class_">Map</span>:n.<span class="hljs-property">Value</span>,<span class="hljs-title class_">Scalar</span>:n.<span class="hljs-property">Value</span>,<span class="hljs-title class_">Seq</span>:n.<span class="hljs-property">Value</span>},n.<span class="hljs-property">Collection</span>&amp;&amp;{<span class="hljs-title class_">Map</span>:n.<span class="hljs-property">Collection</span>,<span class="hljs-title class_">Seq</span>:n.<span class="hljs-property">Collection</span>},n):n}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ss</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">var</span> i,r,l,a,o;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> t==<span class="hljs-string">&quot;function&quot;</span>)<span class="hljs-keyword">return</span> <span class="hljs-title function_">t</span>(n,e,s);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">_e</span>(e))<span class="hljs-keyword">return</span>(i=t.<span class="hljs-property">Map</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.<span class="hljs-title function_">call</span>(t,n,e,s);<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Fe</span>(e))<span class="hljs-keyword">return</span>(r=t.<span class="hljs-property">Seq</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:r.<span class="hljs-title function_">call</span>(t,n,e,s);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(e))<span class="hljs-keyword">return</span>(l=t.<span class="hljs-property">Pair</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:l.<span class="hljs-title function_">call</span>(t,n,e,s);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">L</span>(e))<span class="hljs-keyword">return</span>(a=t.<span class="hljs-property">Scalar</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:a.<span class="hljs-title function_">call</span>(t,n,e,s);<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Ee</span>(e))<span class="hljs-keyword">return</span>(o=t.<span class="hljs-property">Alias</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:o.<span class="hljs-title function_">call</span>(t,n,e,s)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ns</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span> s=e[e.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>($(s))s.<span class="hljs-property">items</span>[n]=t;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(s))n===<span class="hljs-string">&quot;key&quot;</span>?s.<span class="hljs-property">key</span>=<span class="hljs-attr">t</span>:s.<span class="hljs-property">value</span>=t;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Je</span>(s))s.<span class="hljs-property">contents</span>=t;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> i=<span class="hljs-title class_">Ee</span>(s)?<span class="hljs-string">&quot;alias&quot;</span>:<span class="hljs-string">&quot;scalar&quot;</span>;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Cannot replace node with <span class="hljs-subst">${i}</span> parent`</span>)}}<span class="hljs-keyword">const</span> gn={<span class="hljs-string">&quot;!&quot;</span>:<span class="hljs-string">&quot;%21&quot;</span>,<span class="hljs-string">&quot;,&quot;</span>:<span class="hljs-string">&quot;%2C&quot;</span>,<span class="hljs-string">&quot;[&quot;</span>:<span class="hljs-string">&quot;%5B&quot;</span>,<span class="hljs-string">&quot;]&quot;</span>:<span class="hljs-string">&quot;%5D&quot;</span>,<span class="hljs-string">&quot;{&quot;</span>:<span class="hljs-string">&quot;%7B&quot;</span>,<span class="hljs-string">&quot;}&quot;</span>:<span class="hljs-string">&quot;%7D&quot;</span>},yn=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[!,[\]{}]/g</span>,<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>gn[e]);<span class="hljs-keyword">class</span> <span class="hljs-title class_">Y</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e,t</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">docStart</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">docEnd</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},Y.<span class="hljs-property">defaultYaml</span>,e),<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},Y.<span class="hljs-property">defaultTags</span>,t)}<span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-keyword">new</span> <span class="hljs-title function_">Y</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>);<span class="hljs-keyword">return</span> e.<span class="hljs-property">docStart</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">docStart</span>,e}<span class="hljs-title function_">atDocument</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-keyword">new</span> <span class="hljs-title function_">Y</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>);<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>.<span class="hljs-property">version</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;1.1&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNextDocument</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;1.2&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNextDocument</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>={<span class="hljs-attr">explicit</span>:Y.<span class="hljs-property">defaultYaml</span>.<span class="hljs-property">explicit</span>,<span class="hljs-attr">version</span>:<span class="hljs-string">&quot;1.2&quot;</span>},<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},Y.<span class="hljs-property">defaultTags</span>);<span class="hljs-keyword">break</span>}<span class="hljs-keyword">return</span> e}<span class="hljs-title function_">add</span>(<span class="hljs-params">e,t</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNextDocument</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>={<span class="hljs-attr">explicit</span>:Y.<span class="hljs-property">defaultYaml</span>.<span class="hljs-property">explicit</span>,<span class="hljs-attr">version</span>:<span class="hljs-string">&quot;1.1&quot;</span>},<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},Y.<span class="hljs-property">defaultTags</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNextDocument</span>=!<span class="hljs-number">1</span>);<span class="hljs-keyword">const</span> s=e.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[ \t]+/</span>),i=s.<span class="hljs-title function_">shift</span>();<span class="hljs-keyword">switch</span>(i){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;%TAG&quot;</span>:{<span class="hljs-keyword">if</span>(s.<span class="hljs-property">length</span>!==<span class="hljs-number">2</span>&amp;&amp;(<span class="hljs-title function_">t</span>(<span class="hljs-number">0</span>,<span class="hljs-string">&quot;%TAG directive should contain exactly two parts&quot;</span>),s.<span class="hljs-property">length</span>&lt;<span class="hljs-number">2</span>))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span>[r,l]=s;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>[r]=l,!<span class="hljs-number">0</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;%YAML&quot;</span>:{<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>.<span class="hljs-property">explicit</span>=!<span class="hljs-number">0</span>,s.<span class="hljs-property">length</span>!==<span class="hljs-number">1</span>)<span class="hljs-keyword">return</span> <span class="hljs-title function_">t</span>(<span class="hljs-number">0</span>,<span class="hljs-string">&quot;%YAML directive should contain exactly one part&quot;</span>),!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span>[r]=s;<span class="hljs-keyword">if</span>(r===<span class="hljs-string">&quot;1.1&quot;</span>||r===<span class="hljs-string">&quot;1.2&quot;</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>.<span class="hljs-property">version</span>=r,!<span class="hljs-number">0</span>;{<span class="hljs-keyword">const</span> l=<span class="hljs-regexp">/^\d+\.\d+$/</span>.<span class="hljs-title function_">test</span>(r);<span class="hljs-keyword">return</span> <span class="hljs-title function_">t</span>(<span class="hljs-number">6</span>,<span class="hljs-string">`Unsupported YAML version <span class="hljs-subst">${r}</span>`</span>,l),!<span class="hljs-number">1</span>}}<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span> <span class="hljs-title function_">t</span>(<span class="hljs-number">0</span>,<span class="hljs-string">`Unknown directive <span class="hljs-subst">${i}</span>`</span>,!<span class="hljs-number">0</span>),!<span class="hljs-number">1</span>}}<span class="hljs-title function_">tagName</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(e===<span class="hljs-string">&quot;!&quot;</span>)<span class="hljs-keyword">return</span><span class="hljs-string">&quot;!&quot;</span>;<span class="hljs-keyword">if</span>(e[<span class="hljs-number">0</span>]!==<span class="hljs-string">&quot;!&quot;</span>)<span class="hljs-keyword">return</span> <span class="hljs-title function_">t</span>(<span class="hljs-string">`Not a valid tag: <span class="hljs-subst">${e}</span>`</span>),<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(e[<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;&lt;&quot;</span>){<span class="hljs-keyword">const</span> l=e.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>);<span class="hljs-keyword">return</span> l===<span class="hljs-string">&quot;!&quot;</span>||l===<span class="hljs-string">&quot;!!&quot;</span>?(<span class="hljs-title function_">t</span>(<span class="hljs-string">`Verbatim tags aren&#x27;t resolved, so <span class="hljs-subst">${e}</span> is invalid.`</span>),<span class="hljs-literal">null</span>):(e[e.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]!==<span class="hljs-string">&quot;&gt;&quot;</span>&amp;&amp;<span class="hljs-title function_">t</span>(<span class="hljs-string">&quot;Verbatim tags must end with a &gt;&quot;</span>),l)}<span class="hljs-keyword">const</span>[,s,i]=e.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(.*!)([^!]*)$/</span>);i||<span class="hljs-title function_">t</span>(<span class="hljs-string">`The <span class="hljs-subst">${e}</span> tag has no suffix`</span>);<span class="hljs-keyword">const</span> r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>[s];<span class="hljs-keyword">return</span> r?r+<span class="hljs-built_in">decodeURIComponent</span>(i):s===<span class="hljs-string">&quot;!&quot;</span>?<span class="hljs-attr">e</span>:(<span class="hljs-title function_">t</span>(<span class="hljs-string">`Could not resolve tag: <span class="hljs-subst">${e}</span>`</span>),<span class="hljs-literal">null</span>)}<span class="hljs-title function_">tagString</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>[t,s]<span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>))<span class="hljs-keyword">if</span>(e.<span class="hljs-title function_">startsWith</span>(s))<span class="hljs-keyword">return</span> t+<span class="hljs-title function_">yn</span>(e.<span class="hljs-title function_">substring</span>(s.<span class="hljs-property">length</span>));<span class="hljs-keyword">return</span> e[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;!&quot;</span>?<span class="hljs-attr">e</span>:<span class="hljs-string">`!&lt;<span class="hljs-subst">${e}</span>&gt;`</span>}<span class="hljs-title function_">toString</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">yaml</span>.<span class="hljs-property">explicit</span>?[<span class="hljs-string">`%YAML <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.yaml.version||<span class="hljs-string">&quot;1.2&quot;</span>}</span>`</span>]:[],s=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>);<span class="hljs-keyword">let</span> i;<span class="hljs-keyword">if</span>(e&amp;&amp;s.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-title function_">F</span>(e.<span class="hljs-property">contents</span>)){<span class="hljs-keyword">const</span> r={};<span class="hljs-title function_">me</span>(e.<span class="hljs-property">contents</span>,<span class="hljs-function">(<span class="hljs-params">l,a</span>)=&gt;</span>{<span class="hljs-title function_">F</span>(a)&amp;&amp;a.<span class="hljs-property">tag</span>&amp;&amp;(r[a.<span class="hljs-property">tag</span>]=!<span class="hljs-number">0</span>)}),i=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(r)}<span class="hljs-keyword">else</span> i=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>[r,l]<span class="hljs-keyword">of</span> s)r===<span class="hljs-string">&quot;!!&quot;</span>&amp;&amp;l===<span class="hljs-string">&quot;tag:yaml.org,2002:&quot;</span>||(!e||i.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span>a.<span class="hljs-title function_">startsWith</span>(l)))&amp;&amp;t.<span class="hljs-title function_">push</span>(<span class="hljs-string">`%TAG <span class="hljs-subst">${r}</span> <span class="hljs-subst">${l}</span>`</span>);<span class="hljs-keyword">return</span> t.<span class="hljs-title function_">join</span>(<span class="hljs-string">`
`</span>)}}Y.<span class="hljs-property">defaultYaml</span>={<span class="hljs-attr">explicit</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">version</span>:<span class="hljs-string">&quot;1.2&quot;</span>},Y.<span class="hljs-property">defaultTags</span>={<span class="hljs-string">&quot;!!&quot;</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:&quot;</span>};<span class="hljs-keyword">function</span> <span class="hljs-title function_">is</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">if</span>(<span class="hljs-regexp">/[\x00-\x19\s,[\]{}]/</span>.<span class="hljs-title function_">test</span>(n)){<span class="hljs-keyword">const</span> t=<span class="hljs-string">`Anchor must not contain whitespace or control characters: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(n)}</span>`</span>;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(t)}<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">rs</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span> e=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>;<span class="hljs-keyword">return</span> <span class="hljs-title function_">me</span>(n,{<span class="hljs-title class_">Value</span>(t,s){s.<span class="hljs-property">anchor</span>&amp;&amp;e.<span class="hljs-title function_">add</span>(s.<span class="hljs-property">anchor</span>)}}),e}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ls</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> t=<span class="hljs-number">1</span>;;++t){<span class="hljs-keyword">const</span> s=<span class="hljs-string">`<span class="hljs-subst">${n}</span><span class="hljs-subst">${t}</span>`</span>;<span class="hljs-keyword">if</span>(!e.<span class="hljs-title function_">has</span>(s))<span class="hljs-keyword">return</span> s}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">bn</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span> t=[],s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>;<span class="hljs-keyword">let</span> i=<span class="hljs-literal">null</span>;<span class="hljs-keyword">return</span>{<span class="hljs-attr">onAnchor</span>:<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>{t.<span class="hljs-title function_">push</span>(r),i||(i=<span class="hljs-title function_">rs</span>(n));<span class="hljs-keyword">const</span> l=<span class="hljs-title function_">ls</span>(e,i);<span class="hljs-keyword">return</span> i.<span class="hljs-title function_">add</span>(l),l},<span class="hljs-attr">setAnchors</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> r <span class="hljs-keyword">of</span> t){<span class="hljs-keyword">const</span> l=s.<span class="hljs-title function_">get</span>(r);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> l==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;l.<span class="hljs-property">anchor</span>&amp;&amp;(<span class="hljs-title function_">L</span>(l.<span class="hljs-property">node</span>)||$(l.<span class="hljs-property">node</span>)))l.<span class="hljs-property">node</span>.<span class="hljs-property">anchor</span>=l.<span class="hljs-property">anchor</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Failed to resolve repeated object (this should not happen)&quot;</span>);<span class="hljs-keyword">throw</span> a.<span class="hljs-property">source</span>=r,a}}},<span class="hljs-attr">sourceObjects</span>:s}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">St</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">bt</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">super</span>(gt),<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>=e,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;tag&quot;</span>,{<span class="hljs-title function_">set</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Alias nodes cannot have tags&quot;</span>)}})}<span class="hljs-title function_">resolve</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">let</span> t;<span class="hljs-keyword">return</span> <span class="hljs-title function_">me</span>(e,{<span class="hljs-title class_">Node</span>:<span class="hljs-function">(<span class="hljs-params">s,i</span>)=&gt;</span>{<span class="hljs-keyword">if</span>(i===<span class="hljs-variable language_">this</span>)<span class="hljs-keyword">return</span> me.<span class="hljs-property">BREAK</span>;i.<span class="hljs-property">anchor</span>===<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>&amp;&amp;(t=i)}}),t}<span class="hljs-title function_">toJSON</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(!t)<span class="hljs-keyword">return</span>{<span class="hljs-attr">source</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>};<span class="hljs-keyword">const</span>{<span class="hljs-attr">anchors</span>:s,<span class="hljs-attr">doc</span>:i,<span class="hljs-attr">maxAliasCount</span>:r}=t,l=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolve</span>(i);<span class="hljs-keyword">if</span>(!l){<span class="hljs-keyword">const</span> o=<span class="hljs-string">`Unresolved alias (the anchor must be set before the alias): <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.source}</span>`</span>;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceError</span>(o)}<span class="hljs-keyword">const</span> a=s.<span class="hljs-title function_">get</span>(l);<span class="hljs-keyword">if</span>(!a||a.<span class="hljs-property">res</span>===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>){<span class="hljs-keyword">const</span> o=<span class="hljs-string">&quot;This should not happen: Alias anchor was not resolved?&quot;</span>;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceError</span>(o)}<span class="hljs-keyword">if</span>(r&gt;=<span class="hljs-number">0</span>&amp;&amp;(a.<span class="hljs-property">count</span>+=<span class="hljs-number">1</span>,a.<span class="hljs-property">aliasCount</span>===<span class="hljs-number">0</span>&amp;&amp;(a.<span class="hljs-property">aliasCount</span>=<span class="hljs-title class_">Qe</span>(i,l,s)),a.<span class="hljs-property">count</span>*a.<span class="hljs-property">aliasCount</span>&gt;r)){<span class="hljs-keyword">const</span> o=<span class="hljs-string">&quot;Excessive alias count indicates a resource exhaustion attack&quot;</span>;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceError</span>(o)}<span class="hljs-keyword">return</span> a.<span class="hljs-property">res</span>}<span class="hljs-title function_">toString</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-keyword">const</span> i=<span class="hljs-string">`*<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.source}</span>`</span>;<span class="hljs-keyword">if</span>(e){<span class="hljs-keyword">if</span>(<span class="hljs-title function_">is</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>),e.<span class="hljs-property">options</span>.<span class="hljs-property">verifyAliasOrder</span>&amp;&amp;!e.<span class="hljs-property">anchors</span>.<span class="hljs-title function_">has</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>)){<span class="hljs-keyword">const</span> r=<span class="hljs-string">`Unresolved alias (the anchor must be set before the alias): <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.source}</span>`</span>;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(r)}<span class="hljs-keyword">if</span>(e.<span class="hljs-property">implicitKey</span>)<span class="hljs-keyword">return</span><span class="hljs-string">`<span class="hljs-subst">${i}</span> `</span>}<span class="hljs-keyword">return</span> i}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Qe</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Ee</span>(e)){<span class="hljs-keyword">const</span> s=e.<span class="hljs-title function_">resolve</span>(n),i=t&amp;&amp;s&amp;&amp;t.<span class="hljs-title function_">get</span>(s);<span class="hljs-keyword">return</span> i?i.<span class="hljs-property">count</span>*i.<span class="hljs-property">aliasCount</span>:<span class="hljs-number">0</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>($(e)){<span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> e.<span class="hljs-property">items</span>){<span class="hljs-keyword">const</span> r=<span class="hljs-title class_">Qe</span>(n,i,t);r&gt;s&amp;&amp;(s=r)}<span class="hljs-keyword">return</span> s}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(e)){<span class="hljs-keyword">const</span> s=<span class="hljs-title class_">Qe</span>(n,e.<span class="hljs-property">key</span>,t),i=<span class="hljs-title class_">Qe</span>(n,e.<span class="hljs-property">value</span>,t);<span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(s,i)}<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ne</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(n))<span class="hljs-keyword">return</span> n.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">s,i</span>)=&gt;</span><span class="hljs-title function_">ne</span>(s,<span class="hljs-title class_">String</span>(i),t));<span class="hljs-keyword">if</span>(n&amp;&amp;<span class="hljs-keyword">typeof</span> n.<span class="hljs-property">toJSON</span>==<span class="hljs-string">&quot;function&quot;</span>){<span class="hljs-keyword">if</span>(!t||!<span class="hljs-title function_">mn</span>(n))<span class="hljs-keyword">return</span> n.<span class="hljs-title function_">toJSON</span>(e,t);<span class="hljs-keyword">const</span> s={<span class="hljs-attr">aliasCount</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">count</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">res</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>};t.<span class="hljs-property">anchors</span>.<span class="hljs-title function_">set</span>(n,s),t.<span class="hljs-property">onCreate</span>=<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>{s.<span class="hljs-property">res</span>=r,<span class="hljs-keyword">delete</span> t.<span class="hljs-property">onCreate</span>};<span class="hljs-keyword">const</span> i=n.<span class="hljs-title function_">toJSON</span>(e,t);<span class="hljs-keyword">return</span> t.<span class="hljs-property">onCreate</span>&amp;&amp;t.<span class="hljs-title function_">onCreate</span>(i),i}<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;bigint&quot;</span>&amp;&amp;!(t!=<span class="hljs-literal">null</span>&amp;&amp;t.<span class="hljs-property">keep</span>)?<span class="hljs-title class_">Number</span>(n):n}<span class="hljs-keyword">const</span> <span class="hljs-title function_">as</span>=n=&gt;!n||<span class="hljs-keyword">typeof</span> n!=<span class="hljs-string">&quot;function&quot;</span>&amp;&amp;<span class="hljs-keyword">typeof</span> n!=<span class="hljs-string">&quot;object&quot;</span>;<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">bt</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">super</span>(re),<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>=e}<span class="hljs-title function_">toJSON</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">return</span> t!=<span class="hljs-literal">null</span>&amp;&amp;t.<span class="hljs-property">keep</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>:<span class="hljs-title function_">ne</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>,e,t)}<span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>)}}A.<span class="hljs-property">BLOCK_FOLDED</span>=<span class="hljs-string">&quot;BLOCK_FOLDED&quot;</span>,A.<span class="hljs-property">BLOCK_LITERAL</span>=<span class="hljs-string">&quot;BLOCK_LITERAL&quot;</span>,A.<span class="hljs-property">PLAIN</span>=<span class="hljs-string">&quot;PLAIN&quot;</span>,A.<span class="hljs-property">QUOTE_DOUBLE</span>=<span class="hljs-string">&quot;QUOTE_DOUBLE&quot;</span>,A.<span class="hljs-property">QUOTE_SINGLE</span>=<span class="hljs-string">&quot;QUOTE_SINGLE&quot;</span>;<span class="hljs-keyword">const</span> wn=<span class="hljs-string">&quot;tag:yaml.org,2002:&quot;</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">Sn</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">var</span> s;<span class="hljs-keyword">if</span>(e){<span class="hljs-keyword">const</span> i=t.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span>l.<span class="hljs-property">tag</span>===e),r=(s=i.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span>!l.<span class="hljs-property">format</span>))!=<span class="hljs-literal">null</span>?<span class="hljs-attr">s</span>:i[<span class="hljs-number">0</span>];<span class="hljs-keyword">if</span>(!r)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Tag <span class="hljs-subst">${e}</span> not found`</span>);<span class="hljs-keyword">return</span> r}<span class="hljs-keyword">return</span> t.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>{<span class="hljs-keyword">var</span> r;<span class="hljs-keyword">return</span>((r=i.<span class="hljs-property">identify</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:r.<span class="hljs-title function_">call</span>(i,n))&amp;&amp;!i.<span class="hljs-property">format</span>})}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Re</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">var</span> f,h;<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Je</span>(n)&amp;&amp;(n=n.<span class="hljs-property">contents</span>),<span class="hljs-title function_">F</span>(n))<span class="hljs-keyword">return</span> n;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(n)){<span class="hljs-keyword">const</span> p=(h=(f=t.<span class="hljs-property">schema</span>[ce]).<span class="hljs-property">createNode</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:h.<span class="hljs-title function_">call</span>(f,t.<span class="hljs-property">schema</span>,<span class="hljs-literal">null</span>,t);<span class="hljs-keyword">return</span> p.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(n),p}(n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">String</span>||n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Number</span>||n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Boolean</span>||<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">BigInt</span>!=<span class="hljs-string">&quot;undefined&quot;</span>&amp;&amp;n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">BigInt</span>)&amp;&amp;(n=n.<span class="hljs-title function_">valueOf</span>());<span class="hljs-keyword">const</span>{<span class="hljs-attr">aliasDuplicateObjects</span>:s,<span class="hljs-attr">onAnchor</span>:i,<span class="hljs-attr">onTagObj</span>:r,<span class="hljs-attr">schema</span>:l,<span class="hljs-attr">sourceObjects</span>:a}=t;<span class="hljs-keyword">let</span> o;<span class="hljs-keyword">if</span>(s&amp;&amp;n&amp;&amp;<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>){<span class="hljs-keyword">if</span>(o=a.<span class="hljs-title function_">get</span>(n),o)<span class="hljs-keyword">return</span> o.<span class="hljs-property">anchor</span>||(o.<span class="hljs-property">anchor</span>=<span class="hljs-title function_">i</span>(n)),<span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>(o.<span class="hljs-property">anchor</span>);o={<span class="hljs-attr">anchor</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">node</span>:<span class="hljs-literal">null</span>},a.<span class="hljs-title function_">set</span>(n,o)}e!=<span class="hljs-literal">null</span>&amp;&amp;e.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;!!&quot;</span>)&amp;&amp;(e=wn+e.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>));<span class="hljs-keyword">let</span> c=<span class="hljs-title class_">Sn</span>(n,e,l.<span class="hljs-property">tags</span>);<span class="hljs-keyword">if</span>(!c){<span class="hljs-keyword">if</span>(n&amp;&amp;<span class="hljs-keyword">typeof</span> n.<span class="hljs-property">toJSON</span>==<span class="hljs-string">&quot;function&quot;</span>&amp;&amp;(n=n.<span class="hljs-title function_">toJSON</span>()),!n||<span class="hljs-keyword">typeof</span> n!=<span class="hljs-string">&quot;object&quot;</span>){<span class="hljs-keyword">const</span> p=<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(n);<span class="hljs-keyword">return</span> o&amp;&amp;(o.<span class="hljs-property">node</span>=p),p}c=n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>?l[ce]:<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> <span class="hljs-keyword">in</span> <span class="hljs-title class_">Object</span>(n)?l[ke]:l[ce]}r&amp;&amp;(<span class="hljs-title function_">r</span>(c),<span class="hljs-keyword">delete</span> t.<span class="hljs-property">onTagObj</span>);<span class="hljs-keyword">const</span> u=c!=<span class="hljs-literal">null</span>&amp;&amp;c.<span class="hljs-property">createNode</span>?c.<span class="hljs-title function_">createNode</span>(t.<span class="hljs-property">schema</span>,n,t):<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(n);<span class="hljs-keyword">return</span> e&amp;&amp;(u.<span class="hljs-property">tag</span>=e),o&amp;&amp;(o.<span class="hljs-property">node</span>=u),u}<span class="hljs-keyword">function</span> <span class="hljs-title function_">We</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">let</span> s=t;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=e.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>;i&gt;=<span class="hljs-number">0</span>;--i){<span class="hljs-keyword">const</span> r=e[i];<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> r==<span class="hljs-string">&quot;number&quot;</span>&amp;&amp;<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(r)&amp;&amp;r&gt;=<span class="hljs-number">0</span>){<span class="hljs-keyword">const</span> l=[];l[r]=s,s=l}<span class="hljs-keyword">else</span> s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[r,s]])}<span class="hljs-keyword">return</span> <span class="hljs-title class_">Re</span>(s,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,{<span class="hljs-attr">aliasDuplicateObjects</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">keepUndefined</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">onAnchor</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;This should not happen, please report a bug.&quot;</span>)},<span class="hljs-attr">schema</span>:n,<span class="hljs-attr">sourceObjects</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>})}<span class="hljs-keyword">const</span> <span class="hljs-title function_">qe</span>=n=&gt;n==<span class="hljs-literal">null</span>||<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;!!n[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]().<span class="hljs-title function_">next</span>().<span class="hljs-property">done</span>;<span class="hljs-keyword">class</span> <span class="hljs-title class_">ze</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">bt</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e,t</span>){<span class="hljs-variable language_">super</span>(e),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-string">&quot;schema&quot;</span>,{<span class="hljs-attr">value</span>:t,<span class="hljs-attr">configurable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">enumerable</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">writable</span>:!<span class="hljs-number">0</span>})}<span class="hljs-title function_">clone</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptors</span>(<span class="hljs-variable language_">this</span>));<span class="hljs-keyword">return</span> e&amp;&amp;(t.<span class="hljs-property">schema</span>=e),t.<span class="hljs-property">items</span>=t.<span class="hljs-property">items</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span><span class="hljs-title function_">F</span>(s)||<span class="hljs-title function_">D</span>(s)?s.<span class="hljs-title function_">clone</span>(e):s),<span class="hljs-variable language_">this</span>.<span class="hljs-property">range</span>&amp;&amp;(t.<span class="hljs-property">range</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">range</span>.<span class="hljs-title function_">slice</span>()),t}<span class="hljs-title function_">addIn</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-title function_">qe</span>(e))<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">add</span>(t);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span>[s,...i]=e,r=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(s,!<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>($(r))r.<span class="hljs-title function_">addIn</span>(i,t);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>)<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(s,<span class="hljs-title class_">We</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>,i,t));<span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Expected YAML collection at <span class="hljs-subst">${s}</span>. Remaining path: <span class="hljs-subst">${i}</span>`</span>)}}<span class="hljs-title function_">deleteIn</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span>[t,...s]=e;<span class="hljs-keyword">if</span>(s.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">delete</span>(t);<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(t,!<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>($(i))<span class="hljs-keyword">return</span> i.<span class="hljs-title function_">deleteIn</span>(s);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Expected YAML collection at <span class="hljs-subst">${t}</span>. Remaining path: <span class="hljs-subst">${s}</span>`</span>)}<span class="hljs-title function_">getIn</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span>[s,...i]=e,r=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(s,!<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span> i.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>?!t&amp;&amp;<span class="hljs-title function_">L</span>(r)?r.<span class="hljs-property">value</span>:<span class="hljs-attr">r</span>:$(r)?r.<span class="hljs-title function_">getIn</span>(i,t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-title function_">hasAllNullValues</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>{<span class="hljs-keyword">if</span>(!<span class="hljs-title function_">D</span>(t))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> s=t.<span class="hljs-property">value</span>;<span class="hljs-keyword">return</span> s==<span class="hljs-literal">null</span>||e&amp;&amp;<span class="hljs-title function_">L</span>(s)&amp;&amp;s.<span class="hljs-property">value</span>==<span class="hljs-literal">null</span>&amp;&amp;!s.<span class="hljs-property">commentBefore</span>&amp;&amp;!s.<span class="hljs-property">comment</span>&amp;&amp;!s.<span class="hljs-property">tag</span>})}<span class="hljs-title function_">hasIn</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span>[t,...s]=e;<span class="hljs-keyword">if</span>(s.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">has</span>(t);<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(t,!<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span> $(i)?i.<span class="hljs-title function_">hasIn</span>(s):!<span class="hljs-number">1</span>}<span class="hljs-title function_">setIn</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span>[s,...i]=e;<span class="hljs-keyword">if</span>(i.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(s,t);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> r=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(s,!<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>($(r))r.<span class="hljs-title function_">setIn</span>(i,t);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>)<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(s,<span class="hljs-title class_">We</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>,i,t));<span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Expected YAML collection at <span class="hljs-subst">${s}</span>. Remaining path: <span class="hljs-subst">${i}</span>`</span>)}}}ze.<span class="hljs-property">maxFlowStringSingleLineLength</span>=<span class="hljs-number">60</span>;<span class="hljs-keyword">const</span> <span class="hljs-title function_">kn</span>=n=&gt;n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^(?!$)(?: $)?/gm</span>,<span class="hljs-string">&quot;#&quot;</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">le</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">return</span><span class="hljs-regexp">/^\n+$/</span>.<span class="hljs-title function_">test</span>(n)?n.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>):e?n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^(?! *$)/gm</span>,e):n}<span class="hljs-keyword">const</span> <span class="hljs-title function_">ue</span>=(<span class="hljs-params">n,e,t</span>)=&gt;n.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">`
`</span>)?<span class="hljs-title function_">le</span>(t,e):t.<span class="hljs-title function_">includes</span>(<span class="hljs-string">`
`</span>)?<span class="hljs-string">`
`</span>+<span class="hljs-title function_">le</span>(t,e):(n.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">&quot; &quot;</span>)?<span class="hljs-string">&quot;&quot;</span>:<span class="hljs-string">&quot; &quot;</span>)+t,os=<span class="hljs-string">&quot;flow&quot;</span>,kt=<span class="hljs-string">&quot;block&quot;</span>,<span class="hljs-title class_">Xe</span>=<span class="hljs-string">&quot;quoted&quot;</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ze</span>(<span class="hljs-params">n,e,t=<span class="hljs-string">&quot;flow&quot;</span>,{indentAtStart:s,lineWidth:i=<span class="hljs-number">80</span>,minContentWidth:r=<span class="hljs-number">20</span>,onFold:l,onOverflow:a}={}</span>){<span class="hljs-keyword">if</span>(!i||i&lt;<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> n;<span class="hljs-keyword">const</span> o=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>+r,<span class="hljs-number">1</span>+i-e.<span class="hljs-property">length</span>);<span class="hljs-keyword">if</span>(n.<span class="hljs-property">length</span>&lt;=o)<span class="hljs-keyword">return</span> n;<span class="hljs-keyword">const</span> c=[],u={};<span class="hljs-keyword">let</span> f=i-e.<span class="hljs-property">length</span>;<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;number&quot;</span>&amp;&amp;(s&gt;i-<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">2</span>,r)?c.<span class="hljs-title function_">push</span>(<span class="hljs-number">0</span>):f=i-s);<span class="hljs-keyword">let</span> h,p,y=!<span class="hljs-number">1</span>,d=-<span class="hljs-number">1</span>,g=-<span class="hljs-number">1</span>,w=-<span class="hljs-number">1</span>;t===kt&amp;&amp;(d=<span class="hljs-title function_">cs</span>(n,d),d!==-<span class="hljs-number">1</span>&amp;&amp;(f=d+o));<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k;k=n[d+=<span class="hljs-number">1</span>];){<span class="hljs-keyword">if</span>(t===<span class="hljs-title class_">Xe</span>&amp;&amp;k===<span class="hljs-string">&quot;\\&quot;</span>){<span class="hljs-keyword">switch</span>(g=d,n[d+<span class="hljs-number">1</span>]){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;x&quot;</span>:d+=<span class="hljs-number">3</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;u&quot;</span>:d+=<span class="hljs-number">5</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;U&quot;</span>:d+=<span class="hljs-number">9</span>;<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:d+=<span class="hljs-number">1</span>}w=d}<span class="hljs-keyword">if</span>(k===<span class="hljs-string">`
`</span>)t===kt&amp;&amp;(d=<span class="hljs-title function_">cs</span>(n,d)),f=d+o,h=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(k===<span class="hljs-string">&quot; &quot;</span>&amp;&amp;p&amp;&amp;p!==<span class="hljs-string">&quot; &quot;</span>&amp;&amp;p!==<span class="hljs-string">`
`</span>&amp;&amp;p!==<span class="hljs-string">&quot;	&quot;</span>){<span class="hljs-keyword">const</span> O=n[d+<span class="hljs-number">1</span>];O&amp;&amp;O!==<span class="hljs-string">&quot; &quot;</span>&amp;&amp;O!==<span class="hljs-string">`
`</span>&amp;&amp;O!==<span class="hljs-string">&quot;	&quot;</span>&amp;&amp;(h=d)}<span class="hljs-keyword">if</span>(d&gt;=f)<span class="hljs-keyword">if</span>(h)c.<span class="hljs-title function_">push</span>(h),f=h+o,h=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t===<span class="hljs-title class_">Xe</span>){<span class="hljs-keyword">for</span>(;p===<span class="hljs-string">&quot; &quot;</span>||p===<span class="hljs-string">&quot;	&quot;</span>;)p=k,k=n[d+=<span class="hljs-number">1</span>],y=!<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> O=d&gt;w+<span class="hljs-number">1</span>?d-<span class="hljs-number">2</span>:g-<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(u[O])<span class="hljs-keyword">return</span> n;c.<span class="hljs-title function_">push</span>(O),u[O]=!<span class="hljs-number">0</span>,f=O+o,h=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-keyword">else</span> y=!<span class="hljs-number">0</span>}p=k}<span class="hljs-keyword">if</span>(y&amp;&amp;a&amp;&amp;<span class="hljs-title function_">a</span>(),c.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> n;l&amp;&amp;<span class="hljs-title function_">l</span>();<span class="hljs-keyword">let</span> b=n.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,c[<span class="hljs-number">0</span>]);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k=<span class="hljs-number">0</span>;k&lt;c.<span class="hljs-property">length</span>;++k){<span class="hljs-keyword">const</span> O=c[k],_=c[k+<span class="hljs-number">1</span>]||n.<span class="hljs-property">length</span>;O===<span class="hljs-number">0</span>?b=<span class="hljs-string">`
<span class="hljs-subst">${e}</span><span class="hljs-subst">${n.slice(<span class="hljs-number">0</span>,_)}</span>`</span>:(t===<span class="hljs-title class_">Xe</span>&amp;&amp;u[O]&amp;&amp;(b+=<span class="hljs-string">`<span class="hljs-subst">${n[O]}</span>\\`</span>),b+=<span class="hljs-string">`
<span class="hljs-subst">${e}</span><span class="hljs-subst">${n.slice(O+<span class="hljs-number">1</span>,_)}</span>`</span>)}<span class="hljs-keyword">return</span> b}<span class="hljs-keyword">function</span> <span class="hljs-title function_">cs</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">let</span> t=n[e+<span class="hljs-number">1</span>];<span class="hljs-keyword">for</span>(;t===<span class="hljs-string">&quot; &quot;</span>||t===<span class="hljs-string">&quot;	&quot;</span>;){<span class="hljs-keyword">do</span> t=n[e+=<span class="hljs-number">1</span>];<span class="hljs-keyword">while</span>(t&amp;&amp;t!==<span class="hljs-string">`
`</span>);t=n[e+<span class="hljs-number">1</span>]}<span class="hljs-keyword">return</span> e}<span class="hljs-keyword">const</span> <span class="hljs-title function_">et</span>=n=&gt;({<span class="hljs-attr">indentAtStart</span>:n.<span class="hljs-property">indentAtStart</span>,<span class="hljs-attr">lineWidth</span>:n.<span class="hljs-property">options</span>.<span class="hljs-property">lineWidth</span>,<span class="hljs-attr">minContentWidth</span>:n.<span class="hljs-property">options</span>.<span class="hljs-property">minContentWidth</span>}),tt=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-regexp">/^(%|---|\.\.\.)/m</span>.<span class="hljs-title function_">test</span>(n);<span class="hljs-keyword">function</span> <span class="hljs-title function_">En</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">if</span>(!e||e&lt;<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> s=e-t,i=n.<span class="hljs-property">length</span>;<span class="hljs-keyword">if</span>(i&lt;=s)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>,l=<span class="hljs-number">0</span>;r&lt;i;++r)<span class="hljs-keyword">if</span>(n[r]===<span class="hljs-string">`
`</span>){<span class="hljs-keyword">if</span>(r-l&gt;s)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(l=r+<span class="hljs-number">1</span>,i-l&lt;=s)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ke</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(n);<span class="hljs-keyword">if</span>(e.<span class="hljs-property">options</span>.<span class="hljs-property">doubleQuotedAsJSON</span>)<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">const</span>{<span class="hljs-attr">implicitKey</span>:s}=e,i=e.<span class="hljs-property">options</span>.<span class="hljs-property">doubleQuotedMinMultiLineLength</span>,r=e.<span class="hljs-property">indent</span>||(<span class="hljs-title function_">tt</span>(n)?<span class="hljs-string">&quot;  &quot;</span>:<span class="hljs-string">&quot;&quot;</span>);<span class="hljs-keyword">let</span> l=<span class="hljs-string">&quot;&quot;</span>,a=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> o=<span class="hljs-number">0</span>,c=t[o];c;c=t[++o])<span class="hljs-keyword">if</span>(c===<span class="hljs-string">&quot; &quot;</span>&amp;&amp;t[o+<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;\\&quot;</span>&amp;&amp;t[o+<span class="hljs-number">2</span>]===<span class="hljs-string">&quot;n&quot;</span>&amp;&amp;(l+=t.<span class="hljs-title function_">slice</span>(a,o)+<span class="hljs-string">&quot;\\ &quot;</span>,o+=<span class="hljs-number">1</span>,a=o,c=<span class="hljs-string">&quot;\\&quot;</span>),c===<span class="hljs-string">&quot;\\&quot;</span>)<span class="hljs-keyword">switch</span>(t[o+<span class="hljs-number">1</span>]){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;u&quot;</span>:{l+=t.<span class="hljs-title function_">slice</span>(a,o);<span class="hljs-keyword">const</span> u=t.<span class="hljs-title function_">substr</span>(o+<span class="hljs-number">2</span>,<span class="hljs-number">4</span>);<span class="hljs-keyword">switch</span>(u){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;0000&quot;</span>:l+=<span class="hljs-string">&quot;\\0&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;0007&quot;</span>:l+=<span class="hljs-string">&quot;\\a&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;000b&quot;</span>:l+=<span class="hljs-string">&quot;\\v&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;001b&quot;</span>:l+=<span class="hljs-string">&quot;\\e&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;0085&quot;</span>:l+=<span class="hljs-string">&quot;\\N&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;00a0&quot;</span>:l+=<span class="hljs-string">&quot;\\_&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;2028&quot;</span>:l+=<span class="hljs-string">&quot;\\L&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;2029&quot;</span>:l+=<span class="hljs-string">&quot;\\P&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:u.<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>)===<span class="hljs-string">&quot;00&quot;</span>?l+=<span class="hljs-string">&quot;\\x&quot;</span>+u.<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>):l+=t.<span class="hljs-title function_">substr</span>(o,<span class="hljs-number">6</span>)}o+=<span class="hljs-number">5</span>,a=o+<span class="hljs-number">1</span>}<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;n&quot;</span>:<span class="hljs-keyword">if</span>(s||t[o+<span class="hljs-number">2</span>]===<span class="hljs-string">&#x27;&quot;&#x27;</span>||t.<span class="hljs-property">length</span>&lt;i)o+=<span class="hljs-number">1</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">for</span>(l+=t.<span class="hljs-title function_">slice</span>(a,o)+<span class="hljs-string">`

`</span>;t[o+<span class="hljs-number">2</span>]===<span class="hljs-string">&quot;\\&quot;</span>&amp;&amp;t[o+<span class="hljs-number">3</span>]===<span class="hljs-string">&quot;n&quot;</span>&amp;&amp;t[o+<span class="hljs-number">4</span>]!==<span class="hljs-string">&#x27;&quot;&#x27;</span>;)l+=<span class="hljs-string">`
`</span>,o+=<span class="hljs-number">2</span>;l+=r,t[o+<span class="hljs-number">2</span>]===<span class="hljs-string">&quot; &quot;</span>&amp;&amp;(l+=<span class="hljs-string">&quot;\\&quot;</span>),o+=<span class="hljs-number">1</span>,a=o+<span class="hljs-number">1</span>}<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:o+=<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span> l=a?l+t.<span class="hljs-title function_">slice</span>(a):t,s?<span class="hljs-attr">l</span>:<span class="hljs-title class_">Ze</span>(l,r,<span class="hljs-title class_">Xe</span>,<span class="hljs-title function_">et</span>(e))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Et</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">if</span>(e.<span class="hljs-property">options</span>.<span class="hljs-property">singleQuote</span>===!<span class="hljs-number">1</span>||e.<span class="hljs-property">implicitKey</span>&amp;&amp;n.<span class="hljs-title function_">includes</span>(<span class="hljs-string">`
`</span>)||<span class="hljs-regexp">/[ \t]\n|\n[ \t]/</span>.<span class="hljs-title function_">test</span>(n))<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ke</span>(n,e);<span class="hljs-keyword">const</span> t=e.<span class="hljs-property">indent</span>||(<span class="hljs-title function_">tt</span>(n)?<span class="hljs-string">&quot;  &quot;</span>:<span class="hljs-string">&quot;&quot;</span>),s=<span class="hljs-string">&quot;&#x27;&quot;</span>+n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&#x27;/g</span>,<span class="hljs-string">&quot;&#x27;&#x27;&quot;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n+/g</span>,<span class="hljs-string">`$&amp;
<span class="hljs-subst">${t}</span>`</span>)+<span class="hljs-string">&quot;&#x27;&quot;</span>;<span class="hljs-keyword">return</span> e.<span class="hljs-property">implicitKey</span>?<span class="hljs-attr">s</span>:<span class="hljs-title class_">Ze</span>(s,t,os,<span class="hljs-title function_">et</span>(e))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ne</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">singleQuote</span>:t}=e.<span class="hljs-property">options</span>;<span class="hljs-keyword">let</span> s;<span class="hljs-keyword">if</span>(t===!<span class="hljs-number">1</span>)s=<span class="hljs-title class_">Ke</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> i=n.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;&quot;&#x27;</span>),r=n.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;&#x27;&quot;</span>);i&amp;&amp;!r?s=<span class="hljs-title class_">Et</span>:r&amp;&amp;!i?s=<span class="hljs-title class_">Ke</span>:s=t?<span class="hljs-title class_">Et</span>:<span class="hljs-title class_">Ke</span>}<span class="hljs-keyword">return</span> <span class="hljs-title function_">s</span>(n,e)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">st</span>(<span class="hljs-params">{comment:n,type:e,value:t},s,i,r</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">blockQuote</span>:l,<span class="hljs-attr">commentString</span>:a,<span class="hljs-attr">lineWidth</span>:o}=s.<span class="hljs-property">options</span>;<span class="hljs-keyword">if</span>(!l||<span class="hljs-regexp">/\n[\t ]+$/</span>.<span class="hljs-title function_">test</span>(t)||<span class="hljs-regexp">/^\s*$/</span>.<span class="hljs-title function_">test</span>(t))<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ne</span>(t,s);<span class="hljs-keyword">const</span> c=s.<span class="hljs-property">indent</span>||(s.<span class="hljs-property">forceBlockIndent</span>||<span class="hljs-title function_">tt</span>(t)?<span class="hljs-string">&quot;  &quot;</span>:<span class="hljs-string">&quot;&quot;</span>),u=l===<span class="hljs-string">&quot;literal&quot;</span>?!<span class="hljs-number">0</span>:l===<span class="hljs-string">&quot;folded&quot;</span>||e===A.<span class="hljs-property">BLOCK_FOLDED</span>?!<span class="hljs-number">1</span>:e===A.<span class="hljs-property">BLOCK_LITERAL</span>?!<span class="hljs-number">0</span>:!<span class="hljs-title class_">En</span>(t,o,c.<span class="hljs-property">length</span>);<span class="hljs-keyword">if</span>(!t)<span class="hljs-keyword">return</span> u?<span class="hljs-string">`|
`</span>:<span class="hljs-string">`&gt;
`</span>;<span class="hljs-keyword">let</span> f,h;<span class="hljs-keyword">for</span>(h=t.<span class="hljs-property">length</span>;h&gt;<span class="hljs-number">0</span>;--h){<span class="hljs-keyword">const</span> S=t[h-<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(S!==<span class="hljs-string">`
`</span>&amp;&amp;S!==<span class="hljs-string">&quot;	&quot;</span>&amp;&amp;S!==<span class="hljs-string">&quot; &quot;</span>)<span class="hljs-keyword">break</span>}<span class="hljs-keyword">let</span> p=t.<span class="hljs-title function_">substring</span>(h);<span class="hljs-keyword">const</span> y=p.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>);y===-<span class="hljs-number">1</span>?f=<span class="hljs-string">&quot;-&quot;</span>:t===p||y!==p.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>?(f=<span class="hljs-string">&quot;+&quot;</span>,r&amp;&amp;<span class="hljs-title function_">r</span>()):f=<span class="hljs-string">&quot;&quot;</span>,p&amp;&amp;(t=t.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,-p.<span class="hljs-property">length</span>),p[p.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]===<span class="hljs-string">`
`</span>&amp;&amp;(p=p.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>)),p=p.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n+(?!\n|$)/g</span>,<span class="hljs-string">`$&amp;<span class="hljs-subst">${c}</span>`</span>));<span class="hljs-keyword">let</span> d=!<span class="hljs-number">1</span>,g,w=-<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(g=<span class="hljs-number">0</span>;g&lt;t.<span class="hljs-property">length</span>;++g){<span class="hljs-keyword">const</span> S=t[g];<span class="hljs-keyword">if</span>(S===<span class="hljs-string">&quot; &quot;</span>)d=!<span class="hljs-number">0</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(S===<span class="hljs-string">`
`</span>)w=g;<span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>}<span class="hljs-keyword">let</span> b=t.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,w&lt;g?w+<span class="hljs-number">1</span>:g);b&amp;&amp;(t=t.<span class="hljs-title function_">substring</span>(b.<span class="hljs-property">length</span>),b=b.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n+/g</span>,<span class="hljs-string">`$&amp;<span class="hljs-subst">${c}</span>`</span>));<span class="hljs-keyword">let</span> O=(u?<span class="hljs-string">&quot;|&quot;</span>:<span class="hljs-string">&quot;&gt;&quot;</span>)+(d?c?<span class="hljs-string">&quot;2&quot;</span>:<span class="hljs-string">&quot;1&quot;</span>:<span class="hljs-string">&quot;&quot;</span>)+f;<span class="hljs-keyword">if</span>(n&amp;&amp;(O+=<span class="hljs-string">&quot; &quot;</span>+<span class="hljs-title function_">a</span>(n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/ ?[\r\n]+/g</span>,<span class="hljs-string">&quot; &quot;</span>)),i&amp;&amp;<span class="hljs-title function_">i</span>()),u)<span class="hljs-keyword">return</span> t=t.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n+/g</span>,<span class="hljs-string">`$&amp;<span class="hljs-subst">${c}</span>`</span>),<span class="hljs-string">`<span class="hljs-subst">${O}</span>
<span class="hljs-subst">${c}</span><span class="hljs-subst">${b}</span><span class="hljs-subst">${t}</span><span class="hljs-subst">${p}</span>`</span>;t=t.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n+/g</span>,<span class="hljs-string">`
$&amp;`</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g</span>,<span class="hljs-string">&quot;$1$2&quot;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n+/g</span>,<span class="hljs-string">`$&amp;<span class="hljs-subst">${c}</span>`</span>);<span class="hljs-keyword">const</span> _=<span class="hljs-title class_">Ze</span>(<span class="hljs-string">`<span class="hljs-subst">${b}</span><span class="hljs-subst">${t}</span><span class="hljs-subst">${p}</span>`</span>,c,kt,<span class="hljs-title function_">et</span>(s));<span class="hljs-keyword">return</span><span class="hljs-string">`<span class="hljs-subst">${O}</span>
<span class="hljs-subst">${c}</span><span class="hljs-subst">${_}</span>`</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">_n</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">type</span>:i,<span class="hljs-attr">value</span>:r}=n,{<span class="hljs-attr">actualString</span>:l,<span class="hljs-attr">implicitKey</span>:a,<span class="hljs-attr">indent</span>:o,<span class="hljs-attr">indentStep</span>:c,<span class="hljs-attr">inFlow</span>:u}=e;<span class="hljs-keyword">if</span>(a&amp;&amp;<span class="hljs-regexp">/[\n[\]{},]/</span>.<span class="hljs-title function_">test</span>(r)||u&amp;&amp;<span class="hljs-regexp">/[[\]{},]/</span>.<span class="hljs-title function_">test</span>(r))<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ne</span>(r,e);<span class="hljs-keyword">if</span>(!r||<span class="hljs-regexp">/^[\n\t ,[\]{}#&amp;*!|&gt;&#x27;&quot;%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/</span>.<span class="hljs-title function_">test</span>(r))<span class="hljs-keyword">return</span> a||u||!r.<span class="hljs-title function_">includes</span>(<span class="hljs-string">`
`</span>)?<span class="hljs-title class_">Ne</span>(r,e):<span class="hljs-title function_">st</span>(n,e,t,s);<span class="hljs-keyword">if</span>(!a&amp;&amp;!u&amp;&amp;i!==A.<span class="hljs-property">PLAIN</span>&amp;&amp;r.<span class="hljs-title function_">includes</span>(<span class="hljs-string">`
`</span>))<span class="hljs-keyword">return</span> <span class="hljs-title function_">st</span>(n,e,t,s);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">tt</span>(r)){<span class="hljs-keyword">if</span>(o===<span class="hljs-string">&quot;&quot;</span>)<span class="hljs-keyword">return</span> e.<span class="hljs-property">forceBlockIndent</span>=!<span class="hljs-number">0</span>,<span class="hljs-title function_">st</span>(n,e,t,s);<span class="hljs-keyword">if</span>(a&amp;&amp;o===c)<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ne</span>(r,e)}<span class="hljs-keyword">const</span> f=r.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n+/g</span>,<span class="hljs-string">`$&amp;
<span class="hljs-subst">${o}</span>`</span>);<span class="hljs-keyword">if</span>(l){<span class="hljs-keyword">const</span> <span class="hljs-title function_">h</span>=d=&gt;{<span class="hljs-keyword">var</span> g;<span class="hljs-keyword">return</span> d.<span class="hljs-property">default</span>&amp;&amp;d.<span class="hljs-property">tag</span>!==<span class="hljs-string">&quot;tag:yaml.org,2002:str&quot;</span>&amp;&amp;((g=d.<span class="hljs-property">test</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:g.<span class="hljs-title function_">test</span>(f))},{<span class="hljs-attr">compat</span>:p,<span class="hljs-attr">tags</span>:y}=e.<span class="hljs-property">doc</span>.<span class="hljs-property">schema</span>;<span class="hljs-keyword">if</span>(y.<span class="hljs-title function_">some</span>(h)||p!=<span class="hljs-literal">null</span>&amp;&amp;p.<span class="hljs-title function_">some</span>(h))<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ne</span>(r,e)}<span class="hljs-keyword">return</span> a?<span class="hljs-attr">f</span>:<span class="hljs-title class_">Ze</span>(f,o,os,<span class="hljs-title function_">et</span>(e))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">_t</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">implicitKey</span>:i,<span class="hljs-attr">inFlow</span>:r}=e,l=<span class="hljs-keyword">typeof</span> n.<span class="hljs-property">value</span>==<span class="hljs-string">&quot;string&quot;</span>?<span class="hljs-attr">n</span>:<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},n,{<span class="hljs-attr">value</span>:<span class="hljs-title class_">String</span>(n.<span class="hljs-property">value</span>)});<span class="hljs-keyword">let</span>{<span class="hljs-attr">type</span>:a}=n;a!==A.<span class="hljs-property">QUOTE_DOUBLE</span>&amp;&amp;<span class="hljs-regexp">/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u</span>.<span class="hljs-title function_">test</span>(l.<span class="hljs-property">value</span>)&amp;&amp;(a=A.<span class="hljs-property">QUOTE_DOUBLE</span>);<span class="hljs-keyword">const</span> <span class="hljs-title function_">o</span>=u=&gt;{<span class="hljs-keyword">switch</span>(u){<span class="hljs-keyword">case</span> A.<span class="hljs-property">BLOCK_FOLDED</span>:<span class="hljs-keyword">case</span> A.<span class="hljs-property">BLOCK_LITERAL</span>:<span class="hljs-keyword">return</span> i||r?<span class="hljs-title class_">Ne</span>(l.<span class="hljs-property">value</span>,e):<span class="hljs-title function_">st</span>(l,e,t,s);<span class="hljs-keyword">case</span> A.<span class="hljs-property">QUOTE_DOUBLE</span>:<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ke</span>(l.<span class="hljs-property">value</span>,e);<span class="hljs-keyword">case</span> A.<span class="hljs-property">QUOTE_SINGLE</span>:<span class="hljs-keyword">return</span> <span class="hljs-title class_">Et</span>(l.<span class="hljs-property">value</span>,e);<span class="hljs-keyword">case</span> A.<span class="hljs-property">PLAIN</span>:<span class="hljs-keyword">return</span> <span class="hljs-title function_">_n</span>(l,e,t,s);<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>}};<span class="hljs-keyword">let</span> c=<span class="hljs-title function_">o</span>(a);<span class="hljs-keyword">if</span>(c===<span class="hljs-literal">null</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">defaultKeyType</span>:u,<span class="hljs-attr">defaultStringType</span>:f}=e.<span class="hljs-property">options</span>,h=i&amp;&amp;u||f;<span class="hljs-keyword">if</span>(c=<span class="hljs-title function_">o</span>(h),c===<span class="hljs-literal">null</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unsupported default string type <span class="hljs-subst">${h}</span>`</span>)}<span class="hljs-keyword">return</span> c}<span class="hljs-keyword">function</span> <span class="hljs-title function_">us</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({<span class="hljs-attr">blockQuote</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">commentString</span>:kn,<span class="hljs-attr">defaultKeyType</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">defaultStringType</span>:<span class="hljs-string">&quot;PLAIN&quot;</span>,<span class="hljs-attr">directives</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">doubleQuotedAsJSON</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">doubleQuotedMinMultiLineLength</span>:<span class="hljs-number">40</span>,<span class="hljs-attr">falseStr</span>:<span class="hljs-string">&quot;false&quot;</span>,<span class="hljs-attr">flowCollectionPadding</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">indentSeq</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">lineWidth</span>:<span class="hljs-number">80</span>,<span class="hljs-attr">minContentWidth</span>:<span class="hljs-number">20</span>,<span class="hljs-attr">nullStr</span>:<span class="hljs-string">&quot;null&quot;</span>,<span class="hljs-attr">simpleKeys</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">singleQuote</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">trueStr</span>:<span class="hljs-string">&quot;true&quot;</span>,<span class="hljs-attr">verifyAliasOrder</span>:!<span class="hljs-number">0</span>},n.<span class="hljs-property">schema</span>.<span class="hljs-property">toStringOptions</span>,e);<span class="hljs-keyword">let</span> s;<span class="hljs-keyword">switch</span>(t.<span class="hljs-property">collectionStyle</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block&quot;</span>:s=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow&quot;</span>:s=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:s=<span class="hljs-literal">null</span>}<span class="hljs-keyword">return</span>{<span class="hljs-attr">anchors</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>,<span class="hljs-attr">doc</span>:n,<span class="hljs-attr">flowCollectionPadding</span>:t.<span class="hljs-property">flowCollectionPadding</span>?<span class="hljs-string">&quot; &quot;</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">indent</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">indentStep</span>:<span class="hljs-keyword">typeof</span> t.<span class="hljs-property">indent</span>==<span class="hljs-string">&quot;number&quot;</span>?<span class="hljs-string">&quot; &quot;</span>.<span class="hljs-title function_">repeat</span>(t.<span class="hljs-property">indent</span>):<span class="hljs-string">&quot;  &quot;</span>,<span class="hljs-attr">inFlow</span>:s,<span class="hljs-attr">options</span>:t}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">On</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">var</span> i,r,l,a;<span class="hljs-keyword">if</span>(e.<span class="hljs-property">tag</span>){<span class="hljs-keyword">const</span> o=n.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>c.<span class="hljs-property">tag</span>===e.<span class="hljs-property">tag</span>);<span class="hljs-keyword">if</span>(o.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>(i=o.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>c.<span class="hljs-property">format</span>===e.<span class="hljs-property">format</span>))!=<span class="hljs-literal">null</span>?<span class="hljs-attr">i</span>:o[<span class="hljs-number">0</span>]}<span class="hljs-keyword">let</span> t,s;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">L</span>(e)){s=e.<span class="hljs-property">value</span>;<span class="hljs-keyword">const</span> o=n.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-keyword">var</span> u;<span class="hljs-keyword">return</span>(u=c.<span class="hljs-property">identify</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:u.<span class="hljs-title function_">call</span>(c,s)});t=(r=o.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>c.<span class="hljs-property">format</span>===e.<span class="hljs-property">format</span>))!=<span class="hljs-literal">null</span>?<span class="hljs-attr">r</span>:o.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>!c.<span class="hljs-property">format</span>)}<span class="hljs-keyword">else</span> s=e,t=n.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>o.<span class="hljs-property">nodeClass</span>&amp;&amp;s <span class="hljs-keyword">instanceof</span> o.<span class="hljs-property">nodeClass</span>);<span class="hljs-keyword">if</span>(!t){<span class="hljs-keyword">const</span> o=(a=(l=s==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s.<span class="hljs-property">constructor</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:l.<span class="hljs-property">name</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">a</span>:<span class="hljs-keyword">typeof</span> s;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Tag not resolved for <span class="hljs-subst">${o}</span> value`</span>)}<span class="hljs-keyword">return</span> t}<span class="hljs-keyword">function</span> <span class="hljs-title function_">An</span>(<span class="hljs-params">n,e,{anchors:t,doc:s}</span>){<span class="hljs-keyword">if</span>(!s.<span class="hljs-property">directives</span>)<span class="hljs-keyword">return</span><span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">const</span> i=[],r=(<span class="hljs-title function_">L</span>(n)||$(n))&amp;&amp;n.<span class="hljs-property">anchor</span>;r&amp;&amp;<span class="hljs-title function_">is</span>(r)&amp;&amp;(t.<span class="hljs-title function_">add</span>(r),i.<span class="hljs-title function_">push</span>(<span class="hljs-string">`&amp;<span class="hljs-subst">${r}</span>`</span>));<span class="hljs-keyword">const</span> l=n.<span class="hljs-property">tag</span>?n.<span class="hljs-property">tag</span>:e.<span class="hljs-property">default</span>?<span class="hljs-attr">null</span>:e.<span class="hljs-property">tag</span>;<span class="hljs-keyword">return</span> l&amp;&amp;i.<span class="hljs-title function_">push</span>(s.<span class="hljs-property">directives</span>.<span class="hljs-title function_">tagString</span>(l)),i.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot; &quot;</span>)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ge</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">var</span> o,c;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(n))<span class="hljs-keyword">return</span> n.<span class="hljs-title function_">toString</span>(e,t,s);<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Ee</span>(n)){<span class="hljs-keyword">if</span>(e.<span class="hljs-property">doc</span>.<span class="hljs-property">directives</span>)<span class="hljs-keyword">return</span> n.<span class="hljs-title function_">toString</span>(e);<span class="hljs-keyword">if</span>((o=e.<span class="hljs-property">resolvedAliases</span>)!=<span class="hljs-literal">null</span>&amp;&amp;o.<span class="hljs-title function_">has</span>(n))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;Cannot stringify circular structure without alias nodes&quot;</span>);e.<span class="hljs-property">resolvedAliases</span>?e.<span class="hljs-property">resolvedAliases</span>.<span class="hljs-title function_">add</span>(n):e.<span class="hljs-property">resolvedAliases</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([n]),n=n.<span class="hljs-title function_">resolve</span>(e.<span class="hljs-property">doc</span>)}<span class="hljs-keyword">let</span> i;<span class="hljs-keyword">const</span> r=<span class="hljs-title function_">F</span>(n)?<span class="hljs-attr">n</span>:e.<span class="hljs-property">doc</span>.<span class="hljs-title function_">createNode</span>(n,{<span class="hljs-attr">onTagObj</span>:<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>i=u});i||(i=<span class="hljs-title class_">On</span>(e.<span class="hljs-property">doc</span>.<span class="hljs-property">schema</span>.<span class="hljs-property">tags</span>,r));<span class="hljs-keyword">const</span> l=<span class="hljs-title class_">An</span>(r,i,e);l.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>&amp;&amp;(e.<span class="hljs-property">indentAtStart</span>=((c=e.<span class="hljs-property">indentAtStart</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">c</span>:<span class="hljs-number">0</span>)+l.<span class="hljs-property">length</span>+<span class="hljs-number">1</span>);<span class="hljs-keyword">const</span> a=<span class="hljs-keyword">typeof</span> i.<span class="hljs-property">stringify</span>==<span class="hljs-string">&quot;function&quot;</span>?i.<span class="hljs-title function_">stringify</span>(r,e,t,s):<span class="hljs-title function_">L</span>(r)?<span class="hljs-title function_">_t</span>(r,e,t,s):r.<span class="hljs-title function_">toString</span>(e,t,s);<span class="hljs-keyword">return</span> l?<span class="hljs-title function_">L</span>(r)||a[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;{&quot;</span>||a[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;[&quot;</span>?<span class="hljs-string">`<span class="hljs-subst">${l}</span> <span class="hljs-subst">${a}</span>`</span>:<span class="hljs-string">`<span class="hljs-subst">${l}</span>
<span class="hljs-subst">${e.indent}</span><span class="hljs-subst">${a}</span>`</span>:a}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Nn</span>(<span class="hljs-params">{key:n,value:e},t,s,i</span>){<span class="hljs-keyword">var</span> C,K;<span class="hljs-keyword">const</span>{<span class="hljs-attr">allNullValues</span>:r,<span class="hljs-attr">doc</span>:l,<span class="hljs-attr">indent</span>:a,<span class="hljs-attr">indentStep</span>:o,<span class="hljs-attr">options</span>:{<span class="hljs-attr">commentString</span>:c,<span class="hljs-attr">indentSeq</span>:u,<span class="hljs-attr">simpleKeys</span>:f}}=t;<span class="hljs-keyword">let</span> h=<span class="hljs-title function_">F</span>(n)&amp;&amp;n.<span class="hljs-property">comment</span>||<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(f){<span class="hljs-keyword">if</span>(h)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;With simple keys, key nodes cannot have comments&quot;</span>);<span class="hljs-keyword">if</span>($(n)){<span class="hljs-keyword">const</span> G=<span class="hljs-string">&quot;With simple keys, collection cannot be used as a key value&quot;</span>;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(G)}}<span class="hljs-keyword">let</span> p=!f&amp;&amp;(!n||h&amp;&amp;e==<span class="hljs-literal">null</span>&amp;&amp;!t.<span class="hljs-property">inFlow</span>||$(n)||(<span class="hljs-title function_">L</span>(n)?n.<span class="hljs-property">type</span>===A.<span class="hljs-property">BLOCK_FOLDED</span>||n.<span class="hljs-property">type</span>===A.<span class="hljs-property">BLOCK_LITERAL</span>:<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;object&quot;</span>));t=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},t,{<span class="hljs-attr">allNullValues</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">implicitKey</span>:!p&amp;&amp;(f||!r),<span class="hljs-attr">indent</span>:a+o});<span class="hljs-keyword">let</span> y=!<span class="hljs-number">1</span>,d=!<span class="hljs-number">1</span>,g=<span class="hljs-title function_">ge</span>(n,t,<span class="hljs-function">()=&gt;</span>y=!<span class="hljs-number">0</span>,<span class="hljs-function">()=&gt;</span>d=!<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>(!p&amp;&amp;!t.<span class="hljs-property">inFlow</span>&amp;&amp;g.<span class="hljs-property">length</span>&gt;<span class="hljs-number">1024</span>){<span class="hljs-keyword">if</span>(f)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;With simple keys, single line scalar must not span more than 1024 characters&quot;</span>);p=!<span class="hljs-number">0</span>}<span class="hljs-keyword">if</span>(t.<span class="hljs-property">inFlow</span>){<span class="hljs-keyword">if</span>(r||e==<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span> y&amp;&amp;s&amp;&amp;<span class="hljs-title function_">s</span>(),g===<span class="hljs-string">&quot;&quot;</span>?<span class="hljs-string">&quot;?&quot;</span>:p?<span class="hljs-string">`? <span class="hljs-subst">${g}</span>`</span>:g}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r&amp;&amp;!f||e==<span class="hljs-literal">null</span>&amp;&amp;p)<span class="hljs-keyword">return</span> g=<span class="hljs-string">`? <span class="hljs-subst">${g}</span>`</span>,h&amp;&amp;!y?g+=<span class="hljs-title function_">ue</span>(g,t.<span class="hljs-property">indent</span>,<span class="hljs-title function_">c</span>(h)):d&amp;&amp;i&amp;&amp;<span class="hljs-title function_">i</span>(),g;y&amp;&amp;(h=<span class="hljs-literal">null</span>),p?(h&amp;&amp;(g+=<span class="hljs-title function_">ue</span>(g,t.<span class="hljs-property">indent</span>,<span class="hljs-title function_">c</span>(h))),g=<span class="hljs-string">`? <span class="hljs-subst">${g}</span>
<span class="hljs-subst">${a}</span>:`</span>):(g=<span class="hljs-string">`<span class="hljs-subst">${g}</span>:`</span>,h&amp;&amp;(g+=<span class="hljs-title function_">ue</span>(g,t.<span class="hljs-property">indent</span>,<span class="hljs-title function_">c</span>(h))));<span class="hljs-keyword">let</span> w,b,k;<span class="hljs-title function_">F</span>(e)?(w=!!e.<span class="hljs-property">spaceBefore</span>,b=e.<span class="hljs-property">commentBefore</span>,k=e.<span class="hljs-property">comment</span>):(w=!<span class="hljs-number">1</span>,b=<span class="hljs-literal">null</span>,k=<span class="hljs-literal">null</span>,e&amp;&amp;<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;(e=l.<span class="hljs-title function_">createNode</span>(e))),t.<span class="hljs-property">implicitKey</span>=!<span class="hljs-number">1</span>,!p&amp;&amp;!h&amp;&amp;<span class="hljs-title function_">L</span>(e)&amp;&amp;(t.<span class="hljs-property">indentAtStart</span>=g.<span class="hljs-property">length</span>+<span class="hljs-number">1</span>),d=!<span class="hljs-number">1</span>,!u&amp;&amp;o.<span class="hljs-property">length</span>&gt;=<span class="hljs-number">2</span>&amp;&amp;!t.<span class="hljs-property">inFlow</span>&amp;&amp;!p&amp;&amp;<span class="hljs-title class_">Fe</span>(e)&amp;&amp;!e.<span class="hljs-property">flow</span>&amp;&amp;!e.<span class="hljs-property">tag</span>&amp;&amp;!e.<span class="hljs-property">anchor</span>&amp;&amp;(t.<span class="hljs-property">indent</span>=t.<span class="hljs-property">indent</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">2</span>));<span class="hljs-keyword">let</span> O=!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> _=<span class="hljs-title function_">ge</span>(e,t,<span class="hljs-function">()=&gt;</span>O=!<span class="hljs-number">0</span>,<span class="hljs-function">()=&gt;</span>d=!<span class="hljs-number">0</span>);<span class="hljs-keyword">let</span> S=<span class="hljs-string">&quot; &quot;</span>;<span class="hljs-keyword">if</span>(h||w||b){<span class="hljs-keyword">if</span>(S=w?<span class="hljs-string">`
`</span>:<span class="hljs-string">&quot;&quot;</span>,b){<span class="hljs-keyword">const</span> G=<span class="hljs-title function_">c</span>(b);S+=<span class="hljs-string">`
<span class="hljs-subst">${le(G,t.indent)}</span>`</span>}_===<span class="hljs-string">&quot;&quot;</span>&amp;&amp;!t.<span class="hljs-property">inFlow</span>?S===<span class="hljs-string">`
`</span>&amp;&amp;(S=<span class="hljs-string">`

`</span>):S+=<span class="hljs-string">`
<span class="hljs-subst">${t.indent}</span>`</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!p&amp;&amp;$(e)){<span class="hljs-keyword">const</span> G=_[<span class="hljs-number">0</span>],we=_.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>),J=we!==-<span class="hljs-number">1</span>,<span class="hljs-title class_">Fi</span>=(K=(C=t.<span class="hljs-property">inFlow</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">C</span>:e.<span class="hljs-property">flow</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">K</span>:e.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(J||!<span class="hljs-title class_">Fi</span>){<span class="hljs-keyword">let</span> tn=!<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(J&amp;&amp;(G===<span class="hljs-string">&quot;&amp;&quot;</span>||G===<span class="hljs-string">&quot;!&quot;</span>)){<span class="hljs-keyword">let</span> <span class="hljs-title class_">Se</span>=_.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot; &quot;</span>);G===<span class="hljs-string">&quot;&amp;&quot;</span>&amp;&amp;<span class="hljs-title class_">Se</span>!==-<span class="hljs-number">1</span>&amp;&amp;<span class="hljs-title class_">Se</span>&lt;we&amp;&amp;_[<span class="hljs-title class_">Se</span>+<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;!&quot;</span>&amp;&amp;(<span class="hljs-title class_">Se</span>=_.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot; &quot;</span>,<span class="hljs-title class_">Se</span>+<span class="hljs-number">1</span>)),(<span class="hljs-title class_">Se</span>===-<span class="hljs-number">1</span>||we&lt;<span class="hljs-title class_">Se</span>)&amp;&amp;(tn=!<span class="hljs-number">0</span>)}tn||(S=<span class="hljs-string">`
<span class="hljs-subst">${t.indent}</span>`</span>)}}<span class="hljs-title function_">else</span>(_===<span class="hljs-string">&quot;&quot;</span>||_[<span class="hljs-number">0</span>]===<span class="hljs-string">`
`</span>)&amp;&amp;(S=<span class="hljs-string">&quot;&quot;</span>);<span class="hljs-keyword">return</span> g+=S+_,t.<span class="hljs-property">inFlow</span>?O&amp;&amp;s&amp;&amp;<span class="hljs-title function_">s</span>():k&amp;&amp;!O?g+=<span class="hljs-title function_">ue</span>(g,t.<span class="hljs-property">indent</span>,<span class="hljs-title function_">c</span>(k)):d&amp;&amp;i&amp;&amp;<span class="hljs-title function_">i</span>(),g}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Yi</span>(<span class="hljs-params">n,...e</span>){n===<span class="hljs-string">&quot;debug&quot;</span>&amp;&amp;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(...e)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">fs</span>(<span class="hljs-params">n,e</span>){(n===<span class="hljs-string">&quot;debug&quot;</span>||n===<span class="hljs-string">&quot;warn&quot;</span>)&amp;&amp;(<span class="hljs-keyword">typeof</span> process!=<span class="hljs-string">&quot;undefined&quot;</span>&amp;&amp;process.<span class="hljs-property">emitWarning</span>?process.<span class="hljs-title function_">emitWarning</span>(e):<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(e))}<span class="hljs-keyword">const</span> hs=<span class="hljs-string">&quot;&lt;&lt;&quot;</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">ds</span>(<span class="hljs-params">n,e,{key:t,value:s}</span>){<span class="hljs-keyword">if</span>(n!=<span class="hljs-literal">null</span>&amp;&amp;n.<span class="hljs-property">doc</span>.<span class="hljs-property">schema</span>.<span class="hljs-property">merge</span>&amp;&amp;<span class="hljs-title class_">Tn</span>(t))<span class="hljs-keyword">if</span>(s=<span class="hljs-title class_">Ee</span>(s)?s.<span class="hljs-title function_">resolve</span>(n.<span class="hljs-property">doc</span>):s,<span class="hljs-title class_">Fe</span>(s))<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> s.<span class="hljs-property">items</span>)<span class="hljs-title class_">Ot</span>(n,e,i);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(s))<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> s)<span class="hljs-title class_">Ot</span>(n,e,i);<span class="hljs-keyword">else</span> <span class="hljs-title class_">Ot</span>(n,e,s);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> i=<span class="hljs-title function_">ne</span>(t,<span class="hljs-string">&quot;&quot;</span>,n);<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>)e.<span class="hljs-title function_">set</span>(i,<span class="hljs-title function_">ne</span>(s,i,n));<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Set</span>)e.<span class="hljs-title function_">add</span>(i);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> r=<span class="hljs-title class_">Ln</span>(t,i,n),l=<span class="hljs-title function_">ne</span>(s,r,n);r <span class="hljs-keyword">in</span> e?<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(e,r,{<span class="hljs-attr">value</span>:l,<span class="hljs-attr">writable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">enumerable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">configurable</span>:!<span class="hljs-number">0</span>}):e[r]=l}}<span class="hljs-keyword">return</span> e}<span class="hljs-keyword">const</span> <span class="hljs-title function_">Tn</span>=n=&gt;n===hs||<span class="hljs-title function_">L</span>(n)&amp;&amp;n.<span class="hljs-property">value</span>===hs&amp;&amp;(!n.<span class="hljs-property">type</span>||n.<span class="hljs-property">type</span>===A.<span class="hljs-property">PLAIN</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ot</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span> s=n&amp;&amp;<span class="hljs-title class_">Ee</span>(t)?t.<span class="hljs-title function_">resolve</span>(n.<span class="hljs-property">doc</span>):t;<span class="hljs-keyword">if</span>(!<span class="hljs-title function_">_e</span>(s))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Merge sources must be maps or map aliases&quot;</span>);<span class="hljs-keyword">const</span> i=s.<span class="hljs-title function_">toJSON</span>(<span class="hljs-literal">null</span>,n,<span class="hljs-title class_">Map</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>[r,l]<span class="hljs-keyword">of</span> i)e <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>?e.<span class="hljs-title function_">has</span>(r)||e.<span class="hljs-title function_">set</span>(r,l):e <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Set</span>?e.<span class="hljs-title function_">add</span>(r):<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(e,r)||<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(e,r,{<span class="hljs-attr">value</span>:l,<span class="hljs-attr">writable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">enumerable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">configurable</span>:!<span class="hljs-number">0</span>});<span class="hljs-keyword">return</span> e}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ln</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">if</span>(e===<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span><span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> e!=<span class="hljs-string">&quot;object&quot;</span>)<span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(e);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">F</span>(n)&amp;&amp;t&amp;&amp;t.<span class="hljs-property">doc</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-title function_">us</span>(t.<span class="hljs-property">doc</span>,{});s.<span class="hljs-property">anchors</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> r <span class="hljs-keyword">of</span> t.<span class="hljs-property">anchors</span>.<span class="hljs-title function_">keys</span>())s.<span class="hljs-property">anchors</span>.<span class="hljs-title function_">add</span>(r.<span class="hljs-property">anchor</span>);s.<span class="hljs-property">inFlow</span>=!<span class="hljs-number">0</span>,s.<span class="hljs-property">inStringifyKey</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> i=n.<span class="hljs-title function_">toString</span>(s);<span class="hljs-keyword">if</span>(!t.<span class="hljs-property">mapKeyWarned</span>){<span class="hljs-keyword">let</span> r=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(i);r.<span class="hljs-property">length</span>&gt;<span class="hljs-number">40</span>&amp;&amp;(r=r.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,<span class="hljs-number">36</span>)+<span class="hljs-string">&#x27;...&quot;&#x27;</span>),<span class="hljs-title function_">fs</span>(t.<span class="hljs-property">doc</span>.<span class="hljs-property">options</span>.<span class="hljs-property">logLevel</span>,<span class="hljs-string">`Keys with collection values will be stringified due to JS Object restrictions: <span class="hljs-subst">${r}</span>. Set mapAsMap: true to use object keys.`</span>),t.<span class="hljs-property">mapKeyWarned</span>=!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span> i}<span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(e)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">At</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-title class_">Re</span>(n,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,t),i=<span class="hljs-title class_">Re</span>(e,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,t);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(s,i)}<span class="hljs-keyword">class</span> <span class="hljs-title class_">V</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e,t=<span class="hljs-literal">null</span></span>){<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>,W,{<span class="hljs-attr">value</span>:<span class="hljs-title class_">Zt</span>}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>=e,<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>=t}<span class="hljs-title function_">clone</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">let</span>{<span class="hljs-attr">key</span>:t,<span class="hljs-attr">value</span>:s}=<span class="hljs-variable language_">this</span>;<span class="hljs-keyword">return</span> <span class="hljs-title function_">F</span>(t)&amp;&amp;(t=t.<span class="hljs-title function_">clone</span>(e)),<span class="hljs-title function_">F</span>(s)&amp;&amp;(s=s.<span class="hljs-title function_">clone</span>(e)),<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(t,s)}<span class="hljs-title function_">toJSON</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span> s=t!=<span class="hljs-literal">null</span>&amp;&amp;t.<span class="hljs-property">mapAsMap</span>?<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>:{};<span class="hljs-keyword">return</span> <span class="hljs-title function_">ds</span>(t,s,<span class="hljs-variable language_">this</span>)}<span class="hljs-title function_">toString</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-keyword">return</span> e!=<span class="hljs-literal">null</span>&amp;&amp;e.<span class="hljs-property">doc</span>?<span class="hljs-title class_">Nn</span>(<span class="hljs-variable language_">this</span>,e,t,s):<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>)}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ps</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">var</span> r;<span class="hljs-keyword">return</span>(((r=e.<span class="hljs-property">inFlow</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">r</span>:n.<span class="hljs-property">flow</span>)?<span class="hljs-title class_">Mn</span>:<span class="hljs-title class_">In</span>)(n,e,t)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">In</span>(<span class="hljs-params">{comment:n,items:e},t,{blockItemPrefix:s,flowChars:i,itemIndent:r,onChompKeep:l,onComment:a}</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">indent</span>:o,<span class="hljs-attr">options</span>:{<span class="hljs-attr">commentString</span>:c}}=t,u=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},t,{<span class="hljs-attr">indent</span>:r,<span class="hljs-attr">type</span>:<span class="hljs-literal">null</span>});<span class="hljs-keyword">let</span> f=!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> h=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> y=<span class="hljs-number">0</span>;y&lt;e.<span class="hljs-property">length</span>;++y){<span class="hljs-keyword">const</span> d=e[y];<span class="hljs-keyword">let</span> g=<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">F</span>(d))!f&amp;&amp;d.<span class="hljs-property">spaceBefore</span>&amp;&amp;h.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">nt</span>(t,h,d.<span class="hljs-property">commentBefore</span>,f),d.<span class="hljs-property">comment</span>&amp;&amp;(g=d.<span class="hljs-property">comment</span>);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(d)){<span class="hljs-keyword">const</span> b=<span class="hljs-title function_">F</span>(d.<span class="hljs-property">key</span>)?d.<span class="hljs-property">key</span>:<span class="hljs-literal">null</span>;b&amp;&amp;(!f&amp;&amp;b.<span class="hljs-property">spaceBefore</span>&amp;&amp;h.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">nt</span>(t,h,b.<span class="hljs-property">commentBefore</span>,f))}f=!<span class="hljs-number">1</span>;<span class="hljs-keyword">let</span> w=<span class="hljs-title function_">ge</span>(d,u,<span class="hljs-function">()=&gt;</span>g=<span class="hljs-literal">null</span>,<span class="hljs-function">()=&gt;</span>f=!<span class="hljs-number">0</span>);g&amp;&amp;(w+=<span class="hljs-title function_">ue</span>(w,r,<span class="hljs-title function_">c</span>(g))),f&amp;&amp;g&amp;&amp;(f=!<span class="hljs-number">1</span>),h.<span class="hljs-title function_">push</span>(s+w)}<span class="hljs-keyword">let</span> p;<span class="hljs-keyword">if</span>(h.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)p=i.<span class="hljs-property">start</span>+i.<span class="hljs-property">end</span>;<span class="hljs-keyword">else</span>{p=h[<span class="hljs-number">0</span>];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> y=<span class="hljs-number">1</span>;y&lt;h.<span class="hljs-property">length</span>;++y){<span class="hljs-keyword">const</span> d=h[y];p+=d?<span class="hljs-string">`
<span class="hljs-subst">${o}</span><span class="hljs-subst">${d}</span>`</span>:<span class="hljs-string">`
`</span>}}<span class="hljs-keyword">return</span> n?(p+=<span class="hljs-string">`
`</span>+<span class="hljs-title function_">le</span>(<span class="hljs-title function_">c</span>(n),o),a&amp;&amp;<span class="hljs-title function_">a</span>()):f&amp;&amp;l&amp;&amp;<span class="hljs-title function_">l</span>(),p}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Mn</span>(<span class="hljs-params">{comment:n,items:e},t,{flowChars:s,itemIndent:i,onComment:r}</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">indent</span>:l,<span class="hljs-attr">indentStep</span>:a,<span class="hljs-attr">flowCollectionPadding</span>:o,<span class="hljs-attr">options</span>:{<span class="hljs-attr">commentString</span>:c}}=t;i+=a;<span class="hljs-keyword">const</span> u=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},t,{<span class="hljs-attr">indent</span>:i,<span class="hljs-attr">inFlow</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">type</span>:<span class="hljs-literal">null</span>});<span class="hljs-keyword">let</span> f=!<span class="hljs-number">1</span>,h=<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> p=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> w=<span class="hljs-number">0</span>;w&lt;e.<span class="hljs-property">length</span>;++w){<span class="hljs-keyword">const</span> b=e[w];<span class="hljs-keyword">let</span> k=<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">F</span>(b))b.<span class="hljs-property">spaceBefore</span>&amp;&amp;p.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">nt</span>(t,p,b.<span class="hljs-property">commentBefore</span>,!<span class="hljs-number">1</span>),b.<span class="hljs-property">comment</span>&amp;&amp;(k=b.<span class="hljs-property">comment</span>);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(b)){<span class="hljs-keyword">const</span> _=<span class="hljs-title function_">F</span>(b.<span class="hljs-property">key</span>)?b.<span class="hljs-property">key</span>:<span class="hljs-literal">null</span>;_&amp;&amp;(_.<span class="hljs-property">spaceBefore</span>&amp;&amp;p.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">nt</span>(t,p,_.<span class="hljs-property">commentBefore</span>,!<span class="hljs-number">1</span>),_.<span class="hljs-property">comment</span>&amp;&amp;(f=!<span class="hljs-number">0</span>));<span class="hljs-keyword">const</span> S=<span class="hljs-title function_">F</span>(b.<span class="hljs-property">value</span>)?b.<span class="hljs-property">value</span>:<span class="hljs-literal">null</span>;S?(S.<span class="hljs-property">comment</span>&amp;&amp;(k=S.<span class="hljs-property">comment</span>),S.<span class="hljs-property">commentBefore</span>&amp;&amp;(f=!<span class="hljs-number">0</span>)):b.<span class="hljs-property">value</span>==<span class="hljs-literal">null</span>&amp;&amp;_&amp;&amp;_.<span class="hljs-property">comment</span>&amp;&amp;(k=_.<span class="hljs-property">comment</span>)}k&amp;&amp;(f=!<span class="hljs-number">0</span>);<span class="hljs-keyword">let</span> O=<span class="hljs-title function_">ge</span>(b,u,<span class="hljs-function">()=&gt;</span>k=<span class="hljs-literal">null</span>);w&lt;e.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>&amp;&amp;(O+=<span class="hljs-string">&quot;,&quot;</span>),k&amp;&amp;(O+=<span class="hljs-title function_">ue</span>(O,i,<span class="hljs-title function_">c</span>(k))),!f&amp;&amp;(p.<span class="hljs-property">length</span>&gt;h||O.<span class="hljs-title function_">includes</span>(<span class="hljs-string">`
`</span>))&amp;&amp;(f=!<span class="hljs-number">0</span>),p.<span class="hljs-title function_">push</span>(O),h=p.<span class="hljs-property">length</span>}<span class="hljs-keyword">let</span> y;<span class="hljs-keyword">const</span>{<span class="hljs-attr">start</span>:d,<span class="hljs-attr">end</span>:g}=s;<span class="hljs-keyword">if</span>(p.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)y=d+g;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(f||(f=p.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">b,k</span>)=&gt;</span>b+k.<span class="hljs-property">length</span>+<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)&gt;ze.<span class="hljs-property">maxFlowStringSingleLineLength</span>),f){y=d;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> w <span class="hljs-keyword">of</span> p)y+=w?<span class="hljs-string">`
<span class="hljs-subst">${a}</span><span class="hljs-subst">${l}</span><span class="hljs-subst">${w}</span>`</span>:<span class="hljs-string">`
`</span>;y+=<span class="hljs-string">`
<span class="hljs-subst">${l}</span><span class="hljs-subst">${g}</span>`</span>}<span class="hljs-keyword">else</span> y=<span class="hljs-string">`<span class="hljs-subst">${d}</span><span class="hljs-subst">${o}</span><span class="hljs-subst">${p.join(<span class="hljs-string">&quot; &quot;</span>)}</span><span class="hljs-subst">${o}</span><span class="hljs-subst">${g}</span>`</span>;<span class="hljs-keyword">return</span> n&amp;&amp;(y+=<span class="hljs-title function_">ue</span>(y,<span class="hljs-title function_">c</span>(n),l),r&amp;&amp;<span class="hljs-title function_">r</span>()),y}<span class="hljs-keyword">function</span> <span class="hljs-title function_">nt</span>(<span class="hljs-params">{indent:n,options:{commentString:e}},t,s,i</span>){<span class="hljs-keyword">if</span>(s&amp;&amp;i&amp;&amp;(s=s.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\n+/</span>,<span class="hljs-string">&quot;&quot;</span>)),s){<span class="hljs-keyword">const</span> r=<span class="hljs-title function_">le</span>(<span class="hljs-title function_">e</span>(s),n);t.<span class="hljs-title function_">push</span>(r.<span class="hljs-title function_">trimStart</span>())}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ye</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">L</span>(e)?e.<span class="hljs-property">value</span>:e;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> n)<span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(s)&amp;&amp;(s.<span class="hljs-property">key</span>===e||s.<span class="hljs-property">key</span>===t||<span class="hljs-title function_">L</span>(s.<span class="hljs-property">key</span>)&amp;&amp;s.<span class="hljs-property">key</span>.<span class="hljs-property">value</span>===t))<span class="hljs-keyword">return</span> s}<span class="hljs-keyword">class</span> <span class="hljs-title class_">X</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ze</span>{<span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">tagName</span>(){<span class="hljs-keyword">return</span><span class="hljs-string">&quot;tag:yaml.org,2002:map&quot;</span>}<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">super</span>(ce,e),<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[]}<span class="hljs-title function_">add</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> l;<span class="hljs-keyword">let</span> s;<span class="hljs-title function_">D</span>(e)?s=<span class="hljs-attr">e</span>:!e||<span class="hljs-keyword">typeof</span> e!=<span class="hljs-string">&quot;object&quot;</span>||!(<span class="hljs-string">&quot;key&quot;</span><span class="hljs-keyword">in</span> e)?s=<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(e,e==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:e.<span class="hljs-property">value</span>):s=<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(e.<span class="hljs-property">key</span>,e.<span class="hljs-property">value</span>);<span class="hljs-keyword">const</span> i=<span class="hljs-title function_">ye</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>,s.<span class="hljs-property">key</span>),r=(l=<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:l.<span class="hljs-property">sortMapEntries</span>;<span class="hljs-keyword">if</span>(i){<span class="hljs-keyword">if</span>(!t)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Key <span class="hljs-subst">${s.key}</span> already set`</span>);<span class="hljs-title function_">L</span>(i.<span class="hljs-property">value</span>)&amp;&amp;<span class="hljs-title function_">as</span>(s.<span class="hljs-property">value</span>)?i.<span class="hljs-property">value</span>.<span class="hljs-property">value</span>=s.<span class="hljs-property">value</span>:i.<span class="hljs-property">value</span>=s.<span class="hljs-property">value</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r){<span class="hljs-keyword">const</span> a=<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span><span class="hljs-title function_">r</span>(s,o)&lt;<span class="hljs-number">0</span>);a===-<span class="hljs-number">1</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(s):<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(a,<span class="hljs-number">0</span>,s)}<span class="hljs-keyword">else</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(s)}<span class="hljs-title function_">delete</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">ye</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>,e);<span class="hljs-keyword">return</span> t?<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">indexOf</span>(t),<span class="hljs-number">1</span>).<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>:!<span class="hljs-number">1</span>}<span class="hljs-title function_">get</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r;<span class="hljs-keyword">const</span> s=<span class="hljs-title function_">ye</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>,e),i=s==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s.<span class="hljs-property">value</span>;<span class="hljs-keyword">return</span>(r=!t&amp;&amp;<span class="hljs-title function_">L</span>(i)?i.<span class="hljs-property">value</span>:i)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">r</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-title function_">has</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span>!!<span class="hljs-title function_">ye</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>,e)}<span class="hljs-title function_">set</span>(<span class="hljs-params">e,t</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(e,t),!<span class="hljs-number">0</span>)}<span class="hljs-title function_">toJSON</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-keyword">const</span> i=s?<span class="hljs-keyword">new</span> <span class="hljs-attr">s</span>:t!=<span class="hljs-literal">null</span>&amp;&amp;t.<span class="hljs-property">mapAsMap</span>?<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>:{};t!=<span class="hljs-literal">null</span>&amp;&amp;t.<span class="hljs-property">onCreate</span>&amp;&amp;t.<span class="hljs-title function_">onCreate</span>(i);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> r <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>)<span class="hljs-title function_">ds</span>(t,i,r);<span class="hljs-keyword">return</span> i}<span class="hljs-title function_">toString</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>)<span class="hljs-keyword">if</span>(!<span class="hljs-title function_">D</span>(i))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Map items must all be pairs; found <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(i)}</span> instead`</span>);<span class="hljs-keyword">return</span>!e.<span class="hljs-property">allNullValues</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hasAllNullValues</span>(!<span class="hljs-number">1</span>)&amp;&amp;(e=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},e,{<span class="hljs-attr">allNullValues</span>:!<span class="hljs-number">0</span>})),<span class="hljs-title function_">ps</span>(<span class="hljs-variable language_">this</span>,e,{<span class="hljs-attr">blockItemPrefix</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">flowChars</span>:{<span class="hljs-attr">start</span>:<span class="hljs-string">&quot;{&quot;</span>,<span class="hljs-attr">end</span>:<span class="hljs-string">&quot;}&quot;</span>},<span class="hljs-attr">itemIndent</span>:e.<span class="hljs-property">indent</span>||<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">onChompKeep</span>:s,<span class="hljs-attr">onComment</span>:t})}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">vn</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">keepUndefined</span>:s,<span class="hljs-attr">replacer</span>:i}=t,r=<span class="hljs-keyword">new</span> <span class="hljs-title function_">X</span>(n),l=<span class="hljs-function">(<span class="hljs-params">a,o</span>)=&gt;</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> i==<span class="hljs-string">&quot;function&quot;</span>)o=i.<span class="hljs-title function_">call</span>(e,a,o);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(i)&amp;&amp;!i.<span class="hljs-title function_">includes</span>(a))<span class="hljs-keyword">return</span>;(o!==<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>||s)&amp;&amp;r.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">At</span>(a,o,t))};<span class="hljs-keyword">if</span>(e <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>[a,o]<span class="hljs-keyword">of</span> e)<span class="hljs-title function_">l</span>(a,o);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e&amp;&amp;<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;object&quot;</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(e))<span class="hljs-title function_">l</span>(a,e[a]);<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> n.<span class="hljs-property">sortMapEntries</span>==<span class="hljs-string">&quot;function&quot;</span>&amp;&amp;r.<span class="hljs-property">items</span>.<span class="hljs-title function_">sort</span>(n.<span class="hljs-property">sortMapEntries</span>),r}<span class="hljs-keyword">const</span> <span class="hljs-title class_">Te</span>={<span class="hljs-attr">collection</span>:<span class="hljs-string">&quot;map&quot;</span>,<span class="hljs-attr">createNode</span>:vn,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">nodeClass</span>:X,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:map&quot;</span>,<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">_e</span>(n)||<span class="hljs-title function_">e</span>(<span class="hljs-string">&quot;Expected a mapping for this tag&quot;</span>),n}};<span class="hljs-keyword">class</span> <span class="hljs-title class_">Le</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">ze</span>{<span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">tagName</span>(){<span class="hljs-keyword">return</span><span class="hljs-string">&quot;tag:yaml.org,2002:seq&quot;</span>}<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">super</span>(ke,e),<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[]}<span class="hljs-title function_">add</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(e)}<span class="hljs-title function_">delete</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">it</span>(e);<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> t!=<span class="hljs-string">&quot;number&quot;</span>?!<span class="hljs-number">1</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(t,<span class="hljs-number">1</span>).<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>}<span class="hljs-title function_">get</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-title function_">it</span>(e);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> s!=<span class="hljs-string">&quot;number&quot;</span>)<span class="hljs-keyword">return</span>;<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[s];<span class="hljs-keyword">return</span>!t&amp;&amp;<span class="hljs-title function_">L</span>(i)?i.<span class="hljs-property">value</span>:i}<span class="hljs-title function_">has</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">it</span>(e);<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> t==<span class="hljs-string">&quot;number&quot;</span>&amp;&amp;t&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>}<span class="hljs-title function_">set</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-title function_">it</span>(e);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> s!=<span class="hljs-string">&quot;number&quot;</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Expected a valid index, not <span class="hljs-subst">${e}</span>.`</span>);<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[s];<span class="hljs-title function_">L</span>(i)&amp;&amp;<span class="hljs-title function_">as</span>(t)?i.<span class="hljs-property">value</span>=<span class="hljs-attr">t</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[s]=t}<span class="hljs-title function_">toJSON</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span> s=[];t!=<span class="hljs-literal">null</span>&amp;&amp;t.<span class="hljs-property">onCreate</span>&amp;&amp;t.<span class="hljs-title function_">onCreate</span>(s);<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> r <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>)s.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">ne</span>(r,<span class="hljs-title class_">String</span>(i++),t));<span class="hljs-keyword">return</span> s}<span class="hljs-title function_">toString</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-keyword">return</span> e?<span class="hljs-title function_">ps</span>(<span class="hljs-variable language_">this</span>,e,{<span class="hljs-attr">blockItemPrefix</span>:<span class="hljs-string">&quot;- &quot;</span>,<span class="hljs-attr">flowChars</span>:{<span class="hljs-attr">start</span>:<span class="hljs-string">&quot;[&quot;</span>,<span class="hljs-attr">end</span>:<span class="hljs-string">&quot;]&quot;</span>},<span class="hljs-attr">itemIndent</span>:(e.<span class="hljs-property">indent</span>||<span class="hljs-string">&quot;&quot;</span>)+<span class="hljs-string">&quot;  &quot;</span>,<span class="hljs-attr">onChompKeep</span>:s,<span class="hljs-attr">onComment</span>:t}):<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>)}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">it</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">let</span> e=<span class="hljs-title function_">L</span>(n)?n.<span class="hljs-property">value</span>:n;<span class="hljs-keyword">return</span> e&amp;&amp;<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;string&quot;</span>&amp;&amp;(e=<span class="hljs-title class_">Number</span>(e)),<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;number&quot;</span>&amp;&amp;<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(e)&amp;&amp;e&gt;=<span class="hljs-number">0</span>?<span class="hljs-attr">e</span>:<span class="hljs-literal">null</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Cn</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">replacer</span>:s}=t,i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Le</span>(n);<span class="hljs-keyword">if</span>(e&amp;&amp;<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> <span class="hljs-keyword">in</span> <span class="hljs-title class_">Object</span>(e)){<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> l <span class="hljs-keyword">of</span> e){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;function&quot;</span>){<span class="hljs-keyword">const</span> a=e <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Set</span>?<span class="hljs-attr">l</span>:<span class="hljs-title class_">String</span>(r++);l=s.<span class="hljs-title function_">call</span>(e,a,l)}i.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Re</span>(l,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,t))}}<span class="hljs-keyword">return</span> i}<span class="hljs-keyword">const</span> <span class="hljs-title class_">Ie</span>={<span class="hljs-attr">collection</span>:<span class="hljs-string">&quot;seq&quot;</span>,<span class="hljs-attr">createNode</span>:<span class="hljs-title class_">Cn</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">nodeClass</span>:<span class="hljs-title class_">Le</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:seq&quot;</span>,<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Fe</span>(n)||<span class="hljs-title function_">e</span>(<span class="hljs-string">&quot;Expected a sequence for this tag&quot;</span>),n}},rt={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;string&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:str&quot;</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n,<span class="hljs-title function_">stringify</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">return</span> e=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({<span class="hljs-attr">actualString</span>:!<span class="hljs-number">0</span>},e),<span class="hljs-title function_">_t</span>(n,e,t,s)}},lt={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n==<span class="hljs-literal">null</span>,<span class="hljs-attr">createNode</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(<span class="hljs-literal">null</span>),<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:null&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^(?:~|[Nn]ull|NULL)?$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(<span class="hljs-literal">null</span>),<span class="hljs-attr">stringify</span>:<span class="hljs-function">(<span class="hljs-params">{source:n},e</span>)=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;string&quot;</span>&amp;&amp;lt.<span class="hljs-property">test</span>.<span class="hljs-title function_">test</span>(n)?<span class="hljs-attr">n</span>:e.<span class="hljs-property">options</span>.<span class="hljs-property">nullStr</span>},<span class="hljs-title class_">Nt</span>={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;boolean&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:bool&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(n[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;t&quot;</span>||n[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;T&quot;</span>),<span class="hljs-title function_">stringify</span>(<span class="hljs-params">{source:n,value:e},t</span>){<span class="hljs-keyword">if</span>(n&amp;&amp;<span class="hljs-title class_">Nt</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">test</span>(n)){<span class="hljs-keyword">const</span> s=n[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;t&quot;</span>||n[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;T&quot;</span>;<span class="hljs-keyword">if</span>(e===s)<span class="hljs-keyword">return</span> n}<span class="hljs-keyword">return</span> e?t.<span class="hljs-property">options</span>.<span class="hljs-property">trueStr</span>:t.<span class="hljs-property">options</span>.<span class="hljs-property">falseStr</span>}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">Z</span>(<span class="hljs-params">{format:n,minFractionDigits:e,tag:t,value:s}</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;bigint&quot;</span>)<span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(s);<span class="hljs-keyword">const</span> i=<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;number&quot;</span>?<span class="hljs-attr">s</span>:<span class="hljs-title class_">Number</span>(s);<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">isFinite</span>(i))<span class="hljs-keyword">return</span> <span class="hljs-built_in">isNaN</span>(i)?<span class="hljs-string">&quot;.nan&quot;</span>:i&lt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;-.inf&quot;</span>:<span class="hljs-string">&quot;.inf&quot;</span>;<span class="hljs-keyword">let</span> r=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(s);<span class="hljs-keyword">if</span>(!n&amp;&amp;e&amp;&amp;(!t||t===<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>)&amp;&amp;<span class="hljs-regexp">/^\d/</span>.<span class="hljs-title function_">test</span>(r)){<span class="hljs-keyword">let</span> l=r.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;.&quot;</span>);l&lt;<span class="hljs-number">0</span>&amp;&amp;(l=r.<span class="hljs-property">length</span>,r+=<span class="hljs-string">&quot;.&quot;</span>);<span class="hljs-keyword">let</span> a=e-(r.<span class="hljs-property">length</span>-l-<span class="hljs-number">1</span>);<span class="hljs-keyword">for</span>(;a-- &gt;<span class="hljs-number">0</span>;)r+=<span class="hljs-string">&quot;0&quot;</span>}<span class="hljs-keyword">return</span> r}<span class="hljs-keyword">const</span> ms={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">3</span>).<span class="hljs-title function_">toLowerCase</span>()===<span class="hljs-string">&quot;nan&quot;</span>?<span class="hljs-title class_">NaN</span>:n[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;-&quot;</span>?<span class="hljs-title class_">Number</span>.<span class="hljs-property">NEGATIVE_INFINITY</span>:<span class="hljs-title class_">Number</span>.<span class="hljs-property">POSITIVE_INFINITY</span>,<span class="hljs-attr">stringify</span>:Z},gs={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;EXP&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-built_in">parseFloat</span>(n),<span class="hljs-title function_">stringify</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span> e=<span class="hljs-title class_">Number</span>(n.<span class="hljs-property">value</span>);<span class="hljs-keyword">return</span> <span class="hljs-built_in">isFinite</span>(e)?e.<span class="hljs-title function_">toExponential</span>():<span class="hljs-title function_">Z</span>(n)}},ys={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/</span>,<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span> e=<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(<span class="hljs-built_in">parseFloat</span>(n)),t=n.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;.&quot;</span>);<span class="hljs-keyword">return</span> t!==-<span class="hljs-number">1</span>&amp;&amp;n[n.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;0&quot;</span>&amp;&amp;(e.<span class="hljs-property">minFractionDigits</span>=n.<span class="hljs-property">length</span>-t-<span class="hljs-number">1</span>),e},<span class="hljs-attr">stringify</span>:Z},at=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;bigint&quot;</span>||<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(n),<span class="hljs-title class_">Tt</span>=<span class="hljs-function">(<span class="hljs-params">n,e,t,{intAsBigInt:s}</span>)=&gt;</span>s?<span class="hljs-title class_">BigInt</span>(n):<span class="hljs-built_in">parseInt</span>(n.<span class="hljs-title function_">substring</span>(e),t);<span class="hljs-keyword">function</span> <span class="hljs-title function_">bs</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">value</span>:s}=n;<span class="hljs-keyword">return</span> <span class="hljs-title function_">at</span>(s)&amp;&amp;s&gt;=<span class="hljs-number">0</span>?t+s.<span class="hljs-title function_">toString</span>(e):<span class="hljs-title function_">Z</span>(n)}<span class="hljs-keyword">const</span> ws={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-title function_">at</span>(n)&amp;&amp;n&gt;=<span class="hljs-number">0</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;OCT&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^0o[0-7]+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,t</span>)=&gt;</span><span class="hljs-title class_">Tt</span>(n,<span class="hljs-number">2</span>,<span class="hljs-number">8</span>,t),<span class="hljs-attr">stringify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-title function_">bs</span>(n,<span class="hljs-number">8</span>,<span class="hljs-string">&quot;0o&quot;</span>)},<span class="hljs-title class_">Ss</span>={<span class="hljs-attr">identify</span>:at,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?[0-9]+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,t</span>)=&gt;</span><span class="hljs-title class_">Tt</span>(n,<span class="hljs-number">0</span>,<span class="hljs-number">10</span>,t),<span class="hljs-attr">stringify</span>:Z},ks={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-title function_">at</span>(n)&amp;&amp;n&gt;=<span class="hljs-number">0</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;HEX&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^0x[0-9a-fA-F]+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,t</span>)=&gt;</span><span class="hljs-title class_">Tt</span>(n,<span class="hljs-number">2</span>,<span class="hljs-number">16</span>,t),<span class="hljs-attr">stringify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-title function_">bs</span>(n,<span class="hljs-number">16</span>,<span class="hljs-string">&quot;0x&quot;</span>)},<span class="hljs-title class_">Dn</span>=[<span class="hljs-title class_">Te</span>,<span class="hljs-title class_">Ie</span>,rt,lt,<span class="hljs-title class_">Nt</span>,ws,<span class="hljs-title class_">Ss</span>,ks,ms,gs,ys];<span class="hljs-keyword">function</span> <span class="hljs-title function_">Es</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;bigint&quot;</span>||<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(n)}<span class="hljs-keyword">const</span> <span class="hljs-title function_">ot</span>=(<span class="hljs-params">{value:n}</span>)=&gt;<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(n),$n=[{<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;string&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:str&quot;</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n,<span class="hljs-attr">stringify</span>:ot},{<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n==<span class="hljs-literal">null</span>,<span class="hljs-attr">createNode</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(<span class="hljs-literal">null</span>),<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:null&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^null$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-literal">null</span>,<span class="hljs-attr">stringify</span>:ot},{<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;boolean&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:bool&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^true|false$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n===<span class="hljs-string">&quot;true&quot;</span>,<span class="hljs-attr">stringify</span>:ot},{<span class="hljs-attr">identify</span>:<span class="hljs-title class_">Es</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^-?(?:0|[1-9][0-9]*)$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,{intAsBigInt:t}</span>)=&gt;</span>t?<span class="hljs-title class_">BigInt</span>(n):<span class="hljs-built_in">parseInt</span>(n,<span class="hljs-number">10</span>),<span class="hljs-attr">stringify</span>:<span class="hljs-function">(<span class="hljs-params">{value:n}</span>)=&gt;</span><span class="hljs-title class_">Es</span>(n)?n.<span class="hljs-title function_">toString</span>():<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(n)},{<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-built_in">parseFloat</span>(n),<span class="hljs-attr">stringify</span>:ot}],<span class="hljs-title class_">Bn</span>={<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^/</span>,<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">e</span>(<span class="hljs-string">`Unresolved plain scalar <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(n)}</span>`</span>),n}},<span class="hljs-title class_">Pn</span>=[<span class="hljs-title class_">Te</span>,<span class="hljs-title class_">Ie</span>].<span class="hljs-title function_">concat</span>($n,<span class="hljs-title class_">Bn</span>),<span class="hljs-title class_">Lt</span>={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Uint8Array</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:binary&quot;</span>,<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Buffer</span>==<span class="hljs-string">&quot;function&quot;</span>)<span class="hljs-keyword">return</span> <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(n,<span class="hljs-string">&quot;base64&quot;</span>);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> atob==<span class="hljs-string">&quot;function&quot;</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">atob</span>(n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[\n\r]/g</span>,<span class="hljs-string">&quot;&quot;</span>)),s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(t.<span class="hljs-property">length</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;t.<span class="hljs-property">length</span>;++i)s[i]=t.<span class="hljs-title function_">charCodeAt</span>(i);<span class="hljs-keyword">return</span> s}<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-title function_">e</span>(<span class="hljs-string">&quot;This environment does not support reading binary tags; either Buffer or atob is required&quot;</span>),n},<span class="hljs-title function_">stringify</span>(<span class="hljs-params">{comment:n,type:e,value:t},s,i,r</span>){<span class="hljs-keyword">const</span> l=t;<span class="hljs-keyword">let</span> a;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Buffer</span>==<span class="hljs-string">&quot;function&quot;</span>)a=l <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Buffer</span>?l.<span class="hljs-title function_">toString</span>(<span class="hljs-string">&quot;base64&quot;</span>):<span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(l.<span class="hljs-property">buffer</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">&quot;base64&quot;</span>);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> btoa==<span class="hljs-string">&quot;function&quot;</span>){<span class="hljs-keyword">let</span> o=<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> c=<span class="hljs-number">0</span>;c&lt;l.<span class="hljs-property">length</span>;++c)o+=<span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(l[c]);a=<span class="hljs-title function_">btoa</span>(o)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;This environment does not support writing binary tags; either Buffer or btoa is required&quot;</span>);<span class="hljs-keyword">if</span>(e||(e=A.<span class="hljs-property">BLOCK_LITERAL</span>),e!==A.<span class="hljs-property">QUOTE_DOUBLE</span>){<span class="hljs-keyword">const</span> o=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(s.<span class="hljs-property">options</span>.<span class="hljs-property">lineWidth</span>-s.<span class="hljs-property">indent</span>.<span class="hljs-property">length</span>,s.<span class="hljs-property">options</span>.<span class="hljs-property">minContentWidth</span>),c=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(a.<span class="hljs-property">length</span>/o),u=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(c);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> f=<span class="hljs-number">0</span>,h=<span class="hljs-number">0</span>;f&lt;c;++f,h+=o)u[f]=a.<span class="hljs-title function_">substr</span>(h,o);a=u.<span class="hljs-title function_">join</span>(e===A.<span class="hljs-property">BLOCK_LITERAL</span>?<span class="hljs-string">`
`</span>:<span class="hljs-string">&quot; &quot;</span>)}<span class="hljs-keyword">return</span> <span class="hljs-title function_">_t</span>({<span class="hljs-attr">comment</span>:n,<span class="hljs-attr">type</span>:e,<span class="hljs-attr">value</span>:a},s,i,r)}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">_s</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Fe</span>(n))<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;s&lt;n.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;++s){<span class="hljs-keyword">let</span> i=n.<span class="hljs-property">items</span>[s];<span class="hljs-keyword">if</span>(!<span class="hljs-title function_">D</span>(i)){<span class="hljs-keyword">if</span>(<span class="hljs-title function_">_e</span>(i)){i.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>&gt;<span class="hljs-number">1</span>&amp;&amp;<span class="hljs-title function_">e</span>(<span class="hljs-string">&quot;Each pair must have its own sequence indicator&quot;</span>);<span class="hljs-keyword">const</span> r=i.<span class="hljs-property">items</span>[<span class="hljs-number">0</span>]||<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(<span class="hljs-literal">null</span>));<span class="hljs-keyword">if</span>(i.<span class="hljs-property">commentBefore</span>&amp;&amp;(r.<span class="hljs-property">key</span>.<span class="hljs-property">commentBefore</span>=r.<span class="hljs-property">key</span>.<span class="hljs-property">commentBefore</span>?<span class="hljs-string">`<span class="hljs-subst">${i.commentBefore}</span>
<span class="hljs-subst">${r.key.commentBefore}</span>`</span>:i.<span class="hljs-property">commentBefore</span>),i.<span class="hljs-property">comment</span>){<span class="hljs-keyword">const</span> l=(t=r.<span class="hljs-property">value</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">t</span>:r.<span class="hljs-property">key</span>;l.<span class="hljs-property">comment</span>=l.<span class="hljs-property">comment</span>?<span class="hljs-string">`<span class="hljs-subst">${i.comment}</span>
<span class="hljs-subst">${l.comment}</span>`</span>:i.<span class="hljs-property">comment</span>}i=r}n.<span class="hljs-property">items</span>[s]=<span class="hljs-title function_">D</span>(i)?<span class="hljs-attr">i</span>:<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(i)}}<span class="hljs-keyword">else</span> <span class="hljs-title function_">e</span>(<span class="hljs-string">&quot;Expected a sequence for this tag&quot;</span>);<span class="hljs-keyword">return</span> n}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Os</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">replacer</span>:s}=t,i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Le</span>(n);i.<span class="hljs-property">tag</span>=<span class="hljs-string">&quot;tag:yaml.org,2002:pairs&quot;</span>;<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(e&amp;&amp;<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> <span class="hljs-keyword">in</span> <span class="hljs-title class_">Object</span>(e))<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> l <span class="hljs-keyword">of</span> e){<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;function&quot;</span>&amp;&amp;(l=s.<span class="hljs-title function_">call</span>(e,<span class="hljs-title class_">String</span>(r++),l));<span class="hljs-keyword">let</span> a,o;<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(l))<span class="hljs-keyword">if</span>(l.<span class="hljs-property">length</span>===<span class="hljs-number">2</span>)a=l[<span class="hljs-number">0</span>],o=l[<span class="hljs-number">1</span>];<span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">`Expected [key, value] tuple: <span class="hljs-subst">${l}</span>`</span>);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(l&amp;&amp;l <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>){<span class="hljs-keyword">const</span> c=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(l);<span class="hljs-keyword">if</span>(c.<span class="hljs-property">length</span>===<span class="hljs-number">1</span>)a=c[<span class="hljs-number">0</span>],o=l[a];<span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">`Expected { key: value } tuple: <span class="hljs-subst">${l}</span>`</span>)}<span class="hljs-keyword">else</span> a=l;i.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">At</span>(a,o,t))}<span class="hljs-keyword">return</span> i}<span class="hljs-keyword">const</span> <span class="hljs-title class_">It</span>={<span class="hljs-attr">collection</span>:<span class="hljs-string">&quot;seq&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:pairs&quot;</span>,<span class="hljs-attr">resolve</span>:_s,<span class="hljs-attr">createNode</span>:<span class="hljs-title class_">Os</span>};<span class="hljs-keyword">class</span> <span class="hljs-title class_">Me</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Le</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>){<span class="hljs-variable language_">super</span>(),<span class="hljs-variable language_">this</span>.<span class="hljs-property">add</span>=X.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">add</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">delete</span>=X.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">delete</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">get</span>=X.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">get</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">has</span>=X.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">has</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">set</span>=X.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">set</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span>=<span class="hljs-title class_">Me</span>.<span class="hljs-property">tag</span>}<span class="hljs-title function_">toJSON</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(!t)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">toJSON</span>(e);<span class="hljs-keyword">const</span> s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>;t!=<span class="hljs-literal">null</span>&amp;&amp;t.<span class="hljs-property">onCreate</span>&amp;&amp;t.<span class="hljs-title function_">onCreate</span>(s);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>){<span class="hljs-keyword">let</span> r,l;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">D</span>(i)?(r=<span class="hljs-title function_">ne</span>(i.<span class="hljs-property">key</span>,<span class="hljs-string">&quot;&quot;</span>,t),l=<span class="hljs-title function_">ne</span>(i.<span class="hljs-property">value</span>,r,t)):r=<span class="hljs-title function_">ne</span>(i,<span class="hljs-string">&quot;&quot;</span>,t),s.<span class="hljs-title function_">has</span>(r))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Ordered maps must not include duplicate keys&quot;</span>);s.<span class="hljs-title function_">set</span>(r,l)}<span class="hljs-keyword">return</span> s}}<span class="hljs-title class_">Me</span>.<span class="hljs-property">tag</span>=<span class="hljs-string">&quot;tag:yaml.org,2002:omap&quot;</span>;<span class="hljs-keyword">const</span> <span class="hljs-title class_">Mt</span>={<span class="hljs-attr">collection</span>:<span class="hljs-string">&quot;seq&quot;</span>,<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>,<span class="hljs-attr">nodeClass</span>:<span class="hljs-title class_">Me</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:omap&quot;</span>,<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">_s</span>(n,e),s=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>{<span class="hljs-attr">key</span>:i}<span class="hljs-keyword">of</span> t.<span class="hljs-property">items</span>)<span class="hljs-title function_">L</span>(i)&amp;&amp;(s.<span class="hljs-title function_">includes</span>(i.<span class="hljs-property">value</span>)?<span class="hljs-title function_">e</span>(<span class="hljs-string">`Ordered maps must not include duplicate keys: <span class="hljs-subst">${i.value}</span>`</span>):s.<span class="hljs-title function_">push</span>(i.<span class="hljs-property">value</span>));<span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Me</span>,t)},<span class="hljs-title function_">createNode</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-title class_">Os</span>(n,e,t),i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Me</span>;<span class="hljs-keyword">return</span> i.<span class="hljs-property">items</span>=s.<span class="hljs-property">items</span>,i}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">As</span>(<span class="hljs-params">{value:n,source:e},t</span>){<span class="hljs-keyword">return</span> e&amp;&amp;(n?<span class="hljs-title class_">Ns</span>:<span class="hljs-title class_">Ts</span>).<span class="hljs-property">test</span>.<span class="hljs-title function_">test</span>(e)?<span class="hljs-attr">e</span>:n?t.<span class="hljs-property">options</span>.<span class="hljs-property">trueStr</span>:t.<span class="hljs-property">options</span>.<span class="hljs-property">falseStr</span>}<span class="hljs-keyword">const</span> <span class="hljs-title class_">Ns</span>={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n===!<span class="hljs-number">0</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:bool&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(!<span class="hljs-number">0</span>),<span class="hljs-attr">stringify</span>:<span class="hljs-title class_">As</span>},<span class="hljs-title class_">Ts</span>={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n===!<span class="hljs-number">1</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:bool&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(!<span class="hljs-number">1</span>),<span class="hljs-attr">stringify</span>:<span class="hljs-title class_">As</span>},jn={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">3</span>).<span class="hljs-title function_">toLowerCase</span>()===<span class="hljs-string">&quot;nan&quot;</span>?<span class="hljs-title class_">NaN</span>:n[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;-&quot;</span>?<span class="hljs-title class_">Number</span>.<span class="hljs-property">NEGATIVE_INFINITY</span>:<span class="hljs-title class_">Number</span>.<span class="hljs-property">POSITIVE_INFINITY</span>,<span class="hljs-attr">stringify</span>:Z},<span class="hljs-title class_">Fn</span>={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;EXP&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-built_in">parseFloat</span>(n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/_/g</span>,<span class="hljs-string">&quot;&quot;</span>)),<span class="hljs-title function_">stringify</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span> e=<span class="hljs-title class_">Number</span>(n.<span class="hljs-property">value</span>);<span class="hljs-keyword">return</span> <span class="hljs-built_in">isFinite</span>(e)?e.<span class="hljs-title function_">toExponential</span>():<span class="hljs-title function_">Z</span>(n)}},<span class="hljs-title class_">Rn</span>={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/</span>,<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span> e=<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(<span class="hljs-built_in">parseFloat</span>(n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/_/g</span>,<span class="hljs-string">&quot;&quot;</span>))),t=n.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;.&quot;</span>);<span class="hljs-keyword">if</span>(t!==-<span class="hljs-number">1</span>){<span class="hljs-keyword">const</span> s=n.<span class="hljs-title function_">substring</span>(t+<span class="hljs-number">1</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/_/g</span>,<span class="hljs-string">&quot;&quot;</span>);s[s.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;0&quot;</span>&amp;&amp;(e.<span class="hljs-property">minFractionDigits</span>=s.<span class="hljs-property">length</span>)}<span class="hljs-keyword">return</span> e},<span class="hljs-attr">stringify</span>:Z},<span class="hljs-title class_">Ue</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;bigint&quot;</span>||<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(n);<span class="hljs-keyword">function</span> <span class="hljs-title function_">ct</span>(<span class="hljs-params">n,e,t,{intAsBigInt:s}</span>){<span class="hljs-keyword">const</span> i=n[<span class="hljs-number">0</span>];<span class="hljs-keyword">if</span>((i===<span class="hljs-string">&quot;-&quot;</span>||i===<span class="hljs-string">&quot;+&quot;</span>)&amp;&amp;(e+=<span class="hljs-number">1</span>),n=n.<span class="hljs-title function_">substring</span>(e).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/_/g</span>,<span class="hljs-string">&quot;&quot;</span>),s){<span class="hljs-keyword">switch</span>(t){<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:n=<span class="hljs-string">`0b<span class="hljs-subst">${n}</span>`</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:n=<span class="hljs-string">`0o<span class="hljs-subst">${n}</span>`</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">16</span>:n=<span class="hljs-string">`0x<span class="hljs-subst">${n}</span>`</span>;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">const</span> l=<span class="hljs-title class_">BigInt</span>(n);<span class="hljs-keyword">return</span> i===<span class="hljs-string">&quot;-&quot;</span>?<span class="hljs-title class_">BigInt</span>(-<span class="hljs-number">1</span>)*<span class="hljs-attr">l</span>:l}<span class="hljs-keyword">const</span> r=<span class="hljs-built_in">parseInt</span>(n,t);<span class="hljs-keyword">return</span> i===<span class="hljs-string">&quot;-&quot;</span>?-<span class="hljs-number">1</span>*<span class="hljs-attr">r</span>:r}<span class="hljs-keyword">function</span> <span class="hljs-title function_">vt</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">value</span>:s}=n;<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Ue</span>(s)){<span class="hljs-keyword">const</span> i=s.<span class="hljs-title function_">toString</span>(e);<span class="hljs-keyword">return</span> s&lt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;-&quot;</span>+t+i.<span class="hljs-title function_">substr</span>(<span class="hljs-number">1</span>):t+i}<span class="hljs-keyword">return</span> <span class="hljs-title function_">Z</span>(n)}<span class="hljs-keyword">const</span> qn={<span class="hljs-attr">identify</span>:<span class="hljs-title class_">Ue</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;BIN&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?0b[0-1_]+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,t</span>)=&gt;</span><span class="hljs-title function_">ct</span>(n,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,t),<span class="hljs-attr">stringify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-title function_">vt</span>(n,<span class="hljs-number">2</span>,<span class="hljs-string">&quot;0b&quot;</span>)},<span class="hljs-title class_">Kn</span>={<span class="hljs-attr">identify</span>:<span class="hljs-title class_">Ue</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;OCT&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?0[0-7_]+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,t</span>)=&gt;</span><span class="hljs-title function_">ct</span>(n,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,t),<span class="hljs-attr">stringify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-title function_">vt</span>(n,<span class="hljs-number">8</span>,<span class="hljs-string">&quot;0&quot;</span>)},<span class="hljs-title class_">Un</span>={<span class="hljs-attr">identify</span>:<span class="hljs-title class_">Ue</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?[0-9][0-9_]*$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,t</span>)=&gt;</span><span class="hljs-title function_">ct</span>(n,<span class="hljs-number">0</span>,<span class="hljs-number">10</span>,t),<span class="hljs-attr">stringify</span>:Z},<span class="hljs-title class_">Yn</span>={<span class="hljs-attr">identify</span>:<span class="hljs-title class_">Ue</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;HEX&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?0x[0-9a-fA-F_]+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,t</span>)=&gt;</span><span class="hljs-title function_">ct</span>(n,<span class="hljs-number">2</span>,<span class="hljs-number">16</span>,t),<span class="hljs-attr">stringify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-title function_">vt</span>(n,<span class="hljs-number">16</span>,<span class="hljs-string">&quot;0x&quot;</span>)};<span class="hljs-keyword">class</span> <span class="hljs-title class_">ve</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">X</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">super</span>(e),<span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span>=ve.<span class="hljs-property">tag</span>}<span class="hljs-title function_">add</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">let</span> t;<span class="hljs-title function_">D</span>(e)?t=<span class="hljs-attr">e</span>:e&amp;&amp;<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;<span class="hljs-string">&quot;key&quot;</span><span class="hljs-keyword">in</span> e&amp;&amp;<span class="hljs-string">&quot;value&quot;</span><span class="hljs-keyword">in</span> e&amp;&amp;e.<span class="hljs-property">value</span>===<span class="hljs-literal">null</span>?t=<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(e.<span class="hljs-property">key</span>,<span class="hljs-literal">null</span>):t=<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(e,<span class="hljs-literal">null</span>),<span class="hljs-title function_">ye</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>,t.<span class="hljs-property">key</span>)||<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(t)}<span class="hljs-title function_">get</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-title function_">ye</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>,e);<span class="hljs-keyword">return</span>!t&amp;&amp;<span class="hljs-title function_">D</span>(s)?<span class="hljs-title function_">L</span>(s.<span class="hljs-property">key</span>)?s.<span class="hljs-property">key</span>.<span class="hljs-property">value</span>:s.<span class="hljs-property">key</span>:s}<span class="hljs-title function_">set</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> t!=<span class="hljs-string">&quot;boolean&quot;</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Expected boolean value for set(key, value) in a YAML set, not <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> t}</span>`</span>);<span class="hljs-keyword">const</span> s=<span class="hljs-title function_">ye</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>,e);s&amp;&amp;!t?<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">indexOf</span>(s),<span class="hljs-number">1</span>):!s&amp;&amp;t&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(e))}<span class="hljs-title function_">toJSON</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">toJSON</span>(e,t,<span class="hljs-title class_">Set</span>)}<span class="hljs-title function_">toString</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>);<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hasAllNullValues</span>(!<span class="hljs-number">0</span>))<span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},e,{<span class="hljs-attr">allNullValues</span>:!<span class="hljs-number">0</span>}),t,s);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Set items must all have null values&quot;</span>)}}ve.<span class="hljs-property">tag</span>=<span class="hljs-string">&quot;tag:yaml.org,2002:set&quot;</span>;<span class="hljs-keyword">const</span> <span class="hljs-title class_">Ct</span>={<span class="hljs-attr">collection</span>:<span class="hljs-string">&quot;map&quot;</span>,<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Set</span>,<span class="hljs-attr">nodeClass</span>:ve,<span class="hljs-attr">default</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:set&quot;</span>,<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-title function_">_e</span>(n)){<span class="hljs-keyword">if</span>(n.<span class="hljs-title function_">hasAllNullValues</span>(!<span class="hljs-number">0</span>))<span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-keyword">new</span> ve,n);<span class="hljs-title function_">e</span>(<span class="hljs-string">&quot;Set items must all have null values&quot;</span>)}<span class="hljs-keyword">else</span> <span class="hljs-title function_">e</span>(<span class="hljs-string">&quot;Expected a mapping for this tag&quot;</span>);<span class="hljs-keyword">return</span> n},<span class="hljs-title function_">createNode</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">replacer</span>:s}=t,i=<span class="hljs-keyword">new</span> <span class="hljs-title function_">ve</span>(n);<span class="hljs-keyword">if</span>(e&amp;&amp;<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> <span class="hljs-keyword">in</span> <span class="hljs-title class_">Object</span>(e))<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> r <span class="hljs-keyword">of</span> e)<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;function&quot;</span>&amp;&amp;(r=s.<span class="hljs-title function_">call</span>(e,r,r)),i.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">At</span>(r,<span class="hljs-literal">null</span>,t));<span class="hljs-keyword">return</span> i}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dt</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span> t=n[<span class="hljs-number">0</span>],s=t===<span class="hljs-string">&quot;-&quot;</span>||t===<span class="hljs-string">&quot;+&quot;</span>?n.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>):n,i=<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span>e?<span class="hljs-title class_">BigInt</span>(l):<span class="hljs-title class_">Number</span>(l),r=s.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/_/g</span>,<span class="hljs-string">&quot;&quot;</span>).<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;:&quot;</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">l,a</span>)=&gt;</span>l*<span class="hljs-title function_">i</span>(<span class="hljs-number">60</span>)+<span class="hljs-title function_">i</span>(a),<span class="hljs-title function_">i</span>(<span class="hljs-number">0</span>));<span class="hljs-keyword">return</span> t===<span class="hljs-string">&quot;-&quot;</span>?<span class="hljs-title function_">i</span>(-<span class="hljs-number">1</span>)*<span class="hljs-attr">r</span>:r}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ls</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">let</span>{<span class="hljs-attr">value</span>:e}=n,t=<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span>l;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;bigint&quot;</span>)t=<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span><span class="hljs-title class_">BigInt</span>(l);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-built_in">isNaN</span>(e)||!<span class="hljs-built_in">isFinite</span>(e))<span class="hljs-keyword">return</span> <span class="hljs-title function_">Z</span>(n);<span class="hljs-keyword">let</span> s=<span class="hljs-string">&quot;&quot;</span>;e&lt;<span class="hljs-number">0</span>&amp;&amp;(s=<span class="hljs-string">&quot;-&quot;</span>,e*=<span class="hljs-title function_">t</span>(-<span class="hljs-number">1</span>));<span class="hljs-keyword">const</span> i=<span class="hljs-title function_">t</span>(<span class="hljs-number">60</span>),r=[e%i];<span class="hljs-keyword">return</span> e&lt;<span class="hljs-number">60</span>?r.<span class="hljs-title function_">unshift</span>(<span class="hljs-number">0</span>):(e=(e-r[<span class="hljs-number">0</span>])/i,r.<span class="hljs-title function_">unshift</span>(e%i),e&gt;=<span class="hljs-number">60</span>&amp;&amp;(e=(e-r[<span class="hljs-number">0</span>])/i,r.<span class="hljs-title function_">unshift</span>(e))),s+r.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span>l&lt;<span class="hljs-number">10</span>?<span class="hljs-string">&quot;0&quot;</span>+<span class="hljs-title class_">String</span>(l):<span class="hljs-title class_">String</span>(l)).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;:&quot;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/000000\d*$/</span>,<span class="hljs-string">&quot;&quot;</span>)}<span class="hljs-keyword">const</span> <span class="hljs-title class_">Is</span>={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;bigint&quot;</span>||<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(n),<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:int&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;TIME&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function">(<span class="hljs-params">n,e,{intAsBigInt:t}</span>)=&gt;</span><span class="hljs-title class_">Dt</span>(n,t),<span class="hljs-attr">stringify</span>:<span class="hljs-title class_">Ls</span>},<span class="hljs-title class_">Ms</span>={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:float&quot;</span>,<span class="hljs-attr">format</span>:<span class="hljs-string">&quot;TIME&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-regexp">/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/</span>,<span class="hljs-attr">resolve</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span><span class="hljs-title class_">Dt</span>(n,!<span class="hljs-number">1</span>),<span class="hljs-attr">stringify</span>:<span class="hljs-title class_">Ls</span>},ut={<span class="hljs-attr">identify</span>:<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>,<span class="hljs-attr">default</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">tag</span>:<span class="hljs-string">&quot;tag:yaml.org,2002:timestamp&quot;</span>,<span class="hljs-attr">test</span>:<span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$&quot;</span>),<span class="hljs-title function_">resolve</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span> e=n.<span class="hljs-title function_">match</span>(ut.<span class="hljs-property">test</span>);<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;!!timestamp expects a date, starting with yyyy-mm-dd&quot;</span>);<span class="hljs-keyword">const</span>[,t,s,i,r,l,a]=e.<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>),o=e[<span class="hljs-number">7</span>]?<span class="hljs-title class_">Number</span>((e[<span class="hljs-number">7</span>]+<span class="hljs-string">&quot;00&quot;</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>)):<span class="hljs-number">0</span>;<span class="hljs-keyword">let</span> c=<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">UTC</span>(t,s-<span class="hljs-number">1</span>,i,r||<span class="hljs-number">0</span>,l||<span class="hljs-number">0</span>,a||<span class="hljs-number">0</span>,o);<span class="hljs-keyword">const</span> u=e[<span class="hljs-number">8</span>];<span class="hljs-keyword">if</span>(u&amp;&amp;u!==<span class="hljs-string">&quot;Z&quot;</span>){<span class="hljs-keyword">let</span> f=<span class="hljs-title class_">Dt</span>(u,!<span class="hljs-number">1</span>);<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(f)&lt;<span class="hljs-number">30</span>&amp;&amp;(f*=<span class="hljs-number">60</span>),c-=<span class="hljs-number">6e4</span>*f}<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(c)},<span class="hljs-attr">stringify</span>:<span class="hljs-function">(<span class="hljs-params">{value:n}</span>)=&gt;</span>n.<span class="hljs-title function_">toISOString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/((T00:00)?:00)?\.000Z$/</span>,<span class="hljs-string">&quot;&quot;</span>)},vs=[<span class="hljs-title class_">Te</span>,<span class="hljs-title class_">Ie</span>,rt,lt,<span class="hljs-title class_">Ns</span>,<span class="hljs-title class_">Ts</span>,qn,<span class="hljs-title class_">Kn</span>,<span class="hljs-title class_">Un</span>,<span class="hljs-title class_">Yn</span>,jn,<span class="hljs-title class_">Fn</span>,<span class="hljs-title class_">Rn</span>,<span class="hljs-title class_">Lt</span>,<span class="hljs-title class_">Mt</span>,<span class="hljs-title class_">It</span>,<span class="hljs-title class_">Ct</span>,<span class="hljs-title class_">Is</span>,<span class="hljs-title class_">Ms</span>,ut],<span class="hljs-title class_">Cs</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[<span class="hljs-string">&quot;core&quot;</span>,<span class="hljs-title class_">Dn</span>],[<span class="hljs-string">&quot;failsafe&quot;</span>,[<span class="hljs-title class_">Te</span>,<span class="hljs-title class_">Ie</span>,rt]],[<span class="hljs-string">&quot;json&quot;</span>,<span class="hljs-title class_">Pn</span>],[<span class="hljs-string">&quot;yaml11&quot;</span>,vs],[<span class="hljs-string">&quot;yaml-1.1&quot;</span>,vs]]),<span class="hljs-title class_">Ds</span>={<span class="hljs-attr">binary</span>:<span class="hljs-title class_">Lt</span>,<span class="hljs-attr">bool</span>:<span class="hljs-title class_">Nt</span>,<span class="hljs-attr">float</span>:ys,<span class="hljs-attr">floatExp</span>:gs,<span class="hljs-attr">floatNaN</span>:ms,<span class="hljs-attr">floatTime</span>:<span class="hljs-title class_">Ms</span>,<span class="hljs-attr">int</span>:<span class="hljs-title class_">Ss</span>,<span class="hljs-attr">intHex</span>:ks,<span class="hljs-attr">intOct</span>:ws,<span class="hljs-attr">intTime</span>:<span class="hljs-title class_">Is</span>,<span class="hljs-attr">map</span>:<span class="hljs-title class_">Te</span>,<span class="hljs-attr">null</span>:lt,<span class="hljs-attr">omap</span>:<span class="hljs-title class_">Mt</span>,<span class="hljs-attr">pairs</span>:<span class="hljs-title class_">It</span>,<span class="hljs-attr">seq</span>:<span class="hljs-title class_">Ie</span>,<span class="hljs-attr">set</span>:<span class="hljs-title class_">Ct</span>,<span class="hljs-attr">timestamp</span>:ut},<span class="hljs-title class_">Vn</span>={<span class="hljs-string">&quot;tag:yaml.org,2002:binary&quot;</span>:<span class="hljs-title class_">Lt</span>,<span class="hljs-string">&quot;tag:yaml.org,2002:omap&quot;</span>:<span class="hljs-title class_">Mt</span>,<span class="hljs-string">&quot;tag:yaml.org,2002:pairs&quot;</span>:<span class="hljs-title class_">It</span>,<span class="hljs-string">&quot;tag:yaml.org,2002:set&quot;</span>:<span class="hljs-title class_">Ct</span>,<span class="hljs-string">&quot;tag:yaml.org,2002:timestamp&quot;</span>:ut};<span class="hljs-keyword">function</span> <span class="hljs-title function_">$t</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-title class_">Cs</span>.<span class="hljs-title function_">get</span>(e);<span class="hljs-keyword">if</span>(!t)<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(n))t=[];<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> s=<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-title class_">Cs</span>.<span class="hljs-title function_">keys</span>()).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>i!==<span class="hljs-string">&quot;yaml11&quot;</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(i)).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;, &quot;</span>);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unknown schema &quot;<span class="hljs-subst">${e}</span>&quot;; use one of <span class="hljs-subst">${s}</span> or define customTags array`</span>)}<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(n))<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> n)t=t.<span class="hljs-title function_">concat</span>(s);<span class="hljs-keyword">else</span> <span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;function&quot;</span>&amp;&amp;(t=<span class="hljs-title function_">n</span>(t.<span class="hljs-title function_">slice</span>()));<span class="hljs-keyword">return</span> t.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> s!=<span class="hljs-string">&quot;string&quot;</span>)<span class="hljs-keyword">return</span> s;<span class="hljs-keyword">const</span> i=<span class="hljs-title class_">Ds</span>[s];<span class="hljs-keyword">if</span>(i)<span class="hljs-keyword">return</span> i;<span class="hljs-keyword">const</span> r=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-title class_">Ds</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(l)).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;, &quot;</span>);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unknown custom tag &quot;<span class="hljs-subst">${s}</span>&quot;; use one of <span class="hljs-subst">${r}</span>`</span>)})}<span class="hljs-keyword">const</span> <span class="hljs-title function_">xn</span>=(<span class="hljs-params">n,e</span>)=&gt;n.<span class="hljs-property">key</span>&lt;e.<span class="hljs-property">key</span>?-<span class="hljs-number">1</span>:n.<span class="hljs-property">key</span>&gt;e.<span class="hljs-property">key</span>?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bt</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">{compat:e,customTags:t,merge:s,resolveKnownTags:i,schema:r,sortMapEntries:l,toStringDefaults:a}</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">compat</span>=<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(e)?$t(e,<span class="hljs-string">&quot;compat&quot;</span>):e?$t(<span class="hljs-literal">null</span>,e):<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">merge</span>=!!s,<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=<span class="hljs-keyword">typeof</span> r==<span class="hljs-string">&quot;string&quot;</span>&amp;&amp;r||<span class="hljs-string">&quot;core&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">knownTags</span>=i?<span class="hljs-title class_">Vn</span>:{},<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>=$t(t,<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">toStringOptions</span>=a!=<span class="hljs-literal">null</span>?<span class="hljs-attr">a</span>:<span class="hljs-literal">null</span>,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>,ce,{<span class="hljs-attr">value</span>:<span class="hljs-title class_">Te</span>}),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>,re,{<span class="hljs-attr">value</span>:rt}),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>,ke,{<span class="hljs-attr">value</span>:<span class="hljs-title class_">Ie</span>}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">sortMapEntries</span>=<span class="hljs-keyword">typeof</span> l==<span class="hljs-string">&quot;function&quot;</span>?<span class="hljs-attr">l</span>:l===!<span class="hljs-number">0</span>?<span class="hljs-attr">xn</span>:<span class="hljs-literal">null</span>}<span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Bt</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptors</span>(<span class="hljs-variable language_">this</span>));<span class="hljs-keyword">return</span> e.<span class="hljs-property">tags</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">tags</span>.<span class="hljs-title function_">slice</span>(),e}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Hn</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">const</span> t=[];<span class="hljs-keyword">let</span> s=e.<span class="hljs-property">directives</span>===!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(e.<span class="hljs-property">directives</span>!==!<span class="hljs-number">1</span>&amp;&amp;n.<span class="hljs-property">directives</span>){<span class="hljs-keyword">const</span> c=n.<span class="hljs-property">directives</span>.<span class="hljs-title function_">toString</span>(n);c?(t.<span class="hljs-title function_">push</span>(c),s=!<span class="hljs-number">0</span>):n.<span class="hljs-property">directives</span>.<span class="hljs-property">docStart</span>&amp;&amp;(s=!<span class="hljs-number">0</span>)}s&amp;&amp;t.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;---&quot;</span>);<span class="hljs-keyword">const</span> i=<span class="hljs-title function_">us</span>(n,e),{<span class="hljs-attr">commentString</span>:r}=i.<span class="hljs-property">options</span>;<span class="hljs-keyword">if</span>(n.<span class="hljs-property">commentBefore</span>){t.<span class="hljs-property">length</span>!==<span class="hljs-number">1</span>&amp;&amp;t.<span class="hljs-title function_">unshift</span>(<span class="hljs-string">&quot;&quot;</span>);<span class="hljs-keyword">const</span> c=<span class="hljs-title function_">r</span>(n.<span class="hljs-property">commentBefore</span>);t.<span class="hljs-title function_">unshift</span>(<span class="hljs-title function_">le</span>(c,<span class="hljs-string">&quot;&quot;</span>))}<span class="hljs-keyword">let</span> l=!<span class="hljs-number">1</span>,a=<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(n.<span class="hljs-property">contents</span>){<span class="hljs-keyword">if</span>(<span class="hljs-title function_">F</span>(n.<span class="hljs-property">contents</span>)){<span class="hljs-keyword">if</span>(n.<span class="hljs-property">contents</span>.<span class="hljs-property">spaceBefore</span>&amp;&amp;s&amp;&amp;t.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;&quot;</span>),n.<span class="hljs-property">contents</span>.<span class="hljs-property">commentBefore</span>){<span class="hljs-keyword">const</span> f=<span class="hljs-title function_">r</span>(n.<span class="hljs-property">contents</span>.<span class="hljs-property">commentBefore</span>);t.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">le</span>(f,<span class="hljs-string">&quot;&quot;</span>))}i.<span class="hljs-property">forceBlockIndent</span>=!!n.<span class="hljs-property">comment</span>,a=n.<span class="hljs-property">contents</span>.<span class="hljs-property">comment</span>}<span class="hljs-keyword">const</span> c=a?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-function">()=&gt;</span>l=!<span class="hljs-number">0</span>;<span class="hljs-keyword">let</span> u=<span class="hljs-title function_">ge</span>(n.<span class="hljs-property">contents</span>,i,<span class="hljs-function">()=&gt;</span>a=<span class="hljs-literal">null</span>,c);a&amp;&amp;(u+=<span class="hljs-title function_">ue</span>(u,<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-title function_">r</span>(a))),(u[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;|&quot;</span>||u[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;&gt;&quot;</span>)&amp;&amp;t[t.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;---&quot;</span>?t[t.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]=<span class="hljs-string">`--- <span class="hljs-subst">${u}</span>`</span>:t.<span class="hljs-title function_">push</span>(u)}<span class="hljs-keyword">else</span> t.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">ge</span>(n.<span class="hljs-property">contents</span>,i));<span class="hljs-keyword">if</span>((o=n.<span class="hljs-property">directives</span>)!=<span class="hljs-literal">null</span>&amp;&amp;o.<span class="hljs-property">docEnd</span>)<span class="hljs-keyword">if</span>(n.<span class="hljs-property">comment</span>){<span class="hljs-keyword">const</span> c=<span class="hljs-title function_">r</span>(n.<span class="hljs-property">comment</span>);c.<span class="hljs-title function_">includes</span>(<span class="hljs-string">`
`</span>)?(t.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;...&quot;</span>),t.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">le</span>(c,<span class="hljs-string">&quot;&quot;</span>))):t.<span class="hljs-title function_">push</span>(<span class="hljs-string">`... <span class="hljs-subst">${c}</span>`</span>)}<span class="hljs-keyword">else</span> t.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;...&quot;</span>);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">let</span> c=n.<span class="hljs-property">comment</span>;c&amp;&amp;l&amp;&amp;(c=c.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\n+/</span>,<span class="hljs-string">&quot;&quot;</span>)),c&amp;&amp;((!l||a)&amp;&amp;t[t.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]!==<span class="hljs-string">&quot;&quot;</span>&amp;&amp;t.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;&quot;</span>),t.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">le</span>(<span class="hljs-title function_">r</span>(c),<span class="hljs-string">&quot;&quot;</span>)))}<span class="hljs-keyword">return</span> t.<span class="hljs-title function_">join</span>(<span class="hljs-string">`
`</span>)+<span class="hljs-string">`
`</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ye</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">if</span>(s&amp;&amp;<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;object&quot;</span>)<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(s))<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>,r=s.<span class="hljs-property">length</span>;i&lt;r;++i){<span class="hljs-keyword">const</span> l=s[i],a=<span class="hljs-title class_">Ye</span>(n,s,<span class="hljs-title class_">String</span>(i),l);a===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>?<span class="hljs-keyword">delete</span> s[i]:a!==l&amp;&amp;(s[i]=a)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Map</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(s.<span class="hljs-title function_">keys</span>())){<span class="hljs-keyword">const</span> r=s.<span class="hljs-title function_">get</span>(i),l=<span class="hljs-title class_">Ye</span>(n,s,i,r);l===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>?s.<span class="hljs-title function_">delete</span>(i):l!==r&amp;&amp;s.<span class="hljs-title function_">set</span>(i,l)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Set</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(s)){<span class="hljs-keyword">const</span> r=<span class="hljs-title class_">Ye</span>(n,s,i,i);r===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>?s.<span class="hljs-title function_">delete</span>(i):r!==i&amp;&amp;(s.<span class="hljs-title function_">delete</span>(i),s.<span class="hljs-title function_">add</span>(r))}<span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>[i,r]<span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(s)){<span class="hljs-keyword">const</span> l=<span class="hljs-title class_">Ye</span>(n,s,i,r);l===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>?<span class="hljs-keyword">delete</span> s[i]:l!==r&amp;&amp;(s[i]=l)}<span class="hljs-keyword">return</span> n.<span class="hljs-title function_">call</span>(e,t,s)}<span class="hljs-keyword">class</span> <span class="hljs-title class_">ft</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">commentBefore</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">comment</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">warnings</span>=[],<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>,W,{<span class="hljs-attr">value</span>:yt});<span class="hljs-keyword">let</span> i=<span class="hljs-literal">null</span>;<span class="hljs-keyword">typeof</span> t==<span class="hljs-string">&quot;function&quot;</span>||<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(t)?i=<span class="hljs-attr">t</span>:s===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>&amp;&amp;t&amp;&amp;(s=t,t=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);<span class="hljs-keyword">const</span> r=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({<span class="hljs-attr">intAsBigInt</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">keepSourceTokens</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">logLevel</span>:<span class="hljs-string">&quot;warn&quot;</span>,<span class="hljs-attr">prettyErrors</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">strict</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">uniqueKeys</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">version</span>:<span class="hljs-string">&quot;1.2&quot;</span>},s);<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>=r;<span class="hljs-keyword">let</span>{<span class="hljs-attr">version</span>:l}=r;s!=<span class="hljs-literal">null</span>&amp;&amp;s.<span class="hljs-property">_directives</span>?(<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>=s.<span class="hljs-property">_directives</span>.<span class="hljs-title function_">atDocument</span>(),<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>.<span class="hljs-property">yaml</span>.<span class="hljs-property">explicit</span>&amp;&amp;(l=<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>.<span class="hljs-property">yaml</span>.<span class="hljs-property">version</span>)):<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>=<span class="hljs-keyword">new</span> <span class="hljs-title function_">Y</span>({<span class="hljs-attr">version</span>:l}),<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setSchema</span>(l,s),e===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>=<span class="hljs-attr">null</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createNode</span>(e,i,s)}<span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(ft.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>,{[W]:{<span class="hljs-attr">value</span>:yt}});<span class="hljs-keyword">return</span> e.<span class="hljs-property">commentBefore</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">commentBefore</span>,e.<span class="hljs-property">comment</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">comment</span>,e.<span class="hljs-property">errors</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">slice</span>(),e.<span class="hljs-property">warnings</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">warnings</span>.<span class="hljs-title function_">slice</span>(),e.<span class="hljs-property">options</span>=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>&amp;&amp;(e.<span class="hljs-property">directives</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>.<span class="hljs-title function_">clone</span>()),e.<span class="hljs-property">schema</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>.<span class="hljs-title function_">clone</span>(),e.<span class="hljs-property">contents</span>=<span class="hljs-title function_">F</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">clone</span>(e.<span class="hljs-property">schema</span>):<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">range</span>&amp;&amp;(e.<span class="hljs-property">range</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">range</span>.<span class="hljs-title function_">slice</span>()),e}<span class="hljs-title function_">add</span>(<span class="hljs-params">e</span>){<span class="hljs-title class_">Ce</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">add</span>(e)}<span class="hljs-title function_">addIn</span>(<span class="hljs-params">e,t</span>){<span class="hljs-title class_">Ce</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">addIn</span>(e,t)}<span class="hljs-title function_">createAlias</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(!e.<span class="hljs-property">anchor</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-title function_">rs</span>(<span class="hljs-variable language_">this</span>);e.<span class="hljs-property">anchor</span>=!t||s.<span class="hljs-title function_">has</span>(t)?<span class="hljs-title function_">ls</span>(t||<span class="hljs-string">&quot;a&quot;</span>,s):t}<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>(e.<span class="hljs-property">anchor</span>)}<span class="hljs-title function_">createNode</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-keyword">let</span> i;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> t==<span class="hljs-string">&quot;function&quot;</span>)e=t.<span class="hljs-title function_">call</span>({<span class="hljs-string">&quot;&quot;</span>:e},<span class="hljs-string">&quot;&quot;</span>,e),i=t;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(t)){<span class="hljs-keyword">const</span> <span class="hljs-title function_">g</span>=b=&gt;<span class="hljs-keyword">typeof</span> b==<span class="hljs-string">&quot;number&quot;</span>||b <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">String</span>||b <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Number</span>,w=t.<span class="hljs-title function_">filter</span>(g).<span class="hljs-title function_">map</span>(<span class="hljs-title class_">String</span>);w.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>&amp;&amp;(t=t.<span class="hljs-title function_">concat</span>(w)),i=t}<span class="hljs-keyword">else</span> s===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>&amp;&amp;t&amp;&amp;(s=t,t=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);<span class="hljs-keyword">const</span>{<span class="hljs-attr">aliasDuplicateObjects</span>:r,<span class="hljs-attr">anchorPrefix</span>:l,<span class="hljs-attr">flow</span>:a,<span class="hljs-attr">keepUndefined</span>:o,<span class="hljs-attr">onTagObj</span>:c,<span class="hljs-attr">tag</span>:u}=s!=<span class="hljs-literal">null</span>?<span class="hljs-attr">s</span>:{},{<span class="hljs-attr">onAnchor</span>:f,<span class="hljs-attr">setAnchors</span>:h,<span class="hljs-attr">sourceObjects</span>:p}=<span class="hljs-title function_">bn</span>(<span class="hljs-variable language_">this</span>,l||<span class="hljs-string">&quot;a&quot;</span>),y={<span class="hljs-attr">aliasDuplicateObjects</span>:r!=<span class="hljs-literal">null</span>?<span class="hljs-attr">r</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">keepUndefined</span>:o!=<span class="hljs-literal">null</span>?<span class="hljs-attr">o</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">onAnchor</span>:f,<span class="hljs-attr">onTagObj</span>:c,<span class="hljs-attr">replacer</span>:i,<span class="hljs-attr">schema</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>,<span class="hljs-attr">sourceObjects</span>:p},d=<span class="hljs-title class_">Re</span>(e,u,y);<span class="hljs-keyword">return</span> a&amp;&amp;$(d)&amp;&amp;(d.<span class="hljs-property">flow</span>=!<span class="hljs-number">0</span>),<span class="hljs-title function_">h</span>(),d}<span class="hljs-title function_">createPair</span>(<span class="hljs-params">e,t,s={}</span>){<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createNode</span>(e,<span class="hljs-literal">null</span>,s),r=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createNode</span>(t,<span class="hljs-literal">null</span>,s);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(i,r)}<span class="hljs-title function_">delete</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ce</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">delete</span>(e):!<span class="hljs-number">1</span>}<span class="hljs-title function_">deleteIn</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">qe</span>(e)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>==<span class="hljs-literal">null</span>?!<span class="hljs-number">1</span>:(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>=<span class="hljs-literal">null</span>,!<span class="hljs-number">0</span>):<span class="hljs-title class_">Ce</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">deleteIn</span>(e):!<span class="hljs-number">1</span>}<span class="hljs-title function_">get</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">return</span> $(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">get</span>(e,t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-title function_">getIn</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">qe</span>(e)?!t&amp;&amp;<span class="hljs-title function_">L</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-property">value</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>:$(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">getIn</span>(e,t):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-title function_">has</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> $(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">has</span>(e):!<span class="hljs-number">1</span>}<span class="hljs-title function_">hasIn</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">qe</span>(e)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>!==<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:$(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">hasIn</span>(e):!<span class="hljs-number">1</span>}<span class="hljs-title function_">set</span>(<span class="hljs-params">e,t</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>==<span class="hljs-literal">null</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>=<span class="hljs-title class_">We</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>,[e],t):<span class="hljs-title class_">Ce</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">set</span>(e,t)}<span class="hljs-title function_">setIn</span>(<span class="hljs-params">e,t</span>){<span class="hljs-title function_">qe</span>(e)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>=<span class="hljs-attr">t</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>==<span class="hljs-literal">null</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>=<span class="hljs-title class_">We</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>,<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(e),t):<span class="hljs-title class_">Ce</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>)&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>.<span class="hljs-title function_">setIn</span>(e,t)}<span class="hljs-title function_">setSchema</span>(<span class="hljs-params">e,t={}</span>){<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;number&quot;</span>&amp;&amp;(e=<span class="hljs-title class_">String</span>(e));<span class="hljs-keyword">let</span> s;<span class="hljs-keyword">switch</span>(e){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;1.1&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>.<span class="hljs-property">yaml</span>.<span class="hljs-property">version</span>=<span class="hljs-string">&quot;1.1&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>=<span class="hljs-keyword">new</span> <span class="hljs-title function_">Y</span>({<span class="hljs-attr">version</span>:<span class="hljs-string">&quot;1.1&quot;</span>}),s={<span class="hljs-attr">merge</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">resolveKnownTags</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">schema</span>:<span class="hljs-string">&quot;yaml-1.1&quot;</span>};<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;1.2&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;next&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>.<span class="hljs-property">yaml</span>.<span class="hljs-property">version</span>=<span class="hljs-attr">e</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>=<span class="hljs-keyword">new</span> <span class="hljs-title function_">Y</span>({<span class="hljs-attr">version</span>:e}),s={<span class="hljs-attr">merge</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">resolveKnownTags</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">schema</span>:<span class="hljs-string">&quot;core&quot;</span>};<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-attr">null</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>&amp;&amp;<span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>,s=<span class="hljs-literal">null</span>;<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:{<span class="hljs-keyword">const</span> i=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(e);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Expected &#x27;1.1&#x27;, &#x27;1.2&#x27; or null as first argument, but found: <span class="hljs-subst">${i}</span>`</span>)}}<span class="hljs-keyword">if</span>(t.<span class="hljs-property">schema</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span>)<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>=t.<span class="hljs-property">schema</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s)<span class="hljs-variable language_">this</span>.<span class="hljs-property">schema</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bt</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(s,t));<span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;With a null YAML version, the { schema: Schema } option is required&quot;</span>)}<span class="hljs-title function_">toJS</span>(<span class="hljs-params">{json:e,jsonArg:t,mapAsMap:s,maxAliasCount:i,onAnchor:r,reviver:l}={}</span>){<span class="hljs-keyword">const</span> a={<span class="hljs-attr">anchors</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>,<span class="hljs-attr">doc</span>:<span class="hljs-variable language_">this</span>,<span class="hljs-attr">keep</span>:!e,<span class="hljs-attr">mapAsMap</span>:s===!<span class="hljs-number">0</span>,<span class="hljs-attr">mapKeyWarned</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">maxAliasCount</span>:<span class="hljs-keyword">typeof</span> i==<span class="hljs-string">&quot;number&quot;</span>?<span class="hljs-attr">i</span>:<span class="hljs-number">100</span>,<span class="hljs-attr">stringify</span>:ge},o=<span class="hljs-title function_">ne</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contents</span>,t!=<span class="hljs-literal">null</span>?<span class="hljs-attr">t</span>:<span class="hljs-string">&quot;&quot;</span>,a);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> r==<span class="hljs-string">&quot;function&quot;</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>{<span class="hljs-attr">count</span>:c,<span class="hljs-attr">res</span>:u}<span class="hljs-keyword">of</span> a.<span class="hljs-property">anchors</span>.<span class="hljs-title function_">values</span>())<span class="hljs-title function_">r</span>(u,c);<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> l==<span class="hljs-string">&quot;function&quot;</span>?<span class="hljs-title class_">Ye</span>(l,{<span class="hljs-string">&quot;&quot;</span>:o},<span class="hljs-string">&quot;&quot;</span>,o):o}<span class="hljs-title function_">toJSON</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toJS</span>({<span class="hljs-attr">json</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">jsonArg</span>:e,<span class="hljs-attr">mapAsMap</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">onAnchor</span>:t})}<span class="hljs-title function_">toString</span>(<span class="hljs-params">e={}</span>){<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Document with errors cannot be stringified&quot;</span>);<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;indent&quot;</span><span class="hljs-keyword">in</span> e&amp;&amp;(!<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(e.<span class="hljs-property">indent</span>)||<span class="hljs-title class_">Number</span>(e.<span class="hljs-property">indent</span>)&lt;=<span class="hljs-number">0</span>)){<span class="hljs-keyword">const</span> t=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(e.<span class="hljs-property">indent</span>);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`&quot;indent&quot; option must be a positive integer, not <span class="hljs-subst">${t}</span>`</span>)}<span class="hljs-keyword">return</span> <span class="hljs-title class_">Hn</span>(<span class="hljs-variable language_">this</span>,e)}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ce</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">if</span>($(n))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Expected a YAML collection as document contents&quot;</span>)}<span class="hljs-keyword">class</span> <span class="hljs-title class_">$s</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e,t,s,i</span>){<span class="hljs-variable language_">super</span>(),<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=e,<span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span>=s,<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>=i,<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>=t}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">Ve</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">$s</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-variable language_">super</span>(<span class="hljs-string">&quot;YAMLParseError&quot;</span>,e,t,s)}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">Gn</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">$s</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e,t,s</span>){<span class="hljs-variable language_">super</span>(<span class="hljs-string">&quot;YAMLWarning&quot;</span>,e,t,s)}}<span class="hljs-keyword">const</span> <span class="hljs-title function_">Bs</span>=(<span class="hljs-params">n,e</span>)=&gt;<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>{<span class="hljs-keyword">if</span>(t.<span class="hljs-property">pos</span>[<span class="hljs-number">0</span>]===-<span class="hljs-number">1</span>)<span class="hljs-keyword">return</span>;t.<span class="hljs-property">linePos</span>=t.<span class="hljs-property">pos</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span>e.<span class="hljs-title function_">linePos</span>(a));<span class="hljs-keyword">const</span>{<span class="hljs-attr">line</span>:s,<span class="hljs-attr">col</span>:i}=t.<span class="hljs-property">linePos</span>[<span class="hljs-number">0</span>];t.<span class="hljs-property">message</span>+=<span class="hljs-string">` at line <span class="hljs-subst">${s}</span>, column <span class="hljs-subst">${i}</span>`</span>;<span class="hljs-keyword">let</span> r=i-<span class="hljs-number">1</span>,l=n.<span class="hljs-title function_">substring</span>(e.<span class="hljs-property">lineStarts</span>[s-<span class="hljs-number">1</span>],e.<span class="hljs-property">lineStarts</span>[s]).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[\n\r]+$/</span>,<span class="hljs-string">&quot;&quot;</span>);<span class="hljs-keyword">if</span>(r&gt;=<span class="hljs-number">60</span>&amp;&amp;l.<span class="hljs-property">length</span>&gt;<span class="hljs-number">80</span>){<span class="hljs-keyword">const</span> a=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(r-<span class="hljs-number">39</span>,l.<span class="hljs-property">length</span>-<span class="hljs-number">79</span>);l=<span class="hljs-string">&quot;\u2026&quot;</span>+l.<span class="hljs-title function_">substring</span>(a),r-=a-<span class="hljs-number">1</span>}<span class="hljs-keyword">if</span>(l.<span class="hljs-property">length</span>&gt;<span class="hljs-number">80</span>&amp;&amp;(l=l.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,<span class="hljs-number">79</span>)+<span class="hljs-string">&quot;\u2026&quot;</span>),s&gt;<span class="hljs-number">1</span>&amp;&amp;<span class="hljs-regexp">/^ *$/</span>.<span class="hljs-title function_">test</span>(l.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,r))){<span class="hljs-keyword">let</span> a=n.<span class="hljs-title function_">substring</span>(e.<span class="hljs-property">lineStarts</span>[s-<span class="hljs-number">2</span>],e.<span class="hljs-property">lineStarts</span>[s-<span class="hljs-number">1</span>]);a.<span class="hljs-property">length</span>&gt;<span class="hljs-number">80</span>&amp;&amp;(a=a.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,<span class="hljs-number">79</span>)+<span class="hljs-string">`\u2026
`</span>),l=a+l}<span class="hljs-keyword">if</span>(<span class="hljs-regexp">/[^ ]/</span>.<span class="hljs-title function_">test</span>(l)){<span class="hljs-keyword">let</span> a=<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> o=t.<span class="hljs-property">linePos</span>[<span class="hljs-number">1</span>];o&amp;&amp;o.<span class="hljs-property">line</span>===s&amp;&amp;o.<span class="hljs-property">col</span>&gt;i&amp;&amp;(a=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(o.<span class="hljs-property">col</span>-i,<span class="hljs-number">80</span>-r));<span class="hljs-keyword">const</span> c=<span class="hljs-string">&quot; &quot;</span>.<span class="hljs-title function_">repeat</span>(r)+<span class="hljs-string">&quot;^&quot;</span>.<span class="hljs-title function_">repeat</span>(a);t.<span class="hljs-property">message</span>+=<span class="hljs-string">`:

<span class="hljs-subst">${l}</span>
<span class="hljs-subst">${c}</span>
`</span>}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">De</span>(<span class="hljs-params">n,{flow:e,indicator:t,next:s,offset:i,onError:r,startOnNewline:l}</span>){<span class="hljs-keyword">let</span> a=!<span class="hljs-number">1</span>,o=l,c=l,u=<span class="hljs-string">&quot;&quot;</span>,f=<span class="hljs-string">&quot;&quot;</span>,h=!<span class="hljs-number">1</span>,p=!<span class="hljs-number">1</span>,y=!<span class="hljs-number">1</span>,d=<span class="hljs-literal">null</span>,g=<span class="hljs-literal">null</span>,w=<span class="hljs-literal">null</span>,b=<span class="hljs-literal">null</span>,k=<span class="hljs-literal">null</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> S <span class="hljs-keyword">of</span> n)<span class="hljs-keyword">switch</span>(y&amp;&amp;(S.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;space&quot;</span>&amp;&amp;S.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;newline&quot;</span>&amp;&amp;S.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;comma&quot;</span>&amp;&amp;<span class="hljs-title function_">r</span>(S.<span class="hljs-property">offset</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Tags and anchors must be separated from the next token by white space&quot;</span>),y=!<span class="hljs-number">1</span>),S.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:!e&amp;&amp;o&amp;&amp;t!==<span class="hljs-string">&quot;doc-start&quot;</span>&amp;&amp;S.<span class="hljs-property">source</span>[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;	&quot;</span>&amp;&amp;<span class="hljs-title function_">r</span>(S,<span class="hljs-string">&quot;TAB_AS_INDENT&quot;</span>,<span class="hljs-string">&quot;Tabs are not allowed as indentation&quot;</span>),c=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:{c||<span class="hljs-title function_">r</span>(S,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Comments must be separated from other tokens by white space characters&quot;</span>);<span class="hljs-keyword">const</span> C=S.<span class="hljs-property">source</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>)||<span class="hljs-string">&quot; &quot;</span>;u?u+=f+<span class="hljs-attr">C</span>:u=C,f=<span class="hljs-string">&quot;&quot;</span>,o=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:o?u?u+=S.<span class="hljs-property">source</span>:a=!<span class="hljs-number">0</span>:f+=S.<span class="hljs-property">source</span>,o=!<span class="hljs-number">0</span>,h=!<span class="hljs-number">0</span>,(d||g)&amp;&amp;(p=!<span class="hljs-number">0</span>),c=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;anchor&quot;</span>:d&amp;&amp;<span class="hljs-title function_">r</span>(S,<span class="hljs-string">&quot;MULTIPLE_ANCHORS&quot;</span>,<span class="hljs-string">&quot;A node can have at most one anchor&quot;</span>),S.<span class="hljs-property">source</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">&quot;:&quot;</span>)&amp;&amp;<span class="hljs-title function_">r</span>(S.<span class="hljs-property">offset</span>+S.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>,<span class="hljs-string">&quot;BAD_ALIAS&quot;</span>,<span class="hljs-string">&quot;Anchor ending in : is ambiguous&quot;</span>,!<span class="hljs-number">0</span>),d=S,k===<span class="hljs-literal">null</span>&amp;&amp;(k=S.<span class="hljs-property">offset</span>),o=!<span class="hljs-number">1</span>,c=!<span class="hljs-number">1</span>,y=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;tag&quot;</span>:{g&amp;&amp;<span class="hljs-title function_">r</span>(S,<span class="hljs-string">&quot;MULTIPLE_TAGS&quot;</span>,<span class="hljs-string">&quot;A node can have at most one tag&quot;</span>),g=S,k===<span class="hljs-literal">null</span>&amp;&amp;(k=S.<span class="hljs-property">offset</span>),o=!<span class="hljs-number">1</span>,c=!<span class="hljs-number">1</span>,y=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span> <span class="hljs-attr">t</span>:(d||g)&amp;&amp;<span class="hljs-title function_">r</span>(S,<span class="hljs-string">&quot;BAD_PROP_ORDER&quot;</span>,<span class="hljs-string">`Anchors and tags must be after the <span class="hljs-subst">${S.source}</span> indicator`</span>),b&amp;&amp;<span class="hljs-title function_">r</span>(S,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Unexpected <span class="hljs-subst">${S.source}</span> in <span class="hljs-subst">${e!=<span class="hljs-literal">null</span>?e:<span class="hljs-string">&quot;collection&quot;</span>}</span>`</span>),b=S,o=!<span class="hljs-number">1</span>,c=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comma&quot;</span>:<span class="hljs-keyword">if</span>(e){w&amp;&amp;<span class="hljs-title function_">r</span>(S,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Unexpected , in <span class="hljs-subst">${e}</span>`</span>),w=S,o=!<span class="hljs-number">1</span>,c=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}<span class="hljs-attr">default</span>:<span class="hljs-title function_">r</span>(S,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Unexpected <span class="hljs-subst">${S.type}</span> token`</span>),o=!<span class="hljs-number">1</span>,c=!<span class="hljs-number">1</span>}<span class="hljs-keyword">const</span> O=n[n.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>],_=O?O.<span class="hljs-property">offset</span>+O.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>:i;<span class="hljs-keyword">return</span> y&amp;&amp;s&amp;&amp;s.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;space&quot;</span>&amp;&amp;s.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;newline&quot;</span>&amp;&amp;s.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;comma&quot;</span>&amp;&amp;(s.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;scalar&quot;</span>||s.<span class="hljs-property">source</span>!==<span class="hljs-string">&quot;&quot;</span>)&amp;&amp;<span class="hljs-title function_">r</span>(s.<span class="hljs-property">offset</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Tags and anchors must be separated from the next token by white space&quot;</span>),{<span class="hljs-attr">comma</span>:w,<span class="hljs-attr">found</span>:b,<span class="hljs-attr">spaceBefore</span>:a,<span class="hljs-attr">comment</span>:u,<span class="hljs-attr">hasNewline</span>:h,<span class="hljs-attr">hasNewlineAfterProp</span>:p,<span class="hljs-attr">anchor</span>:d,<span class="hljs-attr">tag</span>:g,<span class="hljs-attr">end</span>:_,<span class="hljs-attr">start</span>:k!=<span class="hljs-literal">null</span>?<span class="hljs-attr">k</span>:_}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">xe</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">if</span>(!n)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<span class="hljs-keyword">switch</span>(n.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;alias&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:<span class="hljs-keyword">if</span>(n.<span class="hljs-property">source</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">`
`</span>))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(n.<span class="hljs-property">end</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> e <span class="hljs-keyword">of</span> n.<span class="hljs-property">end</span>)<span class="hljs-keyword">if</span>(e.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-collection&quot;</span>:<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> e <span class="hljs-keyword">of</span> n.<span class="hljs-property">items</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> t <span class="hljs-keyword">of</span> e.<span class="hljs-property">start</span>)<span class="hljs-keyword">if</span>(t.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(e.<span class="hljs-property">sep</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> t <span class="hljs-keyword">of</span> e.<span class="hljs-property">sep</span>)<span class="hljs-keyword">if</span>(t.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">if</span>(<span class="hljs-title function_">xe</span>(e.<span class="hljs-property">key</span>)||<span class="hljs-title function_">xe</span>(e.<span class="hljs-property">value</span>))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Pt</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">if</span>((e==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:e.<span class="hljs-property">type</span>)===<span class="hljs-string">&quot;flow-collection&quot;</span>){<span class="hljs-keyword">const</span> s=e.<span class="hljs-property">end</span>[<span class="hljs-number">0</span>];s.<span class="hljs-property">indent</span>===n&amp;&amp;(s.<span class="hljs-property">source</span>===<span class="hljs-string">&quot;]&quot;</span>||s.<span class="hljs-property">source</span>===<span class="hljs-string">&quot;}&quot;</span>)&amp;&amp;<span class="hljs-title function_">xe</span>(e)&amp;&amp;<span class="hljs-title function_">t</span>(s,<span class="hljs-string">&quot;BAD_INDENT&quot;</span>,<span class="hljs-string">&quot;Flow end indicator should be more indented than parent&quot;</span>,!<span class="hljs-number">0</span>)}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ps</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">uniqueKeys</span>:s}=n.<span class="hljs-property">options</span>;<span class="hljs-keyword">if</span>(s===!<span class="hljs-number">1</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> i=<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;function&quot;</span>?<span class="hljs-attr">s</span>:<span class="hljs-function">(<span class="hljs-params">r,l</span>)=&gt;</span>r===l||<span class="hljs-title function_">L</span>(r)&amp;&amp;<span class="hljs-title function_">L</span>(l)&amp;&amp;r.<span class="hljs-property">value</span>===l.<span class="hljs-property">value</span>&amp;&amp;!(r.<span class="hljs-property">value</span>===<span class="hljs-string">&quot;&lt;&lt;&quot;</span>&amp;&amp;n.<span class="hljs-property">schema</span>.<span class="hljs-property">merge</span>);<span class="hljs-keyword">return</span> e.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span><span class="hljs-title function_">i</span>(r.<span class="hljs-property">key</span>,t))}<span class="hljs-keyword">const</span> js=<span class="hljs-string">&quot;All mapping items must start at the same column&quot;</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">Jn</span>(<span class="hljs-params">{composeNode:n,composeEmptyNode:e},t,s,i</span>){<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">const</span> r=<span class="hljs-keyword">new</span> <span class="hljs-title function_">X</span>(t.<span class="hljs-property">schema</span>);t.<span class="hljs-property">atRoot</span>&amp;&amp;(t.<span class="hljs-property">atRoot</span>=!<span class="hljs-number">1</span>);<span class="hljs-keyword">let</span> l=s.<span class="hljs-property">offset</span>,a=<span class="hljs-literal">null</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> c <span class="hljs-keyword">of</span> s.<span class="hljs-property">items</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">start</span>:u,<span class="hljs-attr">key</span>:f,<span class="hljs-attr">sep</span>:h,<span class="hljs-attr">value</span>:p}=c,y=<span class="hljs-title class_">De</span>(u,{<span class="hljs-attr">indicator</span>:<span class="hljs-string">&quot;explicit-key-ind&quot;</span>,<span class="hljs-attr">next</span>:f!=<span class="hljs-literal">null</span>?<span class="hljs-attr">f</span>:h==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:h[<span class="hljs-number">0</span>],<span class="hljs-attr">offset</span>:l,<span class="hljs-attr">onError</span>:i,<span class="hljs-attr">startOnNewline</span>:!<span class="hljs-number">0</span>}),d=!y.<span class="hljs-property">found</span>;<span class="hljs-keyword">if</span>(d){<span class="hljs-keyword">if</span>(f&amp;&amp;(f.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-seq&quot;</span>?<span class="hljs-title function_">i</span>(l,<span class="hljs-string">&quot;BLOCK_AS_IMPLICIT_KEY&quot;</span>,<span class="hljs-string">&quot;A block sequence may not be used as an implicit map key&quot;</span>):<span class="hljs-string">&quot;indent&quot;</span><span class="hljs-keyword">in</span> f&amp;&amp;f.<span class="hljs-property">indent</span>!==s.<span class="hljs-property">indent</span>&amp;&amp;<span class="hljs-title function_">i</span>(l,<span class="hljs-string">&quot;BAD_INDENT&quot;</span>,js)),!y.<span class="hljs-property">anchor</span>&amp;&amp;!y.<span class="hljs-property">tag</span>&amp;&amp;!h){a=y.<span class="hljs-property">end</span>,y.<span class="hljs-property">comment</span>&amp;&amp;(r.<span class="hljs-property">comment</span>?r.<span class="hljs-property">comment</span>+=<span class="hljs-string">`
`</span>+y.<span class="hljs-property">comment</span>:r.<span class="hljs-property">comment</span>=y.<span class="hljs-property">comment</span>);<span class="hljs-keyword">continue</span>}(y.<span class="hljs-property">hasNewlineAfterProp</span>||<span class="hljs-title function_">xe</span>(f))&amp;&amp;<span class="hljs-title function_">i</span>(f!=<span class="hljs-literal">null</span>?<span class="hljs-attr">f</span>:u[u.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>],<span class="hljs-string">&quot;MULTILINE_IMPLICIT_KEY&quot;</span>,<span class="hljs-string">&quot;Implicit keys need to be on a single line&quot;</span>)}<span class="hljs-title function_">else</span>((o=y.<span class="hljs-property">found</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:o.<span class="hljs-property">indent</span>)!==s.<span class="hljs-property">indent</span>&amp;&amp;<span class="hljs-title function_">i</span>(l,<span class="hljs-string">&quot;BAD_INDENT&quot;</span>,js);<span class="hljs-keyword">const</span> g=y.<span class="hljs-property">end</span>,w=f?<span class="hljs-title function_">n</span>(t,f,y,i):<span class="hljs-title function_">e</span>(t,g,u,<span class="hljs-literal">null</span>,y,i);t.<span class="hljs-property">schema</span>.<span class="hljs-property">compat</span>&amp;&amp;<span class="hljs-title class_">Pt</span>(s.<span class="hljs-property">indent</span>,f,i),<span class="hljs-title class_">Ps</span>(t,r.<span class="hljs-property">items</span>,w)&amp;&amp;<span class="hljs-title function_">i</span>(g,<span class="hljs-string">&quot;DUPLICATE_KEY&quot;</span>,<span class="hljs-string">&quot;Map keys must be unique&quot;</span>);<span class="hljs-keyword">const</span> b=<span class="hljs-title class_">De</span>(h!=<span class="hljs-literal">null</span>?<span class="hljs-attr">h</span>:[],{<span class="hljs-attr">indicator</span>:<span class="hljs-string">&quot;map-value-ind&quot;</span>,<span class="hljs-attr">next</span>:p,<span class="hljs-attr">offset</span>:w.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>],<span class="hljs-attr">onError</span>:i,<span class="hljs-attr">startOnNewline</span>:!f||f.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-scalar&quot;</span>});<span class="hljs-keyword">if</span>(l=b.<span class="hljs-property">end</span>,b.<span class="hljs-property">found</span>){d&amp;&amp;((p==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:p.<span class="hljs-property">type</span>)===<span class="hljs-string">&quot;block-map&quot;</span>&amp;&amp;!b.<span class="hljs-property">hasNewline</span>&amp;&amp;<span class="hljs-title function_">i</span>(l,<span class="hljs-string">&quot;BLOCK_AS_IMPLICIT_KEY&quot;</span>,<span class="hljs-string">&quot;Nested mappings are not allowed in compact mappings&quot;</span>),t.<span class="hljs-property">options</span>.<span class="hljs-property">strict</span>&amp;&amp;y.<span class="hljs-property">start</span>&lt;b.<span class="hljs-property">found</span>.<span class="hljs-property">offset</span>-<span class="hljs-number">1024</span>&amp;&amp;<span class="hljs-title function_">i</span>(w.<span class="hljs-property">range</span>,<span class="hljs-string">&quot;KEY_OVER_1024_CHARS&quot;</span>,<span class="hljs-string">&quot;The : indicator must be at most 1024 chars after the start of an implicit block mapping key&quot;</span>));<span class="hljs-keyword">const</span> k=p?<span class="hljs-title function_">n</span>(t,p,b,i):<span class="hljs-title function_">e</span>(t,l,h,<span class="hljs-literal">null</span>,b,i);t.<span class="hljs-property">schema</span>.<span class="hljs-property">compat</span>&amp;&amp;<span class="hljs-title class_">Pt</span>(s.<span class="hljs-property">indent</span>,p,i),l=k.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>];<span class="hljs-keyword">const</span> O=<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(w,k);t.<span class="hljs-property">options</span>.<span class="hljs-property">keepSourceTokens</span>&amp;&amp;(O.<span class="hljs-property">srcToken</span>=c),r.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(O)}<span class="hljs-keyword">else</span>{d&amp;&amp;<span class="hljs-title function_">i</span>(w.<span class="hljs-property">range</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Implicit map keys need to be followed by map values&quot;</span>),b.<span class="hljs-property">comment</span>&amp;&amp;(w.<span class="hljs-property">comment</span>?w.<span class="hljs-property">comment</span>+=<span class="hljs-string">`
`</span>+b.<span class="hljs-property">comment</span>:w.<span class="hljs-property">comment</span>=b.<span class="hljs-property">comment</span>);<span class="hljs-keyword">const</span> k=<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(w);t.<span class="hljs-property">options</span>.<span class="hljs-property">keepSourceTokens</span>&amp;&amp;(k.<span class="hljs-property">srcToken</span>=c),r.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(k)}}<span class="hljs-keyword">return</span> a&amp;&amp;a&lt;l&amp;&amp;<span class="hljs-title function_">i</span>(a,<span class="hljs-string">&quot;IMPOSSIBLE&quot;</span>,<span class="hljs-string">&quot;Map comment with trailing content&quot;</span>),r.<span class="hljs-property">range</span>=[s.<span class="hljs-property">offset</span>,l,a!=<span class="hljs-literal">null</span>?<span class="hljs-attr">a</span>:l],r}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Qn</span>(<span class="hljs-params">{composeNode:n,composeEmptyNode:e},t,s,i</span>){<span class="hljs-keyword">const</span> r=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Le</span>(t.<span class="hljs-property">schema</span>);t.<span class="hljs-property">atRoot</span>&amp;&amp;(t.<span class="hljs-property">atRoot</span>=!<span class="hljs-number">1</span>);<span class="hljs-keyword">let</span> l=s.<span class="hljs-property">offset</span>,a=<span class="hljs-literal">null</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>{<span class="hljs-attr">start</span>:o,<span class="hljs-attr">value</span>:c}<span class="hljs-keyword">of</span> s.<span class="hljs-property">items</span>){<span class="hljs-keyword">const</span> u=<span class="hljs-title class_">De</span>(o,{<span class="hljs-attr">indicator</span>:<span class="hljs-string">&quot;seq-item-ind&quot;</span>,<span class="hljs-attr">next</span>:c,<span class="hljs-attr">offset</span>:l,<span class="hljs-attr">onError</span>:i,<span class="hljs-attr">startOnNewline</span>:!<span class="hljs-number">0</span>});<span class="hljs-keyword">if</span>(!u.<span class="hljs-property">found</span>)<span class="hljs-keyword">if</span>(u.<span class="hljs-property">anchor</span>||u.<span class="hljs-property">tag</span>||c)c&amp;&amp;c.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-seq&quot;</span>?<span class="hljs-title function_">i</span>(u.<span class="hljs-property">end</span>,<span class="hljs-string">&quot;BAD_INDENT&quot;</span>,<span class="hljs-string">&quot;All sequence items must start at the same column&quot;</span>):<span class="hljs-title function_">i</span>(l,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Sequence item without - indicator&quot;</span>);<span class="hljs-keyword">else</span>{a=u.<span class="hljs-property">end</span>,u.<span class="hljs-property">comment</span>&amp;&amp;(r.<span class="hljs-property">comment</span>=u.<span class="hljs-property">comment</span>);<span class="hljs-keyword">continue</span>}<span class="hljs-keyword">const</span> f=c?<span class="hljs-title function_">n</span>(t,c,u,i):<span class="hljs-title function_">e</span>(t,u.<span class="hljs-property">end</span>,o,<span class="hljs-literal">null</span>,u,i);t.<span class="hljs-property">schema</span>.<span class="hljs-property">compat</span>&amp;&amp;<span class="hljs-title class_">Pt</span>(s.<span class="hljs-property">indent</span>,c,i),l=f.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>],r.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(f)}<span class="hljs-keyword">return</span> r.<span class="hljs-property">range</span>=[s.<span class="hljs-property">offset</span>,l,a!=<span class="hljs-literal">null</span>?<span class="hljs-attr">a</span>:l],r}<span class="hljs-keyword">function</span> <span class="hljs-title function_">He</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">let</span> i=<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">if</span>(n){<span class="hljs-keyword">let</span> r=!<span class="hljs-number">1</span>,l=<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> n){<span class="hljs-keyword">const</span>{<span class="hljs-attr">source</span>:o,<span class="hljs-attr">type</span>:c}=a;<span class="hljs-keyword">switch</span>(c){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:r=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:{t&amp;&amp;!r&amp;&amp;<span class="hljs-title function_">s</span>(a,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Comments must be separated from other tokens by white space characters&quot;</span>);<span class="hljs-keyword">const</span> u=o.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>)||<span class="hljs-string">&quot; &quot;</span>;i?i+=l+<span class="hljs-attr">u</span>:i=u,l=<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:i&amp;&amp;(l+=o),r=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:<span class="hljs-title function_">s</span>(a,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Unexpected <span class="hljs-subst">${c}</span> at node end`</span>)}e+=o.<span class="hljs-property">length</span>}}<span class="hljs-keyword">return</span>{<span class="hljs-attr">comment</span>:i,<span class="hljs-attr">offset</span>:e}}<span class="hljs-keyword">const</span> jt=<span class="hljs-string">&quot;Block collections are not allowed within flow collections&quot;</span>,<span class="hljs-title class_">Ft</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>n&amp;&amp;(n.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-map&quot;</span>||n.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-seq&quot;</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">Wn</span>(<span class="hljs-params">{composeNode:n,composeEmptyNode:e},t,s,i</span>){<span class="hljs-keyword">var</span> y;<span class="hljs-keyword">const</span> r=s.<span class="hljs-property">start</span>.<span class="hljs-property">source</span>===<span class="hljs-string">&quot;{&quot;</span>,l=r?<span class="hljs-string">&quot;flow map&quot;</span>:<span class="hljs-string">&quot;flow sequence&quot;</span>,a=r?<span class="hljs-keyword">new</span> <span class="hljs-title function_">X</span>(t.<span class="hljs-property">schema</span>):<span class="hljs-keyword">new</span> <span class="hljs-title class_">Le</span>(t.<span class="hljs-property">schema</span>);a.<span class="hljs-property">flow</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> o=t.<span class="hljs-property">atRoot</span>;o&amp;&amp;(t.<span class="hljs-property">atRoot</span>=!<span class="hljs-number">1</span>);<span class="hljs-keyword">let</span> c=s.<span class="hljs-property">offset</span>+s.<span class="hljs-property">start</span>.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> d=<span class="hljs-number">0</span>;d&lt;s.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;++d){<span class="hljs-keyword">const</span> g=s.<span class="hljs-property">items</span>[d],{<span class="hljs-attr">start</span>:w,<span class="hljs-attr">key</span>:b,<span class="hljs-attr">sep</span>:k,<span class="hljs-attr">value</span>:O}=g,_=<span class="hljs-title class_">De</span>(w,{<span class="hljs-attr">flow</span>:l,<span class="hljs-attr">indicator</span>:<span class="hljs-string">&quot;explicit-key-ind&quot;</span>,<span class="hljs-attr">next</span>:b!=<span class="hljs-literal">null</span>?<span class="hljs-attr">b</span>:k==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:k[<span class="hljs-number">0</span>],<span class="hljs-attr">offset</span>:c,<span class="hljs-attr">onError</span>:i,<span class="hljs-attr">startOnNewline</span>:!<span class="hljs-number">1</span>});<span class="hljs-keyword">if</span>(!_.<span class="hljs-property">found</span>){<span class="hljs-keyword">if</span>(!_.<span class="hljs-property">anchor</span>&amp;&amp;!_.<span class="hljs-property">tag</span>&amp;&amp;!k&amp;&amp;!O){d===<span class="hljs-number">0</span>&amp;&amp;_.<span class="hljs-property">comma</span>?<span class="hljs-title function_">i</span>(_.<span class="hljs-property">comma</span>,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Unexpected , in <span class="hljs-subst">${l}</span>`</span>):d&lt;s.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>&amp;&amp;<span class="hljs-title function_">i</span>(_.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Unexpected empty item in <span class="hljs-subst">${l}</span>`</span>),_.<span class="hljs-property">comment</span>&amp;&amp;(a.<span class="hljs-property">comment</span>?a.<span class="hljs-property">comment</span>+=<span class="hljs-string">`
`</span>+_.<span class="hljs-property">comment</span>:a.<span class="hljs-property">comment</span>=_.<span class="hljs-property">comment</span>),c=_.<span class="hljs-property">end</span>;<span class="hljs-keyword">continue</span>}!r&amp;&amp;t.<span class="hljs-property">options</span>.<span class="hljs-property">strict</span>&amp;&amp;<span class="hljs-title function_">xe</span>(b)&amp;&amp;<span class="hljs-title function_">i</span>(b,<span class="hljs-string">&quot;MULTILINE_IMPLICIT_KEY&quot;</span>,<span class="hljs-string">&quot;Implicit keys of flow sequence pairs need to be on a single line&quot;</span>)}<span class="hljs-keyword">if</span>(d===<span class="hljs-number">0</span>)_.<span class="hljs-property">comma</span>&amp;&amp;<span class="hljs-title function_">i</span>(_.<span class="hljs-property">comma</span>,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Unexpected , in <span class="hljs-subst">${l}</span>`</span>);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(_.<span class="hljs-property">comma</span>||<span class="hljs-title function_">i</span>(_.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">`Missing , between <span class="hljs-subst">${l}</span> items`</span>),_.<span class="hljs-property">comment</span>){<span class="hljs-keyword">let</span> S=<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-attr">e</span>:<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> C <span class="hljs-keyword">of</span> w)<span class="hljs-keyword">switch</span>(C.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comma&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:S=C.<span class="hljs-property">source</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>);<span class="hljs-keyword">break</span> e;<span class="hljs-attr">default</span>:<span class="hljs-keyword">break</span> e}<span class="hljs-keyword">if</span>(S){<span class="hljs-keyword">let</span> C=a.<span class="hljs-property">items</span>[a.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<span class="hljs-title function_">D</span>(C)&amp;&amp;(C=(y=C.<span class="hljs-property">value</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">y</span>:C.<span class="hljs-property">key</span>),C.<span class="hljs-property">comment</span>?C.<span class="hljs-property">comment</span>+=<span class="hljs-string">`
`</span>+<span class="hljs-attr">S</span>:C.<span class="hljs-property">comment</span>=S,_.<span class="hljs-property">comment</span>=_.<span class="hljs-property">comment</span>.<span class="hljs-title function_">substring</span>(S.<span class="hljs-property">length</span>+<span class="hljs-number">1</span>)}}<span class="hljs-keyword">if</span>(!r&amp;&amp;!k&amp;&amp;!_.<span class="hljs-property">found</span>){<span class="hljs-keyword">const</span> S=O?<span class="hljs-title function_">n</span>(t,O,_,i):<span class="hljs-title function_">e</span>(t,_.<span class="hljs-property">end</span>,k,<span class="hljs-literal">null</span>,_,i);a.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(S),c=S.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>],<span class="hljs-title class_">Ft</span>(O)&amp;&amp;<span class="hljs-title function_">i</span>(S.<span class="hljs-property">range</span>,<span class="hljs-string">&quot;BLOCK_IN_FLOW&quot;</span>,jt)}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> S=_.<span class="hljs-property">end</span>,C=b?<span class="hljs-title function_">n</span>(t,b,_,i):<span class="hljs-title function_">e</span>(t,S,w,<span class="hljs-literal">null</span>,_,i);<span class="hljs-title class_">Ft</span>(b)&amp;&amp;<span class="hljs-title function_">i</span>(C.<span class="hljs-property">range</span>,<span class="hljs-string">&quot;BLOCK_IN_FLOW&quot;</span>,jt);<span class="hljs-keyword">const</span> K=<span class="hljs-title class_">De</span>(k!=<span class="hljs-literal">null</span>?<span class="hljs-attr">k</span>:[],{<span class="hljs-attr">flow</span>:l,<span class="hljs-attr">indicator</span>:<span class="hljs-string">&quot;map-value-ind&quot;</span>,<span class="hljs-attr">next</span>:O,<span class="hljs-attr">offset</span>:C.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>],<span class="hljs-attr">onError</span>:i,<span class="hljs-attr">startOnNewline</span>:!<span class="hljs-number">1</span>});<span class="hljs-keyword">if</span>(K.<span class="hljs-property">found</span>){<span class="hljs-keyword">if</span>(!r&amp;&amp;!_.<span class="hljs-property">found</span>&amp;&amp;t.<span class="hljs-property">options</span>.<span class="hljs-property">strict</span>){<span class="hljs-keyword">if</span>(k)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> J <span class="hljs-keyword">of</span> k){<span class="hljs-keyword">if</span>(J===K.<span class="hljs-property">found</span>)<span class="hljs-keyword">break</span>;<span class="hljs-keyword">if</span>(J.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>){<span class="hljs-title function_">i</span>(J,<span class="hljs-string">&quot;MULTILINE_IMPLICIT_KEY&quot;</span>,<span class="hljs-string">&quot;Implicit keys of flow sequence pairs need to be on a single line&quot;</span>);<span class="hljs-keyword">break</span>}}_.<span class="hljs-property">start</span>&lt;K.<span class="hljs-property">found</span>.<span class="hljs-property">offset</span>-<span class="hljs-number">1024</span>&amp;&amp;<span class="hljs-title function_">i</span>(K.<span class="hljs-property">found</span>,<span class="hljs-string">&quot;KEY_OVER_1024_CHARS&quot;</span>,<span class="hljs-string">&quot;The : indicator must be at most 1024 chars after the start of an implicit flow sequence key&quot;</span>)}}<span class="hljs-keyword">else</span> O&amp;&amp;(<span class="hljs-string">&quot;source&quot;</span><span class="hljs-keyword">in</span> O&amp;&amp;O.<span class="hljs-property">source</span>&amp;&amp;O.<span class="hljs-property">source</span>[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;:&quot;</span>?<span class="hljs-title function_">i</span>(O,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">`Missing space after : in <span class="hljs-subst">${l}</span>`</span>):<span class="hljs-title function_">i</span>(K.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">`Missing , or : between <span class="hljs-subst">${l}</span> items`</span>));<span class="hljs-keyword">const</span> G=O?<span class="hljs-title function_">n</span>(t,O,K,i):K.<span class="hljs-property">found</span>?<span class="hljs-title function_">e</span>(t,K.<span class="hljs-property">end</span>,k,<span class="hljs-literal">null</span>,K,i):<span class="hljs-literal">null</span>;G?<span class="hljs-title class_">Ft</span>(O)&amp;&amp;<span class="hljs-title function_">i</span>(G.<span class="hljs-property">range</span>,<span class="hljs-string">&quot;BLOCK_IN_FLOW&quot;</span>,jt):K.<span class="hljs-property">comment</span>&amp;&amp;(C.<span class="hljs-property">comment</span>?C.<span class="hljs-property">comment</span>+=<span class="hljs-string">`
`</span>+K.<span class="hljs-property">comment</span>:C.<span class="hljs-property">comment</span>=K.<span class="hljs-property">comment</span>);<span class="hljs-keyword">const</span> we=<span class="hljs-keyword">new</span> <span class="hljs-title function_">V</span>(C,G);<span class="hljs-keyword">if</span>(t.<span class="hljs-property">options</span>.<span class="hljs-property">keepSourceTokens</span>&amp;&amp;(we.<span class="hljs-property">srcToken</span>=g),r){<span class="hljs-keyword">const</span> J=a;<span class="hljs-title class_">Ps</span>(t,J.<span class="hljs-property">items</span>,C)&amp;&amp;<span class="hljs-title function_">i</span>(S,<span class="hljs-string">&quot;DUPLICATE_KEY&quot;</span>,<span class="hljs-string">&quot;Map keys must be unique&quot;</span>),J.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(we)}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> J=<span class="hljs-keyword">new</span> <span class="hljs-title function_">X</span>(t.<span class="hljs-property">schema</span>);J.<span class="hljs-property">flow</span>=!<span class="hljs-number">0</span>,J.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(we),a.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(J)}c=G?G.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>]:K.<span class="hljs-property">end</span>}}<span class="hljs-keyword">const</span> u=r?<span class="hljs-string">&quot;}&quot;</span>:<span class="hljs-string">&quot;]&quot;</span>,[f,...h]=s.<span class="hljs-property">end</span>;<span class="hljs-keyword">let</span> p=c;<span class="hljs-keyword">if</span>(f&amp;&amp;f.<span class="hljs-property">source</span>===u)p=f.<span class="hljs-property">offset</span>+f.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> d=l[<span class="hljs-number">0</span>].<span class="hljs-title function_">toUpperCase</span>()+l.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>),g=o?<span class="hljs-string">`<span class="hljs-subst">${d}</span> must end with a <span class="hljs-subst">${u}</span>`</span>:<span class="hljs-string">`<span class="hljs-subst">${d}</span> in block collection must be sufficiently indented and end with a <span class="hljs-subst">${u}</span>`</span>;<span class="hljs-title function_">i</span>(c,o?<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>:<span class="hljs-string">&quot;BAD_INDENT&quot;</span>,g),f&amp;&amp;f.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>!==<span class="hljs-number">1</span>&amp;&amp;h.<span class="hljs-title function_">unshift</span>(f)}<span class="hljs-keyword">if</span>(h.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">const</span> d=<span class="hljs-title class_">He</span>(h,p,t.<span class="hljs-property">options</span>.<span class="hljs-property">strict</span>,i);d.<span class="hljs-property">comment</span>&amp;&amp;(a.<span class="hljs-property">comment</span>?a.<span class="hljs-property">comment</span>+=<span class="hljs-string">`
`</span>+d.<span class="hljs-property">comment</span>:a.<span class="hljs-property">comment</span>=d.<span class="hljs-property">comment</span>),a.<span class="hljs-property">range</span>=[s.<span class="hljs-property">offset</span>,p,d.<span class="hljs-property">offset</span>]}<span class="hljs-keyword">else</span> a.<span class="hljs-property">range</span>=[s.<span class="hljs-property">offset</span>,p,p];<span class="hljs-keyword">return</span> a}<span class="hljs-keyword">function</span> <span class="hljs-title function_">zn</span>(<span class="hljs-params">n,e,t,s,i</span>){<span class="hljs-keyword">let</span> r;<span class="hljs-keyword">switch</span>(t.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-map&quot;</span>:{r=<span class="hljs-title class_">Jn</span>(n,e,t,i);<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-seq&quot;</span>:{r=<span class="hljs-title class_">Qn</span>(n,e,t,i);<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-collection&quot;</span>:{r=<span class="hljs-title class_">Wn</span>(n,e,t,i);<span class="hljs-keyword">break</span>}}<span class="hljs-keyword">if</span>(!s)<span class="hljs-keyword">return</span> r;<span class="hljs-keyword">const</span> l=e.<span class="hljs-property">directives</span>.<span class="hljs-title function_">tagName</span>(s.<span class="hljs-property">source</span>,<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span><span class="hljs-title function_">i</span>(s,<span class="hljs-string">&quot;TAG_RESOLVE_FAILED&quot;</span>,h));<span class="hljs-keyword">if</span>(!l)<span class="hljs-keyword">return</span> r;<span class="hljs-keyword">const</span> a=r.<span class="hljs-property">constructor</span>;<span class="hljs-keyword">if</span>(l===<span class="hljs-string">&quot;!&quot;</span>||l===a.<span class="hljs-property">tagName</span>)<span class="hljs-keyword">return</span> r.<span class="hljs-property">tag</span>=a.<span class="hljs-property">tagName</span>,r;<span class="hljs-keyword">const</span> o=<span class="hljs-title function_">_e</span>(r)?<span class="hljs-string">&quot;map&quot;</span>:<span class="hljs-string">&quot;seq&quot;</span>;<span class="hljs-keyword">let</span> c=e.<span class="hljs-property">schema</span>.<span class="hljs-property">tags</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>h.<span class="hljs-property">collection</span>===o&amp;&amp;h.<span class="hljs-property">tag</span>===l);<span class="hljs-keyword">if</span>(!c){<span class="hljs-keyword">const</span> h=e.<span class="hljs-property">schema</span>.<span class="hljs-property">knownTags</span>[l];<span class="hljs-keyword">if</span>(h&amp;&amp;h.<span class="hljs-property">collection</span>===o)e.<span class="hljs-property">schema</span>.<span class="hljs-property">tags</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},h,{<span class="hljs-attr">default</span>:!<span class="hljs-number">1</span>})),c=h;<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-title function_">i</span>(s,<span class="hljs-string">&quot;TAG_RESOLVE_FAILED&quot;</span>,<span class="hljs-string">`Unresolved tag: <span class="hljs-subst">${l}</span>`</span>,!<span class="hljs-number">0</span>),r.<span class="hljs-property">tag</span>=l,r}<span class="hljs-keyword">const</span> u=c.<span class="hljs-title function_">resolve</span>(r,<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span><span class="hljs-title function_">i</span>(s,<span class="hljs-string">&quot;TAG_RESOLVE_FAILED&quot;</span>,h),e.<span class="hljs-property">options</span>),f=<span class="hljs-title function_">F</span>(u)?<span class="hljs-attr">u</span>:<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(u);<span class="hljs-keyword">return</span> f.<span class="hljs-property">range</span>=r.<span class="hljs-property">range</span>,f.<span class="hljs-property">tag</span>=l,c!=<span class="hljs-literal">null</span>&amp;&amp;c.<span class="hljs-property">format</span>&amp;&amp;(f.<span class="hljs-property">format</span>=c.<span class="hljs-property">format</span>),f}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Xn</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span> s=n.<span class="hljs-property">offset</span>,i=<span class="hljs-title class_">Zn</span>(n,e,t);<span class="hljs-keyword">if</span>(!i)<span class="hljs-keyword">return</span>{<span class="hljs-attr">value</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">type</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">comment</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">range</span>:[s,s,s]};<span class="hljs-keyword">const</span> r=i.<span class="hljs-property">mode</span>===<span class="hljs-string">&quot;&gt;&quot;</span>?A.<span class="hljs-property">BLOCK_FOLDED</span>:A.<span class="hljs-property">BLOCK_LITERAL</span>,l=n.<span class="hljs-property">source</span>?<span class="hljs-title function_">ei</span>(n.<span class="hljs-property">source</span>):[];<span class="hljs-keyword">let</span> a=l.<span class="hljs-property">length</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> d=l.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>;d&gt;=<span class="hljs-number">0</span>;--d){<span class="hljs-keyword">const</span> g=l[d][<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(g===<span class="hljs-string">&quot;&quot;</span>||g===<span class="hljs-string">&quot;\r&quot;</span>)a=d;<span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>}<span class="hljs-keyword">if</span>(a===<span class="hljs-number">0</span>){<span class="hljs-keyword">const</span> d=i.<span class="hljs-property">chomp</span>===<span class="hljs-string">&quot;+&quot;</span>&amp;&amp;l.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>?<span class="hljs-string">`
`</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>,l.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>)):<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">let</span> g=s+i.<span class="hljs-property">length</span>;<span class="hljs-keyword">return</span> n.<span class="hljs-property">source</span>&amp;&amp;(g+=n.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>),{<span class="hljs-attr">value</span>:d,<span class="hljs-attr">type</span>:r,<span class="hljs-attr">comment</span>:i.<span class="hljs-property">comment</span>,<span class="hljs-attr">range</span>:[s,g,g]}}<span class="hljs-keyword">let</span> o=n.<span class="hljs-property">indent</span>+i.<span class="hljs-property">indent</span>,c=n.<span class="hljs-property">offset</span>+i.<span class="hljs-property">length</span>,u=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> d=<span class="hljs-number">0</span>;d&lt;a;++d){<span class="hljs-keyword">const</span>[g,w]=l[d];<span class="hljs-keyword">if</span>(w===<span class="hljs-string">&quot;&quot;</span>||w===<span class="hljs-string">&quot;\r&quot;</span>)i.<span class="hljs-property">indent</span>===<span class="hljs-number">0</span>&amp;&amp;g.<span class="hljs-property">length</span>&gt;o&amp;&amp;(o=g.<span class="hljs-property">length</span>);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(g.<span class="hljs-property">length</span>&lt;o){<span class="hljs-keyword">const</span> b=<span class="hljs-string">&quot;Block scalars with more-indented leading empty lines must use an explicit indentation indicator&quot;</span>;<span class="hljs-title function_">t</span>(c+g.<span class="hljs-property">length</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,b)}i.<span class="hljs-property">indent</span>===<span class="hljs-number">0</span>&amp;&amp;(o=g.<span class="hljs-property">length</span>),u=d;<span class="hljs-keyword">break</span>}c+=g.<span class="hljs-property">length</span>+w.<span class="hljs-property">length</span>+<span class="hljs-number">1</span>}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> d=l.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>;d&gt;=a;--d)l[d][<span class="hljs-number">0</span>].<span class="hljs-property">length</span>&gt;o&amp;&amp;(a=d+<span class="hljs-number">1</span>);<span class="hljs-keyword">let</span> f=<span class="hljs-string">&quot;&quot;</span>,h=<span class="hljs-string">&quot;&quot;</span>,p=!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> d=<span class="hljs-number">0</span>;d&lt;u;++d)f+=l[d][<span class="hljs-number">0</span>].<span class="hljs-title function_">slice</span>(o)+<span class="hljs-string">`
`</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> d=u;d&lt;a;++d){<span class="hljs-keyword">let</span>[g,w]=l[d];c+=g.<span class="hljs-property">length</span>+w.<span class="hljs-property">length</span>+<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> b=w[w.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;\r&quot;</span>;<span class="hljs-keyword">if</span>(b&amp;&amp;(w=w.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>)),w&amp;&amp;g.<span class="hljs-property">length</span>&lt;o){<span class="hljs-keyword">const</span> O=<span class="hljs-string">`Block scalar lines must not be less indented than their <span class="hljs-subst">${i.indent?<span class="hljs-string">&quot;explicit indentation indicator&quot;</span>:<span class="hljs-string">&quot;first line&quot;</span>}</span>`</span>;<span class="hljs-title function_">t</span>(c-w.<span class="hljs-property">length</span>-(b?<span class="hljs-number">2</span>:<span class="hljs-number">1</span>),<span class="hljs-string">&quot;BAD_INDENT&quot;</span>,O),g=<span class="hljs-string">&quot;&quot;</span>}r===A.<span class="hljs-property">BLOCK_LITERAL</span>?(f+=h+g.<span class="hljs-title function_">slice</span>(o)+w,h=<span class="hljs-string">`
`</span>):g.<span class="hljs-property">length</span>&gt;o||w[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;	&quot;</span>?(h===<span class="hljs-string">&quot; &quot;</span>?h=<span class="hljs-string">`
`</span>:!p&amp;&amp;h===<span class="hljs-string">`
`</span>&amp;&amp;(h=<span class="hljs-string">`

`</span>),f+=h+g.<span class="hljs-title function_">slice</span>(o)+w,h=<span class="hljs-string">`
`</span>,p=!<span class="hljs-number">0</span>):w===<span class="hljs-string">&quot;&quot;</span>?h===<span class="hljs-string">`
`</span>?f+=<span class="hljs-string">`
`</span>:h=<span class="hljs-string">`
`</span>:(f+=h+w,h=<span class="hljs-string">&quot; &quot;</span>,p=!<span class="hljs-number">1</span>)}<span class="hljs-keyword">switch</span>(i.<span class="hljs-property">chomp</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;-&quot;</span>:<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;+&quot;</span>:<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> d=a;d&lt;l.<span class="hljs-property">length</span>;++d)f+=<span class="hljs-string">`
`</span>+l[d][<span class="hljs-number">0</span>].<span class="hljs-title function_">slice</span>(o);f[f.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]!==<span class="hljs-string">`
`</span>&amp;&amp;(f+=<span class="hljs-string">`
`</span>);<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:f+=<span class="hljs-string">`
`</span>}<span class="hljs-keyword">const</span> y=s+i.<span class="hljs-property">length</span>+n.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>;<span class="hljs-keyword">return</span>{<span class="hljs-attr">value</span>:f,<span class="hljs-attr">type</span>:r,<span class="hljs-attr">comment</span>:i.<span class="hljs-property">comment</span>,<span class="hljs-attr">range</span>:[s,y,y]}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Zn</span>(<span class="hljs-params">{offset:n,props:e},t,s</span>){<span class="hljs-keyword">if</span>(e[<span class="hljs-number">0</span>].<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;block-scalar-header&quot;</span>)<span class="hljs-keyword">return</span> <span class="hljs-title function_">s</span>(e[<span class="hljs-number">0</span>],<span class="hljs-string">&quot;IMPOSSIBLE&quot;</span>,<span class="hljs-string">&quot;Block scalar header not found&quot;</span>),<span class="hljs-literal">null</span>;<span class="hljs-keyword">const</span>{<span class="hljs-attr">source</span>:i}=e[<span class="hljs-number">0</span>],r=i[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> l=<span class="hljs-number">0</span>,a=<span class="hljs-string">&quot;&quot;</span>,o=-<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> h=<span class="hljs-number">1</span>;h&lt;i.<span class="hljs-property">length</span>;++h){<span class="hljs-keyword">const</span> p=i[h];<span class="hljs-keyword">if</span>(!a&amp;&amp;(p===<span class="hljs-string">&quot;-&quot;</span>||p===<span class="hljs-string">&quot;+&quot;</span>))a=p;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> y=<span class="hljs-title class_">Number</span>(p);!l&amp;&amp;y?l=<span class="hljs-attr">y</span>:o===-<span class="hljs-number">1</span>&amp;&amp;(o=n+h)}}o!==-<span class="hljs-number">1</span>&amp;&amp;<span class="hljs-title function_">s</span>(o,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Block scalar header includes extra characters: <span class="hljs-subst">${i}</span>`</span>);<span class="hljs-keyword">let</span> c=!<span class="hljs-number">1</span>,u=<span class="hljs-string">&quot;&quot;</span>,f=i.<span class="hljs-property">length</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> h=<span class="hljs-number">1</span>;h&lt;e.<span class="hljs-property">length</span>;++h){<span class="hljs-keyword">const</span> p=e[h];<span class="hljs-keyword">switch</span>(p.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:c=!<span class="hljs-number">0</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:f+=p.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:t&amp;&amp;!c&amp;&amp;<span class="hljs-title function_">s</span>(p,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Comments must be separated from other tokens by white space characters&quot;</span>),f+=p.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>,u=p.<span class="hljs-property">source</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;error&quot;</span>:<span class="hljs-title function_">s</span>(p,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,p.<span class="hljs-property">message</span>),f+=p.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>;<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:{<span class="hljs-keyword">const</span> y=<span class="hljs-string">`Unexpected token in block scalar header: <span class="hljs-subst">${p.type}</span>`</span>;<span class="hljs-title function_">s</span>(p,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,y);<span class="hljs-keyword">const</span> d=p.<span class="hljs-property">source</span>;d&amp;&amp;<span class="hljs-keyword">typeof</span> d==<span class="hljs-string">&quot;string&quot;</span>&amp;&amp;(f+=d.<span class="hljs-property">length</span>)}}}<span class="hljs-keyword">return</span>{<span class="hljs-attr">mode</span>:r,<span class="hljs-attr">indent</span>:l,<span class="hljs-attr">chomp</span>:a,<span class="hljs-attr">comment</span>:u,<span class="hljs-attr">length</span>:f}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ei</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span> e=n.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\n( *)/</span>),t=e[<span class="hljs-number">0</span>],s=t.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^( *)/</span>),r=[s!=<span class="hljs-literal">null</span>&amp;&amp;s[<span class="hljs-number">1</span>]?[s[<span class="hljs-number">1</span>],t.<span class="hljs-title function_">slice</span>(s[<span class="hljs-number">1</span>].<span class="hljs-property">length</span>)]:[<span class="hljs-string">&quot;&quot;</span>,t]];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> l=<span class="hljs-number">1</span>;l&lt;e.<span class="hljs-property">length</span>;l+=<span class="hljs-number">2</span>)r.<span class="hljs-title function_">push</span>([e[l],e[l+<span class="hljs-number">1</span>]]);<span class="hljs-keyword">return</span> r}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ti</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">offset</span>:s,<span class="hljs-attr">type</span>:i,<span class="hljs-attr">source</span>:r,<span class="hljs-attr">end</span>:l}=n;<span class="hljs-keyword">let</span> a,o;<span class="hljs-keyword">const</span> <span class="hljs-title function_">c</span>=(<span class="hljs-params">h,p,y</span>)=&gt;<span class="hljs-title function_">t</span>(s+h,p,y);<span class="hljs-keyword">switch</span>(i){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:a=A.<span class="hljs-property">PLAIN</span>,o=<span class="hljs-title function_">si</span>(r,c);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:a=A.<span class="hljs-property">QUOTE_SINGLE</span>,o=<span class="hljs-title function_">ni</span>(r,c);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:a=A.<span class="hljs-property">QUOTE_DOUBLE</span>,o=<span class="hljs-title function_">ii</span>(r,c);<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span> <span class="hljs-title function_">t</span>(n,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Expected a flow scalar value, but found: <span class="hljs-subst">${i}</span>`</span>),{<span class="hljs-attr">value</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">type</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">comment</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">range</span>:[s,s+r.<span class="hljs-property">length</span>,s+r.<span class="hljs-property">length</span>]}}<span class="hljs-keyword">const</span> u=s+r.<span class="hljs-property">length</span>,f=<span class="hljs-title class_">He</span>(l,u,e,t);<span class="hljs-keyword">return</span>{<span class="hljs-attr">value</span>:o,<span class="hljs-attr">type</span>:a,<span class="hljs-attr">comment</span>:f.<span class="hljs-property">comment</span>,<span class="hljs-attr">range</span>:[s,u,f.<span class="hljs-property">offset</span>]}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">si</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">switch</span>(n[<span class="hljs-number">0</span>]){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;	&quot;</span>:t=<span class="hljs-string">&quot;a tab character&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;,&quot;</span>:t=<span class="hljs-string">&quot;flow indicator character ,&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;%&quot;</span>:t=<span class="hljs-string">&quot;directive indicator character %&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;|&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&gt;&quot;</span>:{t=<span class="hljs-string">`block scalar indicator <span class="hljs-subst">${n[<span class="hljs-number">0</span>]}</span>`</span>;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;@&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;`&quot;</span>:{t=<span class="hljs-string">`reserved character <span class="hljs-subst">${n[<span class="hljs-number">0</span>]}</span>`</span>;<span class="hljs-keyword">break</span>}}<span class="hljs-keyword">return</span> t&amp;&amp;<span class="hljs-title function_">e</span>(<span class="hljs-number">0</span>,<span class="hljs-string">&quot;BAD_SCALAR_START&quot;</span>,<span class="hljs-string">`Plain value cannot start with <span class="hljs-subst">${t}</span>`</span>),<span class="hljs-title class_">Fs</span>(n)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ni</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">return</span>(n[n.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]!==<span class="hljs-string">&quot;&#x27;&quot;</span>||n.<span class="hljs-property">length</span>===<span class="hljs-number">1</span>)&amp;&amp;<span class="hljs-title function_">e</span>(n.<span class="hljs-property">length</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Missing closing &#x27;quote&quot;</span>),<span class="hljs-title class_">Fs</span>(n.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>)).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&#x27;&#x27;/g</span>,<span class="hljs-string">&quot;&#x27;&quot;</span>)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Fs</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">let</span> e,t;<span class="hljs-keyword">try</span>{e=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`(.*?)(?&lt;![ 	])[ 	]*\r?
`</span>,<span class="hljs-string">&quot;sy&quot;</span>),t=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`[ 	]*(.*?)(?:(?&lt;![ 	])[ 	]*)?\r?
`</span>,<span class="hljs-string">&quot;sy&quot;</span>)}<span class="hljs-keyword">catch</span>(c){e=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;(.*?)[ \\t]*\\r?\\n&quot;</span>,<span class="hljs-string">&quot;sy&quot;</span>),t=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;[ \\t]*(.*?)[ \\t]*\\r?\\n&quot;</span>,<span class="hljs-string">&quot;sy&quot;</span>)}<span class="hljs-keyword">let</span> s=e.<span class="hljs-title function_">exec</span>(n);<span class="hljs-keyword">if</span>(!s)<span class="hljs-keyword">return</span> n;<span class="hljs-keyword">let</span> i=s[<span class="hljs-number">1</span>],r=<span class="hljs-string">&quot; &quot;</span>,l=e.<span class="hljs-property">lastIndex</span>;<span class="hljs-keyword">for</span>(t.<span class="hljs-property">lastIndex</span>=l;s=t.<span class="hljs-title function_">exec</span>(n);)s[<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;&quot;</span>?r===<span class="hljs-string">`
`</span>?i+=<span class="hljs-attr">r</span>:r=<span class="hljs-string">`
`</span>:(i+=r+s[<span class="hljs-number">1</span>],r=<span class="hljs-string">&quot; &quot;</span>),l=t.<span class="hljs-property">lastIndex</span>;<span class="hljs-keyword">const</span> a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;[ \\t]*(.*)&quot;</span>,<span class="hljs-string">&quot;sy&quot;</span>);<span class="hljs-keyword">return</span> a.<span class="hljs-property">lastIndex</span>=l,s=a.<span class="hljs-title function_">exec</span>(n),i+r+((o=s==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s[<span class="hljs-number">1</span>])!=<span class="hljs-literal">null</span>?<span class="hljs-attr">o</span>:<span class="hljs-string">&quot;&quot;</span>)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ii</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> s=<span class="hljs-number">1</span>;s&lt;n.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>;++s){<span class="hljs-keyword">const</span> i=n[s];<span class="hljs-keyword">if</span>(!(i===<span class="hljs-string">&quot;\r&quot;</span>&amp;&amp;n[s+<span class="hljs-number">1</span>]===<span class="hljs-string">`
`</span>))<span class="hljs-keyword">if</span>(i===<span class="hljs-string">`
`</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">fold</span>:r,<span class="hljs-attr">offset</span>:l}=<span class="hljs-title function_">ri</span>(n,s);t+=r,s=l}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i===<span class="hljs-string">&quot;\\&quot;</span>){<span class="hljs-keyword">let</span> r=n[++s];<span class="hljs-keyword">const</span> l=li[r];<span class="hljs-keyword">if</span>(l)t+=l;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r===<span class="hljs-string">`
`</span>)<span class="hljs-keyword">for</span>(r=n[s+<span class="hljs-number">1</span>];r===<span class="hljs-string">&quot; &quot;</span>||r===<span class="hljs-string">&quot;	&quot;</span>;)r=n[++s+<span class="hljs-number">1</span>];<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r===<span class="hljs-string">&quot;\r&quot;</span>&amp;&amp;n[s+<span class="hljs-number">1</span>]===<span class="hljs-string">`
`</span>)<span class="hljs-keyword">for</span>(r=n[++s+<span class="hljs-number">1</span>];r===<span class="hljs-string">&quot; &quot;</span>||r===<span class="hljs-string">&quot;	&quot;</span>;)r=n[++s+<span class="hljs-number">1</span>];<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r===<span class="hljs-string">&quot;x&quot;</span>||r===<span class="hljs-string">&quot;u&quot;</span>||r===<span class="hljs-string">&quot;U&quot;</span>){<span class="hljs-keyword">const</span> a={<span class="hljs-attr">x</span>:<span class="hljs-number">2</span>,<span class="hljs-attr">u</span>:<span class="hljs-number">4</span>,<span class="hljs-attr">U</span>:<span class="hljs-number">8</span>}[r];t+=<span class="hljs-title function_">ai</span>(n,s+<span class="hljs-number">1</span>,a,e),s+=a}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> a=n.<span class="hljs-title function_">substr</span>(s-<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);<span class="hljs-title function_">e</span>(s-<span class="hljs-number">1</span>,<span class="hljs-string">&quot;BAD_DQ_ESCAPE&quot;</span>,<span class="hljs-string">`Invalid escape sequence <span class="hljs-subst">${a}</span>`</span>),t+=a}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i===<span class="hljs-string">&quot; &quot;</span>||i===<span class="hljs-string">&quot;	&quot;</span>){<span class="hljs-keyword">const</span> r=s;<span class="hljs-keyword">let</span> l=n[s+<span class="hljs-number">1</span>];<span class="hljs-keyword">for</span>(;l===<span class="hljs-string">&quot; &quot;</span>||l===<span class="hljs-string">&quot;	&quot;</span>;)l=n[++s+<span class="hljs-number">1</span>];l!==<span class="hljs-string">`
`</span>&amp;&amp;!(l===<span class="hljs-string">&quot;\r&quot;</span>&amp;&amp;n[s+<span class="hljs-number">2</span>]===<span class="hljs-string">`
`</span>)&amp;&amp;(t+=s&gt;r?n.<span class="hljs-title function_">slice</span>(r,s+<span class="hljs-number">1</span>):i)}<span class="hljs-keyword">else</span> t+=i}<span class="hljs-keyword">return</span>(n[n.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]!==<span class="hljs-string">&#x27;&quot;&#x27;</span>||n.<span class="hljs-property">length</span>===<span class="hljs-number">1</span>)&amp;&amp;<span class="hljs-title function_">e</span>(n.<span class="hljs-property">length</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&#x27;Missing closing &quot;quote&#x27;</span>),t}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ri</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-string">&quot;&quot;</span>,s=n[e+<span class="hljs-number">1</span>];<span class="hljs-keyword">for</span>(;(s===<span class="hljs-string">&quot; &quot;</span>||s===<span class="hljs-string">&quot;	&quot;</span>||s===<span class="hljs-string">`
`</span>||s===<span class="hljs-string">&quot;\r&quot;</span>)&amp;&amp;!(s===<span class="hljs-string">&quot;\r&quot;</span>&amp;&amp;n[e+<span class="hljs-number">2</span>]!==<span class="hljs-string">`
`</span>);)s===<span class="hljs-string">`
`</span>&amp;&amp;(t+=<span class="hljs-string">`
`</span>),e+=<span class="hljs-number">1</span>,s=n[e+<span class="hljs-number">1</span>];<span class="hljs-keyword">return</span> t||(t=<span class="hljs-string">&quot; &quot;</span>),{<span class="hljs-attr">fold</span>:t,<span class="hljs-attr">offset</span>:e}}<span class="hljs-keyword">const</span> li={<span class="hljs-number">0</span>:<span class="hljs-string">&quot;\0&quot;</span>,<span class="hljs-attr">a</span>:<span class="hljs-string">&quot;\x07&quot;</span>,<span class="hljs-attr">b</span>:<span class="hljs-string">&quot;\b&quot;</span>,<span class="hljs-attr">e</span>:<span class="hljs-string">&quot;\x1B&quot;</span>,<span class="hljs-attr">f</span>:<span class="hljs-string">&quot;\f&quot;</span>,<span class="hljs-attr">n</span>:<span class="hljs-string">`
`</span>,<span class="hljs-attr">r</span>:<span class="hljs-string">&quot;\r&quot;</span>,<span class="hljs-attr">t</span>:<span class="hljs-string">&quot;	&quot;</span>,<span class="hljs-attr">v</span>:<span class="hljs-string">&quot;\v&quot;</span>,<span class="hljs-attr">N</span>:<span class="hljs-string">&quot;\x85&quot;</span>,<span class="hljs-attr">_</span>:<span class="hljs-string">&quot;\xA0&quot;</span>,<span class="hljs-attr">L</span>:<span class="hljs-string">&quot;\u2028&quot;</span>,<span class="hljs-attr">P</span>:<span class="hljs-string">&quot;\u2029&quot;</span>,<span class="hljs-string">&quot; &quot;</span>:<span class="hljs-string">&quot; &quot;</span>,<span class="hljs-string">&#x27;&quot;&#x27;</span>:<span class="hljs-string">&#x27;&quot;&#x27;</span>,<span class="hljs-string">&quot;/&quot;</span>:<span class="hljs-string">&quot;/&quot;</span>,<span class="hljs-string">&quot;\\&quot;</span>:<span class="hljs-string">&quot;\\&quot;</span>,<span class="hljs-string">&quot;	&quot;</span>:<span class="hljs-string">&quot;	&quot;</span>};<span class="hljs-keyword">function</span> <span class="hljs-title function_">ai</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">const</span> i=n.<span class="hljs-title function_">substr</span>(e,t),l=i.<span class="hljs-property">length</span>===t&amp;&amp;<span class="hljs-regexp">/^[0-9a-fA-F]+$/</span>.<span class="hljs-title function_">test</span>(i)?<span class="hljs-built_in">parseInt</span>(i,<span class="hljs-number">16</span>):<span class="hljs-title class_">NaN</span>;<span class="hljs-keyword">if</span>(<span class="hljs-built_in">isNaN</span>(l)){<span class="hljs-keyword">const</span> a=n.<span class="hljs-title function_">substr</span>(e-<span class="hljs-number">2</span>,t+<span class="hljs-number">2</span>);<span class="hljs-keyword">return</span> <span class="hljs-title function_">s</span>(e-<span class="hljs-number">2</span>,<span class="hljs-string">&quot;BAD_DQ_ESCAPE&quot;</span>,<span class="hljs-string">`Invalid escape sequence <span class="hljs-subst">${a}</span>`</span>),a}<span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCodePoint</span>(l)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Rs</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">value</span>:i,<span class="hljs-attr">type</span>:r,<span class="hljs-attr">comment</span>:l,<span class="hljs-attr">range</span>:a}=e.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-scalar&quot;</span>?<span class="hljs-title class_">Xn</span>(e,n.<span class="hljs-property">options</span>.<span class="hljs-property">strict</span>,s):<span class="hljs-title function_">ti</span>(e,n.<span class="hljs-property">options</span>.<span class="hljs-property">strict</span>,s),o=t?n.<span class="hljs-property">directives</span>.<span class="hljs-title function_">tagName</span>(t.<span class="hljs-property">source</span>,<span class="hljs-function"><span class="hljs-params">f</span>=&gt;</span><span class="hljs-title function_">s</span>(t,<span class="hljs-string">&quot;TAG_RESOLVE_FAILED&quot;</span>,f)):<span class="hljs-literal">null</span>,c=t&amp;&amp;o?<span class="hljs-title function_">oi</span>(n.<span class="hljs-property">schema</span>,i,o,t,s):e.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;scalar&quot;</span>?<span class="hljs-title function_">ci</span>(n,i,e,s):n.<span class="hljs-property">schema</span>[re];<span class="hljs-keyword">let</span> u;<span class="hljs-keyword">try</span>{<span class="hljs-keyword">const</span> f=c.<span class="hljs-title function_">resolve</span>(i,<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span><span class="hljs-title function_">s</span>(t!=<span class="hljs-literal">null</span>?<span class="hljs-attr">t</span>:e,<span class="hljs-string">&quot;TAG_RESOLVE_FAILED&quot;</span>,h),n.<span class="hljs-property">options</span>);u=<span class="hljs-title function_">L</span>(f)?<span class="hljs-attr">f</span>:<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(f)}<span class="hljs-keyword">catch</span>(f){<span class="hljs-keyword">const</span> h=f <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>?f.<span class="hljs-property">message</span>:<span class="hljs-title class_">String</span>(f);<span class="hljs-title function_">s</span>(t!=<span class="hljs-literal">null</span>?<span class="hljs-attr">t</span>:e,<span class="hljs-string">&quot;TAG_RESOLVE_FAILED&quot;</span>,h),u=<span class="hljs-keyword">new</span> <span class="hljs-title function_">A</span>(i)}<span class="hljs-keyword">return</span> u.<span class="hljs-property">range</span>=a,u.<span class="hljs-property">source</span>=i,r&amp;&amp;(u.<span class="hljs-property">type</span>=r),o&amp;&amp;(u.<span class="hljs-property">tag</span>=o),c.<span class="hljs-property">format</span>&amp;&amp;(u.<span class="hljs-property">format</span>=c.<span class="hljs-property">format</span>),l&amp;&amp;(u.<span class="hljs-property">comment</span>=l),u}<span class="hljs-keyword">function</span> <span class="hljs-title function_">oi</span>(<span class="hljs-params">n,e,t,s,i</span>){<span class="hljs-keyword">var</span> a;<span class="hljs-keyword">if</span>(t===<span class="hljs-string">&quot;!&quot;</span>)<span class="hljs-keyword">return</span> n[re];<span class="hljs-keyword">const</span> r=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> n.<span class="hljs-property">tags</span>)<span class="hljs-keyword">if</span>(!o.<span class="hljs-property">collection</span>&amp;&amp;o.<span class="hljs-property">tag</span>===t)<span class="hljs-keyword">if</span>(o.<span class="hljs-property">default</span>&amp;&amp;o.<span class="hljs-property">test</span>)r.<span class="hljs-title function_">push</span>(o);<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> o;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> r)<span class="hljs-keyword">if</span>((a=o.<span class="hljs-property">test</span>)!=<span class="hljs-literal">null</span>&amp;&amp;a.<span class="hljs-title function_">test</span>(e))<span class="hljs-keyword">return</span> o;<span class="hljs-keyword">const</span> l=n.<span class="hljs-property">knownTags</span>[t];<span class="hljs-keyword">return</span> l&amp;&amp;!l.<span class="hljs-property">collection</span>?(n.<span class="hljs-property">tags</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},l,{<span class="hljs-attr">default</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">test</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>})),l):(<span class="hljs-title function_">i</span>(s,<span class="hljs-string">&quot;TAG_RESOLVE_FAILED&quot;</span>,<span class="hljs-string">`Unresolved tag: <span class="hljs-subst">${t}</span>`</span>,t!==<span class="hljs-string">&quot;tag:yaml.org,2002:str&quot;</span>),n[re])}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ci</span>(<span class="hljs-params">{directives:n,schema:e},t,s,i</span>){<span class="hljs-keyword">var</span> l;<span class="hljs-keyword">const</span> r=e.<span class="hljs-property">tags</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span>{<span class="hljs-keyword">var</span> o;<span class="hljs-keyword">return</span> a.<span class="hljs-property">default</span>&amp;&amp;((o=a.<span class="hljs-property">test</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:o.<span class="hljs-title function_">test</span>(t))})||e[re];<span class="hljs-keyword">if</span>(e.<span class="hljs-property">compat</span>){<span class="hljs-keyword">const</span> a=(l=e.<span class="hljs-property">compat</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>{<span class="hljs-keyword">var</span> c;<span class="hljs-keyword">return</span> o.<span class="hljs-property">default</span>&amp;&amp;((c=o.<span class="hljs-property">test</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:c.<span class="hljs-title function_">test</span>(t))}))!=<span class="hljs-literal">null</span>?<span class="hljs-attr">l</span>:e[re];<span class="hljs-keyword">if</span>(r.<span class="hljs-property">tag</span>!==a.<span class="hljs-property">tag</span>){<span class="hljs-keyword">const</span> o=n.<span class="hljs-title function_">tagString</span>(r.<span class="hljs-property">tag</span>),c=n.<span class="hljs-title function_">tagString</span>(a.<span class="hljs-property">tag</span>),u=<span class="hljs-string">`Value may be parsed as either <span class="hljs-subst">${o}</span> or <span class="hljs-subst">${c}</span>`</span>;<span class="hljs-title function_">i</span>(s,<span class="hljs-string">&quot;TAG_RESOLVE_FAILED&quot;</span>,u,!<span class="hljs-number">0</span>)}}<span class="hljs-keyword">return</span> r}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ui</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">if</span>(e){t===<span class="hljs-literal">null</span>&amp;&amp;(t=e.<span class="hljs-property">length</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> s=t-<span class="hljs-number">1</span>;s&gt;=<span class="hljs-number">0</span>;--s){<span class="hljs-keyword">let</span> i=e[s];<span class="hljs-keyword">switch</span>(i.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:n-=i.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>;<span class="hljs-keyword">continue</span>}<span class="hljs-keyword">for</span>(i=e[++s];(i==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.<span class="hljs-property">type</span>)===<span class="hljs-string">&quot;space&quot;</span>;)n+=i.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>,i=e[++s];<span class="hljs-keyword">break</span>}}<span class="hljs-keyword">return</span> n}<span class="hljs-keyword">const</span> fi={<span class="hljs-attr">composeNode</span>:qs,<span class="hljs-attr">composeEmptyNode</span>:<span class="hljs-title class_">Rt</span>};<span class="hljs-keyword">function</span> <span class="hljs-title function_">qs</span>(<span class="hljs-params">n,e,t,s</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">spaceBefore</span>:i,<span class="hljs-attr">comment</span>:r,<span class="hljs-attr">anchor</span>:l,<span class="hljs-attr">tag</span>:a}=t;<span class="hljs-keyword">let</span> o,c=!<span class="hljs-number">0</span>;<span class="hljs-keyword">switch</span>(e.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;alias&quot;</span>:o=<span class="hljs-title function_">hi</span>(n,e,s),(l||a)&amp;&amp;<span class="hljs-title function_">s</span>(e,<span class="hljs-string">&quot;ALIAS_PROPS&quot;</span>,<span class="hljs-string">&quot;An alias node must not specify any properties&quot;</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-scalar&quot;</span>:o=<span class="hljs-title class_">Rs</span>(n,e,a,s),l&amp;&amp;(o.<span class="hljs-property">anchor</span>=l.<span class="hljs-property">source</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>));<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-map&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-seq&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-collection&quot;</span>:o=<span class="hljs-title function_">zn</span>(fi,n,e,a,s),l&amp;&amp;(o.<span class="hljs-property">anchor</span>=l.<span class="hljs-property">source</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>));<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:{<span class="hljs-keyword">const</span> u=e.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;error&quot;</span>?e.<span class="hljs-property">message</span>:<span class="hljs-string">`Unsupported token (type: <span class="hljs-subst">${e.type}</span>)`</span>;<span class="hljs-title function_">s</span>(e,<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,u),o=<span class="hljs-title class_">Rt</span>(n,e.<span class="hljs-property">offset</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-literal">null</span>,t,s),c=!<span class="hljs-number">1</span>}}<span class="hljs-keyword">return</span> l&amp;&amp;o.<span class="hljs-property">anchor</span>===<span class="hljs-string">&quot;&quot;</span>&amp;&amp;<span class="hljs-title function_">s</span>(l,<span class="hljs-string">&quot;BAD_ALIAS&quot;</span>,<span class="hljs-string">&quot;Anchor cannot be an empty string&quot;</span>),i&amp;&amp;(o.<span class="hljs-property">spaceBefore</span>=!<span class="hljs-number">0</span>),r&amp;&amp;(e.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;scalar&quot;</span>&amp;&amp;e.<span class="hljs-property">source</span>===<span class="hljs-string">&quot;&quot;</span>?o.<span class="hljs-property">comment</span>=<span class="hljs-attr">r</span>:o.<span class="hljs-property">commentBefore</span>=r),n.<span class="hljs-property">options</span>.<span class="hljs-property">keepSourceTokens</span>&amp;&amp;c&amp;&amp;(o.<span class="hljs-property">srcToken</span>=e),o}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Rt</span>(<span class="hljs-params">n,e,t,s,{spaceBefore:i,comment:r,anchor:l,tag:a,end:o},c</span>){<span class="hljs-keyword">const</span> u={<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;scalar&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-title function_">ui</span>(e,t,s),<span class="hljs-attr">indent</span>:-<span class="hljs-number">1</span>,<span class="hljs-attr">source</span>:<span class="hljs-string">&quot;&quot;</span>},f=<span class="hljs-title class_">Rs</span>(n,u,a,c);<span class="hljs-keyword">return</span> l&amp;&amp;(f.<span class="hljs-property">anchor</span>=l.<span class="hljs-property">source</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>),f.<span class="hljs-property">anchor</span>===<span class="hljs-string">&quot;&quot;</span>&amp;&amp;<span class="hljs-title function_">c</span>(l,<span class="hljs-string">&quot;BAD_ALIAS&quot;</span>,<span class="hljs-string">&quot;Anchor cannot be an empty string&quot;</span>)),i&amp;&amp;(f.<span class="hljs-property">spaceBefore</span>=!<span class="hljs-number">0</span>),r&amp;&amp;(f.<span class="hljs-property">comment</span>=r,f.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>]=o),f}<span class="hljs-keyword">function</span> <span class="hljs-title function_">hi</span>(<span class="hljs-params">{options:n},{offset:e,source:t,end:s},i</span>){<span class="hljs-keyword">const</span> r=<span class="hljs-keyword">new</span> <span class="hljs-title class_">St</span>(t.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>));r.<span class="hljs-property">source</span>===<span class="hljs-string">&quot;&quot;</span>&amp;&amp;<span class="hljs-title function_">i</span>(e,<span class="hljs-string">&quot;BAD_ALIAS&quot;</span>,<span class="hljs-string">&quot;Alias cannot be an empty string&quot;</span>),r.<span class="hljs-property">source</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">&quot;:&quot;</span>)&amp;&amp;<span class="hljs-title function_">i</span>(e+t.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>,<span class="hljs-string">&quot;BAD_ALIAS&quot;</span>,<span class="hljs-string">&quot;Alias ending in : is ambiguous&quot;</span>,!<span class="hljs-number">0</span>);<span class="hljs-keyword">const</span> l=e+t.<span class="hljs-property">length</span>,a=<span class="hljs-title class_">He</span>(s,l,n.<span class="hljs-property">strict</span>,i);<span class="hljs-keyword">return</span> r.<span class="hljs-property">range</span>=[e,l,a.<span class="hljs-property">offset</span>],a.<span class="hljs-property">comment</span>&amp;&amp;(r.<span class="hljs-property">comment</span>=a.<span class="hljs-property">comment</span>),r}<span class="hljs-keyword">function</span> <span class="hljs-title function_">di</span>(<span class="hljs-params">n,e,{offset:t,start:s,value:i,end:r},l</span>){<span class="hljs-keyword">const</span> a=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({<span class="hljs-attr">_directives</span>:e},n),o=<span class="hljs-keyword">new</span> <span class="hljs-title function_">ft</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,a),c={<span class="hljs-attr">atRoot</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">directives</span>:o.<span class="hljs-property">directives</span>,<span class="hljs-attr">options</span>:o.<span class="hljs-property">options</span>,<span class="hljs-attr">schema</span>:o.<span class="hljs-property">schema</span>},u=<span class="hljs-title class_">De</span>(s,{<span class="hljs-attr">indicator</span>:<span class="hljs-string">&quot;doc-start&quot;</span>,<span class="hljs-attr">next</span>:i!=<span class="hljs-literal">null</span>?<span class="hljs-attr">i</span>:r==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:r[<span class="hljs-number">0</span>],<span class="hljs-attr">offset</span>:t,<span class="hljs-attr">onError</span>:l,<span class="hljs-attr">startOnNewline</span>:!<span class="hljs-number">0</span>});u.<span class="hljs-property">found</span>&amp;&amp;(o.<span class="hljs-property">directives</span>.<span class="hljs-property">docStart</span>=!<span class="hljs-number">0</span>,i&amp;&amp;(i.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-map&quot;</span>||i.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-seq&quot;</span>)&amp;&amp;!u.<span class="hljs-property">hasNewline</span>&amp;&amp;<span class="hljs-title function_">l</span>(u.<span class="hljs-property">end</span>,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Block collection cannot start on same line with directives-end marker&quot;</span>)),o.<span class="hljs-property">contents</span>=i?<span class="hljs-title function_">qs</span>(c,i,u,l):<span class="hljs-title class_">Rt</span>(c,u.<span class="hljs-property">end</span>,s,<span class="hljs-literal">null</span>,u,l);<span class="hljs-keyword">const</span> f=o.<span class="hljs-property">contents</span>.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>],h=<span class="hljs-title class_">He</span>(r,f,!<span class="hljs-number">1</span>,l);<span class="hljs-keyword">return</span> h.<span class="hljs-property">comment</span>&amp;&amp;(o.<span class="hljs-property">comment</span>=h.<span class="hljs-property">comment</span>),o.<span class="hljs-property">range</span>=[t,f,h.<span class="hljs-property">offset</span>],o}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ge</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> n==<span class="hljs-string">&quot;number&quot;</span>)<span class="hljs-keyword">return</span>[n,n+<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(n))<span class="hljs-keyword">return</span> n.<span class="hljs-property">length</span>===<span class="hljs-number">2</span>?<span class="hljs-attr">n</span>:[n[<span class="hljs-number">0</span>],n[<span class="hljs-number">1</span>]];<span class="hljs-keyword">const</span>{<span class="hljs-attr">offset</span>:e,<span class="hljs-attr">source</span>:t}=n;<span class="hljs-keyword">return</span>[e,e+(<span class="hljs-keyword">typeof</span> t==<span class="hljs-string">&quot;string&quot;</span>?t.<span class="hljs-property">length</span>:<span class="hljs-number">1</span>)]}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ks</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">let</span> e=<span class="hljs-string">&quot;&quot;</span>,t=!<span class="hljs-number">1</span>,s=!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;r&lt;n.<span class="hljs-property">length</span>;++r){<span class="hljs-keyword">const</span> l=n[r];<span class="hljs-keyword">switch</span>(l[<span class="hljs-number">0</span>]){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;#&quot;</span>:e+=(e===<span class="hljs-string">&quot;&quot;</span>?<span class="hljs-string">&quot;&quot;</span>:s?<span class="hljs-string">`

`</span>:<span class="hljs-string">`
`</span>)+(l.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>)||<span class="hljs-string">&quot; &quot;</span>),t=!<span class="hljs-number">0</span>,s=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;%&quot;</span>:((i=n[r+<span class="hljs-number">1</span>])==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i[<span class="hljs-number">0</span>])!==<span class="hljs-string">&quot;#&quot;</span>&amp;&amp;(r+=<span class="hljs-number">1</span>),t=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:t||(s=!<span class="hljs-number">0</span>),t=!<span class="hljs-number">1</span>}}<span class="hljs-keyword">return</span>{<span class="hljs-attr">comment</span>:e,<span class="hljs-attr">afterEmptyLine</span>:s}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">pi</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e={}</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">atDirectives</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">prelude</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">warnings</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">onError</span>=<span class="hljs-function">(<span class="hljs-params">t,s,i,r</span>)=&gt;</span>{<span class="hljs-keyword">const</span> l=<span class="hljs-title class_">Ge</span>(t);r?<span class="hljs-variable language_">this</span>.<span class="hljs-property">warnings</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Gn</span>(l,s,i)):<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Ve</span>(l,s,i))},<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>=<span class="hljs-keyword">new</span> <span class="hljs-title function_">Y</span>({<span class="hljs-attr">version</span>:e.<span class="hljs-property">version</span>||<span class="hljs-string">&quot;1.2&quot;</span>}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>=e}<span class="hljs-title function_">decorate</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">comment</span>:s,<span class="hljs-attr">afterEmptyLine</span>:i}=<span class="hljs-title class_">Ks</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">prelude</span>);<span class="hljs-keyword">if</span>(s){<span class="hljs-keyword">const</span> r=e.<span class="hljs-property">contents</span>;<span class="hljs-keyword">if</span>(t)e.<span class="hljs-property">comment</span>=e.<span class="hljs-property">comment</span>?<span class="hljs-string">`<span class="hljs-subst">${e.comment}</span>
<span class="hljs-subst">${s}</span>`</span>:s;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i||e.<span class="hljs-property">directives</span>.<span class="hljs-property">docStart</span>||!r)e.<span class="hljs-property">commentBefore</span>=s;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>($(r)&amp;&amp;!r.<span class="hljs-property">flow</span>&amp;&amp;r.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">let</span> l=r.<span class="hljs-property">items</span>[<span class="hljs-number">0</span>];<span class="hljs-title function_">D</span>(l)&amp;&amp;(l=l.<span class="hljs-property">key</span>);<span class="hljs-keyword">const</span> a=l.<span class="hljs-property">commentBefore</span>;l.<span class="hljs-property">commentBefore</span>=a?<span class="hljs-string">`<span class="hljs-subst">${s}</span>
<span class="hljs-subst">${a}</span>`</span>:s}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> l=r.<span class="hljs-property">commentBefore</span>;r.<span class="hljs-property">commentBefore</span>=l?<span class="hljs-string">`<span class="hljs-subst">${s}</span>
<span class="hljs-subst">${l}</span>`</span>:s}}t?(<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>.<span class="hljs-title function_">apply</span>(e.<span class="hljs-property">errors</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>),<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>.<span class="hljs-title function_">apply</span>(e.<span class="hljs-property">warnings</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">warnings</span>)):(e.<span class="hljs-property">errors</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>,e.<span class="hljs-property">warnings</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">warnings</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">prelude</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">warnings</span>=[]}<span class="hljs-title function_">streamInfo</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span>{<span class="hljs-attr">comment</span>:<span class="hljs-title class_">Ks</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">prelude</span>).<span class="hljs-property">comment</span>,<span class="hljs-attr">directives</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>,<span class="hljs-attr">errors</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>,<span class="hljs-attr">warnings</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">warnings</span>}}*<span class="hljs-title function_">compose</span>(<span class="hljs-params">e,t=!<span class="hljs-number">1</span>,s=-<span class="hljs-number">1</span></span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> e)<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">next</span>(i);<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">end</span>(t,s)}*<span class="hljs-title function_">next</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">switch</span>(e.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;directive&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>.<span class="hljs-title function_">add</span>(e.<span class="hljs-property">source</span>,<span class="hljs-function">(<span class="hljs-params">t,s,i</span>)=&gt;</span>{<span class="hljs-keyword">const</span> r=<span class="hljs-title class_">Ge</span>(e);r[<span class="hljs-number">0</span>]+=t,<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onError</span>(r,<span class="hljs-string">&quot;BAD_DIRECTIVE&quot;</span>,s,i)}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">prelude</span>.<span class="hljs-title function_">push</span>(e.<span class="hljs-property">source</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">atDirectives</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;document&quot;</span>:{<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">di</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>,e,<span class="hljs-variable language_">this</span>.<span class="hljs-property">onError</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">atDirectives</span>&amp;&amp;!t.<span class="hljs-property">directives</span>.<span class="hljs-property">docStart</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onError</span>(e,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Missing directives-end/doc-start indicator line&quot;</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">decorate</span>(t,!<span class="hljs-number">1</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>&amp;&amp;(<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>=t,<span class="hljs-variable language_">this</span>.<span class="hljs-property">atDirectives</span>=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;byte-order-mark&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">prelude</span>.<span class="hljs-title function_">push</span>(e.<span class="hljs-property">source</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;error&quot;</span>:{<span class="hljs-keyword">const</span> t=e.<span class="hljs-property">source</span>?<span class="hljs-string">`<span class="hljs-subst">${e.message}</span>: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(e.source)}</span>`</span>:e.<span class="hljs-property">message</span>,s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Ve</span>(<span class="hljs-title class_">Ge</span>(e),<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,t);<span class="hljs-variable language_">this</span>.<span class="hljs-property">atDirectives</span>||!<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">push</span>(s):<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">push</span>(s);<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-end&quot;</span>:{<span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-string">&quot;Unexpected doc-end without preceding document&quot;</span>;<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Ve</span>(<span class="hljs-title class_">Ge</span>(e),<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,s));<span class="hljs-keyword">break</span>}<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>.<span class="hljs-property">directives</span>.<span class="hljs-property">docEnd</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> t=<span class="hljs-title class_">He</span>(e.<span class="hljs-property">end</span>,e.<span class="hljs-property">offset</span>+e.<span class="hljs-property">source</span>.<span class="hljs-property">length</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>.<span class="hljs-property">options</span>.<span class="hljs-property">strict</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">onError</span>);<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">decorate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>,!<span class="hljs-number">0</span>),t.<span class="hljs-property">comment</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>.<span class="hljs-property">comment</span>;<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>.<span class="hljs-property">comment</span>=s?<span class="hljs-string">`<span class="hljs-subst">${s}</span>
<span class="hljs-subst">${t.comment}</span>`</span>:t.<span class="hljs-property">comment</span>}<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>.<span class="hljs-property">range</span>[<span class="hljs-number">2</span>]=t.<span class="hljs-property">offset</span>;<span class="hljs-keyword">break</span>}<span class="hljs-attr">default</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Ve</span>(<span class="hljs-title class_">Ge</span>(e),<span class="hljs-string">&quot;UNEXPECTED_TOKEN&quot;</span>,<span class="hljs-string">`Unsupported token <span class="hljs-subst">${e.type}</span>`</span>))}}*<span class="hljs-title function_">end</span>(<span class="hljs-params">e=!<span class="hljs-number">1</span>,t=-<span class="hljs-number">1</span></span>){<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>)<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">decorate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>,!<span class="hljs-number">0</span>),<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">doc</span>=<span class="hljs-literal">null</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e){<span class="hljs-keyword">const</span> s=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({<span class="hljs-attr">_directives</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>},<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>),i=<span class="hljs-keyword">new</span> <span class="hljs-title function_">ft</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,s);<span class="hljs-variable language_">this</span>.<span class="hljs-property">atDirectives</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onError</span>(t,<span class="hljs-string">&quot;MISSING_CHAR&quot;</span>,<span class="hljs-string">&quot;Missing directives-end indicator line&quot;</span>),i.<span class="hljs-property">range</span>=[<span class="hljs-number">0</span>,t,t],<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">decorate</span>(i,!<span class="hljs-number">1</span>),<span class="hljs-keyword">yield</span> i}}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Vi</span>(<span class="hljs-params">n,e=!<span class="hljs-number">0</span>,t</span>){<span class="hljs-keyword">if</span>(n){<span class="hljs-keyword">const</span> <span class="hljs-title function_">s</span>=(<span class="hljs-params">i,r,l</span>)=&gt;{<span class="hljs-keyword">const</span> a=<span class="hljs-keyword">typeof</span> i==<span class="hljs-string">&quot;number&quot;</span>?<span class="hljs-attr">i</span>:<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(i)?i[<span class="hljs-number">0</span>]:i.<span class="hljs-property">offset</span>;<span class="hljs-keyword">if</span>(t)<span class="hljs-title function_">t</span>(a,r,l);<span class="hljs-keyword">else</span> <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YAMLParseError</span>([a,a+<span class="hljs-number">1</span>],r,l)};<span class="hljs-keyword">switch</span>(n.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-title function_">resolveFlowScalar</span>(n,e,s);<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-scalar&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-title function_">resolveBlockScalar</span>(n,e,s)}}<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">xi</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">var</span> c;<span class="hljs-keyword">const</span>{<span class="hljs-attr">implicitKey</span>:t=!<span class="hljs-number">1</span>,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">inFlow</span>:i=!<span class="hljs-number">1</span>,<span class="hljs-attr">offset</span>:r=-<span class="hljs-number">1</span>,<span class="hljs-attr">type</span>:l=<span class="hljs-string">&quot;PLAIN&quot;</span>}=e,a=<span class="hljs-title function_">stringifyString</span>({<span class="hljs-attr">type</span>:l,<span class="hljs-attr">value</span>:n},{<span class="hljs-attr">implicitKey</span>:t,<span class="hljs-attr">indent</span>:s&gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot; &quot;</span>.<span class="hljs-title function_">repeat</span>(s):<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">inFlow</span>:i,<span class="hljs-attr">options</span>:{<span class="hljs-attr">blockQuote</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">lineWidth</span>:-<span class="hljs-number">1</span>}}),o=(c=e.<span class="hljs-property">end</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">c</span>:[{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;newline&quot;</span>,<span class="hljs-attr">offset</span>:-<span class="hljs-number">1</span>,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">source</span>:<span class="hljs-string">`
`</span>}];<span class="hljs-keyword">switch</span>(a[<span class="hljs-number">0</span>]){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;|&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&gt;&quot;</span>:{<span class="hljs-keyword">const</span> u=a.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>),f=a.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,u),h=a.<span class="hljs-title function_">substring</span>(u+<span class="hljs-number">1</span>)+<span class="hljs-string">`
`</span>,p=[{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-scalar-header&quot;</span>,<span class="hljs-attr">offset</span>:r,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">source</span>:f}];<span class="hljs-keyword">return</span> <span class="hljs-title class_">Us</span>(p,o)||p.<span class="hljs-title function_">push</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;newline&quot;</span>,<span class="hljs-attr">offset</span>:-<span class="hljs-number">1</span>,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">source</span>:<span class="hljs-string">`
`</span>}),{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-scalar&quot;</span>,<span class="hljs-attr">offset</span>:r,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">props</span>:p,<span class="hljs-attr">source</span>:h}}<span class="hljs-keyword">case</span><span class="hljs-string">&#x27;&quot;&#x27;</span>:<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;double-quoted-scalar&quot;</span>,<span class="hljs-attr">offset</span>:r,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">source</span>:a,<span class="hljs-attr">end</span>:o};<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&#x27;&quot;</span>:<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;single-quoted-scalar&quot;</span>,<span class="hljs-attr">offset</span>:r,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">source</span>:a,<span class="hljs-attr">end</span>:o};<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;scalar&quot;</span>,<span class="hljs-attr">offset</span>:r,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">source</span>:a,<span class="hljs-attr">end</span>:o}}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Hi</span>(<span class="hljs-params">n,e,t={}</span>){<span class="hljs-keyword">let</span>{<span class="hljs-attr">afterKey</span>:s=!<span class="hljs-number">1</span>,<span class="hljs-attr">implicitKey</span>:i=!<span class="hljs-number">1</span>,<span class="hljs-attr">inFlow</span>:r=!<span class="hljs-number">1</span>,<span class="hljs-attr">type</span>:l}=t,a=<span class="hljs-string">&quot;indent&quot;</span><span class="hljs-keyword">in</span> n?n.<span class="hljs-property">indent</span>:<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(s&amp;&amp;<span class="hljs-keyword">typeof</span> a==<span class="hljs-string">&quot;number&quot;</span>&amp;&amp;(a+=<span class="hljs-number">2</span>),!l)<span class="hljs-keyword">switch</span>(n.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:l=<span class="hljs-string">&quot;QUOTE_SINGLE&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:l=<span class="hljs-string">&quot;QUOTE_DOUBLE&quot;</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-scalar&quot;</span>:{<span class="hljs-keyword">const</span> c=n.<span class="hljs-property">props</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">if</span>(c.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;block-scalar-header&quot;</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Invalid block scalar header&quot;</span>);l=c.<span class="hljs-property">source</span>[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;&gt;&quot;</span>?<span class="hljs-string">&quot;BLOCK_FOLDED&quot;</span>:<span class="hljs-string">&quot;BLOCK_LITERAL&quot;</span>;<span class="hljs-keyword">break</span>}<span class="hljs-attr">default</span>:l=<span class="hljs-string">&quot;PLAIN&quot;</span>}<span class="hljs-keyword">const</span> o=<span class="hljs-title function_">stringifyString</span>({<span class="hljs-attr">type</span>:l,<span class="hljs-attr">value</span>:e},{<span class="hljs-attr">implicitKey</span>:i||a===<span class="hljs-literal">null</span>,<span class="hljs-attr">indent</span>:a!==<span class="hljs-literal">null</span>&amp;&amp;a&gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot; &quot;</span>.<span class="hljs-title function_">repeat</span>(a):<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">inFlow</span>:r,<span class="hljs-attr">options</span>:{<span class="hljs-attr">blockQuote</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">lineWidth</span>:-<span class="hljs-number">1</span>}});<span class="hljs-keyword">switch</span>(o[<span class="hljs-number">0</span>]){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;|&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&gt;&quot;</span>:<span class="hljs-title function_">mi</span>(n,o);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&#x27;&quot;&#x27;</span>:<span class="hljs-title function_">qt</span>(n,o,<span class="hljs-string">&quot;double-quoted-scalar&quot;</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&#x27;&quot;</span>:<span class="hljs-title function_">qt</span>(n,o,<span class="hljs-string">&quot;single-quoted-scalar&quot;</span>);<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:<span class="hljs-title function_">qt</span>(n,o,<span class="hljs-string">&quot;scalar&quot;</span>)}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">mi</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">const</span> t=e.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>),s=e.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,t),i=e.<span class="hljs-title function_">substring</span>(t+<span class="hljs-number">1</span>)+<span class="hljs-string">`
`</span>;<span class="hljs-keyword">if</span>(n.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-scalar&quot;</span>){<span class="hljs-keyword">const</span> r=n.<span class="hljs-property">props</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">if</span>(r.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;block-scalar-header&quot;</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Invalid block scalar header&quot;</span>);r.<span class="hljs-property">source</span>=s,n.<span class="hljs-property">source</span>=i}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span>{<span class="hljs-attr">offset</span>:r}=n,l=<span class="hljs-string">&quot;indent&quot;</span><span class="hljs-keyword">in</span> n?n.<span class="hljs-property">indent</span>:-<span class="hljs-number">1</span>,a=[{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-scalar-header&quot;</span>,<span class="hljs-attr">offset</span>:r,<span class="hljs-attr">indent</span>:l,<span class="hljs-attr">source</span>:s}];<span class="hljs-title class_">Us</span>(a,<span class="hljs-string">&quot;end&quot;</span><span class="hljs-keyword">in</span> n?n.<span class="hljs-property">end</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)||a.<span class="hljs-title function_">push</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;newline&quot;</span>,<span class="hljs-attr">offset</span>:-<span class="hljs-number">1</span>,<span class="hljs-attr">indent</span>:l,<span class="hljs-attr">source</span>:<span class="hljs-string">`
`</span>});<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(n))o!==<span class="hljs-string">&quot;type&quot;</span>&amp;&amp;o!==<span class="hljs-string">&quot;offset&quot;</span>&amp;&amp;<span class="hljs-keyword">delete</span> n[o];<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(n,{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-scalar&quot;</span>,<span class="hljs-attr">indent</span>:l,<span class="hljs-attr">props</span>:a,<span class="hljs-attr">source</span>:i})}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Us</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">if</span>(e)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> t <span class="hljs-keyword">of</span> e)<span class="hljs-keyword">switch</span>(t.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:n.<span class="hljs-title function_">push</span>(t);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-keyword">return</span> n.<span class="hljs-title function_">push</span>(t),!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">qt</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">switch</span>(n.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:n.<span class="hljs-property">type</span>=t,n.<span class="hljs-property">source</span>=e;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-scalar&quot;</span>:{<span class="hljs-keyword">const</span> s=n.<span class="hljs-property">props</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>);<span class="hljs-keyword">let</span> i=e.<span class="hljs-property">length</span>;n.<span class="hljs-property">props</span>[<span class="hljs-number">0</span>].<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-scalar-header&quot;</span>&amp;&amp;(i-=n.<span class="hljs-property">props</span>[<span class="hljs-number">0</span>].<span class="hljs-property">source</span>.<span class="hljs-property">length</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> r <span class="hljs-keyword">of</span> s)r.<span class="hljs-property">offset</span>+=i;<span class="hljs-keyword">delete</span> n.<span class="hljs-property">props</span>,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(n,{<span class="hljs-attr">type</span>:t,<span class="hljs-attr">source</span>:e,<span class="hljs-attr">end</span>:s});<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-map&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-seq&quot;</span>:{<span class="hljs-keyword">const</span> i={<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;newline&quot;</span>,<span class="hljs-attr">offset</span>:n.<span class="hljs-property">offset</span>+e.<span class="hljs-property">length</span>,<span class="hljs-attr">indent</span>:n.<span class="hljs-property">indent</span>,<span class="hljs-attr">source</span>:<span class="hljs-string">`
`</span>};<span class="hljs-keyword">delete</span> n.<span class="hljs-property">items</span>,<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(n,{<span class="hljs-attr">type</span>:t,<span class="hljs-attr">source</span>:e,<span class="hljs-attr">end</span>:[i]});<span class="hljs-keyword">break</span>}<span class="hljs-attr">default</span>:{<span class="hljs-keyword">const</span> s=<span class="hljs-string">&quot;indent&quot;</span><span class="hljs-keyword">in</span> n?n.<span class="hljs-property">indent</span>:-<span class="hljs-number">1</span>,i=<span class="hljs-string">&quot;end&quot;</span><span class="hljs-keyword">in</span> n&amp;&amp;<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(n.<span class="hljs-property">end</span>)?n.<span class="hljs-property">end</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>r.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;space&quot;</span>||r.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;comment&quot;</span>||r.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>):[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> r <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(n))r!==<span class="hljs-string">&quot;type&quot;</span>&amp;&amp;r!==<span class="hljs-string">&quot;offset&quot;</span>&amp;&amp;<span class="hljs-keyword">delete</span> n[r];<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(n,{<span class="hljs-attr">type</span>:t,<span class="hljs-attr">indent</span>:s,<span class="hljs-attr">source</span>:e,<span class="hljs-attr">end</span>:i})}}}<span class="hljs-keyword">const</span> <span class="hljs-title class_">Kt</span>=<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;break visit&quot;</span>),gi=<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;skip children&quot;</span>),<span class="hljs-title class_">Ys</span>=<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;remove item&quot;</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">$e</span>(<span class="hljs-params">n,e</span>){<span class="hljs-string">&quot;type&quot;</span><span class="hljs-keyword">in</span> n&amp;&amp;n.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;document&quot;</span>&amp;&amp;(n={<span class="hljs-attr">start</span>:n.<span class="hljs-property">start</span>,<span class="hljs-attr">value</span>:n.<span class="hljs-property">value</span>}),<span class="hljs-title class_">Vs</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>([]),n,e)}$e.<span class="hljs-property">BREAK</span>=<span class="hljs-title class_">Kt</span>,$e.<span class="hljs-property">SKIP</span>=gi,$e.<span class="hljs-property">REMOVE</span>=<span class="hljs-title class_">Ys</span>,$e.<span class="hljs-property">itemAtPath</span>=<span class="hljs-function">(<span class="hljs-params">n,e</span>)=&gt;</span>{<span class="hljs-keyword">let</span> t=n;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span>[s,i]<span class="hljs-keyword">of</span> e){<span class="hljs-keyword">const</span> r=t==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t[s];<span class="hljs-keyword">if</span>(r&amp;&amp;<span class="hljs-string">&quot;items&quot;</span><span class="hljs-keyword">in</span> r)t=r.<span class="hljs-property">items</span>[i];<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span>}<span class="hljs-keyword">return</span> t},$e.<span class="hljs-property">parentCollection</span>=<span class="hljs-function">(<span class="hljs-params">n,e</span>)=&gt;</span>{<span class="hljs-keyword">const</span> t=$e.<span class="hljs-title function_">itemAtPath</span>(n,e.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>)),s=e[e.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>],i=t==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t[s];<span class="hljs-keyword">if</span>(i&amp;&amp;<span class="hljs-string">&quot;items&quot;</span><span class="hljs-keyword">in</span> i)<span class="hljs-keyword">return</span> i;<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Parent collection not found&quot;</span>)};<span class="hljs-keyword">function</span> <span class="hljs-title function_">Vs</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">let</span> s=<span class="hljs-title function_">t</span>(e,n);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;symbol&quot;</span>)<span class="hljs-keyword">return</span> s;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span>[<span class="hljs-string">&quot;key&quot;</span>,<span class="hljs-string">&quot;value&quot;</span>]){<span class="hljs-keyword">const</span> r=e[i];<span class="hljs-keyword">if</span>(r&amp;&amp;<span class="hljs-string">&quot;items&quot;</span><span class="hljs-keyword">in</span> r){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> l=<span class="hljs-number">0</span>;l&lt;r.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;++l){<span class="hljs-keyword">const</span> a=<span class="hljs-title class_">Vs</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(n.<span class="hljs-title function_">concat</span>([[i,l]])),r.<span class="hljs-property">items</span>[l],t);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> a==<span class="hljs-string">&quot;number&quot;</span>)l=a-<span class="hljs-number">1</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(a===<span class="hljs-title class_">Kt</span>)<span class="hljs-keyword">return</span> <span class="hljs-title class_">Kt</span>;a===<span class="hljs-title class_">Ys</span>&amp;&amp;(r.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(l,<span class="hljs-number">1</span>),l-=<span class="hljs-number">1</span>)}}<span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;function&quot;</span>&amp;&amp;i===<span class="hljs-string">&quot;key&quot;</span>&amp;&amp;(s=<span class="hljs-title function_">s</span>(e,n))}}<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> s==<span class="hljs-string">&quot;function&quot;</span>?<span class="hljs-title function_">s</span>(e,n):s}<span class="hljs-keyword">const</span> <span class="hljs-title class_">Ut</span>=<span class="hljs-string">&quot;\uFEFF&quot;</span>,<span class="hljs-title class_">Yt</span>=<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-title class_">Vt</span>=<span class="hljs-string">&quot;&quot;</span>,ht=<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-title class_">Gi</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!!n&amp;&amp;<span class="hljs-string">&quot;items&quot;</span><span class="hljs-keyword">in</span> n,<span class="hljs-title class_">Ji</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!!n&amp;&amp;(n.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;scalar&quot;</span>||n.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;single-quoted-scalar&quot;</span>||n.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;double-quoted-scalar&quot;</span>||n.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-scalar&quot;</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">Qi</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">switch</span>(n){<span class="hljs-keyword">case</span> <span class="hljs-title class_">Ut</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;&lt;BOM&gt;&quot;</span>;<span class="hljs-keyword">case</span> <span class="hljs-title class_">Yt</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;&lt;DOC&gt;&quot;</span>;<span class="hljs-keyword">case</span> <span class="hljs-title class_">Vt</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;&lt;FLOW_END&gt;&quot;</span>;<span class="hljs-keyword">case</span> <span class="hljs-attr">ht</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;&lt;SCALAR&gt;&quot;</span>;<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(n)}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">yi</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">switch</span>(n){<span class="hljs-keyword">case</span> <span class="hljs-title class_">Ut</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;byte-order-mark&quot;</span>;<span class="hljs-keyword">case</span> <span class="hljs-title class_">Yt</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;doc-mode&quot;</span>;<span class="hljs-keyword">case</span> <span class="hljs-title class_">Vt</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;flow-error-end&quot;</span>;<span class="hljs-keyword">case</span> <span class="hljs-attr">ht</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;scalar&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;---&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;doc-start&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;...&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;doc-end&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">`
`</span>:<span class="hljs-keyword">case</span><span class="hljs-string">`\r
`</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;newline&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;-&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;seq-item-ind&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;?&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;explicit-key-ind&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;:&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;map-value-ind&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;{&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;flow-map-start&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;}&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;flow-map-end&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;[&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;flow-seq-start&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;]&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;flow-seq-end&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;,&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;comma&quot;</span>}<span class="hljs-keyword">switch</span>(n[<span class="hljs-number">0</span>]){<span class="hljs-keyword">case</span><span class="hljs-string">&quot; &quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;	&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;space&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;#&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;comment&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;%&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;directive-line&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;*&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;alias&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&amp;&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;anchor&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;!&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;tag&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&#x27;&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&#x27;&quot;&#x27;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;|&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&gt;&quot;</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;block-scalar-header&quot;</span>}<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">z</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">switch</span>(n){<span class="hljs-keyword">case</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot; &quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">`
`</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;\r&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;	&quot;</span>:<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}}<span class="hljs-keyword">const</span> xs=<span class="hljs-string">&quot;0123456789ABCDEFabcdef&quot;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&quot;</span>),bi=<span class="hljs-string">&quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&amp;=+$_.!~*&#x27;()&quot;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&quot;</span>),xt=<span class="hljs-string">&quot;,[]{}&quot;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&quot;</span>),wi=<span class="hljs-string">` ,[]{}
\r	`</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title class_">Ht</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>!n||wi.<span class="hljs-title function_">includes</span>(n);<span class="hljs-keyword">class</span> <span class="hljs-title class_">Si</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarIndent</span>=-<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarKeep</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>=<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineEndPos</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>=<span class="hljs-number">0</span>}*<span class="hljs-title function_">lex</span>(<span class="hljs-params">e,t=!<span class="hljs-number">1</span></span>){<span class="hljs-keyword">var</span> i;e&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>+<span class="hljs-attr">e</span>:e,<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineEndPos</span>=<span class="hljs-literal">null</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>=!t;<span class="hljs-keyword">let</span> s=(i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">i</span>:<span class="hljs-string">&quot;stream&quot;</span>;<span class="hljs-keyword">for</span>(;s&amp;&amp;(t||<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hasChars</span>(<span class="hljs-number">1</span>));)s=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseNext</span>(s)}<span class="hljs-title function_">atLineEnd</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">let</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>,t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e];<span class="hljs-keyword">for</span>(;t===<span class="hljs-string">&quot; &quot;</span>||t===<span class="hljs-string">&quot;	&quot;</span>;)t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[++e];<span class="hljs-keyword">return</span>!t||t===<span class="hljs-string">&quot;#&quot;</span>||t===<span class="hljs-string">`
`</span>?!<span class="hljs-number">0</span>:t===<span class="hljs-string">&quot;\r&quot;</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e+<span class="hljs-number">1</span>]===<span class="hljs-string">`
`</span>:!<span class="hljs-number">1</span>}<span class="hljs-title function_">charAt</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>+e]}<span class="hljs-title function_">continueScalar</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e];<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(;t===<span class="hljs-string">&quot; &quot;</span>;)t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[++s+e];<span class="hljs-keyword">if</span>(t===<span class="hljs-string">&quot;\r&quot;</span>){<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[s+e+<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(i===<span class="hljs-string">`
`</span>||!i&amp;&amp;!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>)<span class="hljs-keyword">return</span> e+s+<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span> t===<span class="hljs-string">`
`</span>||s&gt;=<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>||!t&amp;&amp;!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>?e+<span class="hljs-attr">s</span>:-<span class="hljs-number">1</span>}<span class="hljs-keyword">if</span>(t===<span class="hljs-string">&quot;-&quot;</span>||t===<span class="hljs-string">&quot;.&quot;</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">substr</span>(e,<span class="hljs-number">3</span>);<span class="hljs-keyword">if</span>((s===<span class="hljs-string">&quot;---&quot;</span>||s===<span class="hljs-string">&quot;...&quot;</span>)&amp;&amp;<span class="hljs-title function_">z</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e+<span class="hljs-number">3</span>]))<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span> e}<span class="hljs-title function_">getLine</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">let</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineEndPos</span>;<span class="hljs-keyword">return</span>(<span class="hljs-keyword">typeof</span> e!=<span class="hljs-string">&quot;number&quot;</span>||e!==-<span class="hljs-number">1</span>&amp;&amp;e&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>)&amp;&amp;(e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineEndPos</span>=e),e===-<span class="hljs-number">1</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>):<span class="hljs-attr">null</span>:(<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e-<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;\r&quot;</span>&amp;&amp;(e-=<span class="hljs-number">1</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>,e))}<span class="hljs-title function_">hasChars</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>+e&lt;=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-property">length</span>}<span class="hljs-title function_">setNext</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineEndPos</span>=<span class="hljs-literal">null</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span>=e,<span class="hljs-literal">null</span>}<span class="hljs-title function_">peek</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">substr</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>,e)}*<span class="hljs-title function_">parseNext</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">switch</span>(e){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;stream&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseStream</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;line-start&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseLineStart</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-start&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseBlockStart</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseDocument</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseFlowCollection</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;quoted-scalar&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseQuotedScalar</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-scalar&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseBlockScalar</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;plain-scalar&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parsePlainScalar</span>()}}*<span class="hljs-title function_">parseStream</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">let</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getLine</span>();<span class="hljs-keyword">if</span>(e===<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;stream&quot;</span>);<span class="hljs-keyword">if</span>(e[<span class="hljs-number">0</span>]===<span class="hljs-title class_">Ut</span>&amp;&amp;(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>),e=e.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>)),e[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;%&quot;</span>){<span class="hljs-keyword">let</span> t=e.<span class="hljs-property">length</span>;<span class="hljs-keyword">const</span> s=e.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;#&quot;</span>);<span class="hljs-keyword">if</span>(s!==-<span class="hljs-number">1</span>){<span class="hljs-keyword">const</span> r=e[s-<span class="hljs-number">1</span>];(r===<span class="hljs-string">&quot; &quot;</span>||r===<span class="hljs-string">&quot;	&quot;</span>)&amp;&amp;(t=s-<span class="hljs-number">1</span>)}<span class="hljs-keyword">for</span>(;;){<span class="hljs-keyword">const</span> r=e[t-<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(r===<span class="hljs-string">&quot; &quot;</span>||r===<span class="hljs-string">&quot;	&quot;</span>)t-=<span class="hljs-number">1</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>}<span class="hljs-keyword">const</span> i=(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(t))+(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>));<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(e.<span class="hljs-property">length</span>-i),<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushNewline</span>(),<span class="hljs-string">&quot;stream&quot;</span>}<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">atLineEnd</span>()){<span class="hljs-keyword">const</span> t=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(e.<span class="hljs-property">length</span>-t),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushNewline</span>(),<span class="hljs-string">&quot;stream&quot;</span>}<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span> <span class="hljs-title class_">Yt</span>,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseLineStart</span>()}*<span class="hljs-title function_">parseLineStart</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>(!e&amp;&amp;!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;line-start&quot;</span>);<span class="hljs-keyword">if</span>(e===<span class="hljs-string">&quot;-&quot;</span>||e===<span class="hljs-string">&quot;.&quot;</span>){<span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>&amp;&amp;!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hasChars</span>(<span class="hljs-number">4</span>))<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;line-start&quot;</span>);<span class="hljs-keyword">const</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">peek</span>(<span class="hljs-number">3</span>);<span class="hljs-keyword">if</span>(t===<span class="hljs-string">&quot;---&quot;</span>&amp;&amp;<span class="hljs-title function_">z</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">3</span>)))<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">3</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>=<span class="hljs-number">0</span>,<span class="hljs-string">&quot;doc&quot;</span>;<span class="hljs-keyword">if</span>(t===<span class="hljs-string">&quot;...&quot;</span>&amp;&amp;<span class="hljs-title function_">z</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">3</span>)))<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">3</span>),<span class="hljs-string">&quot;stream&quot;</span>}<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">1</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>&gt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>&amp;&amp;!<span class="hljs-title function_">z</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">1</span>))&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseBlockStart</span>()}*<span class="hljs-title function_">parseBlockStart</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span>[e,t]=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">peek</span>(<span class="hljs-number">2</span>);<span class="hljs-keyword">if</span>(!t&amp;&amp;!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;block-start&quot;</span>);<span class="hljs-keyword">if</span>((e===<span class="hljs-string">&quot;-&quot;</span>||e===<span class="hljs-string">&quot;?&quot;</span>||e===<span class="hljs-string">&quot;:&quot;</span>)&amp;&amp;<span class="hljs-title function_">z</span>(t)){<span class="hljs-keyword">const</span> s=(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>))+(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>));<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>+<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>+=s,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseBlockStart</span>()}<span class="hljs-keyword">return</span><span class="hljs-string">&quot;doc&quot;</span>}*<span class="hljs-title function_">parseDocument</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>);<span class="hljs-keyword">const</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getLine</span>();<span class="hljs-keyword">if</span>(e===<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;doc&quot;</span>);<span class="hljs-keyword">let</span> t=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushIndicators</span>();<span class="hljs-keyword">switch</span>(e[t]){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;#&quot;</span>:<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(e.<span class="hljs-property">length</span>-t);<span class="hljs-keyword">case</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushNewline</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseLineStart</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;{&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;[&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>=<span class="hljs-number">1</span>,<span class="hljs-string">&quot;flow&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;}&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;]&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>),<span class="hljs-string">&quot;doc&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;*&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushUntil</span>(<span class="hljs-title class_">Ht</span>),<span class="hljs-string">&quot;doc&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&#x27;&quot;&#x27;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&#x27;&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseQuotedScalar</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;|&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&gt;&quot;</span>:<span class="hljs-keyword">return</span> t+=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseBlockScalarHeader</span>(),t+=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(e.<span class="hljs-property">length</span>-t),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushNewline</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseBlockScalar</span>();<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parsePlainScalar</span>()}}*<span class="hljs-title function_">parseFlowCollection</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">let</span> e,t,s=-<span class="hljs-number">1</span>;<span class="hljs-keyword">do</span> e=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushNewline</span>(),e&gt;<span class="hljs-number">0</span>?(t=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">1</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>=s=t):t=<span class="hljs-number">0</span>,t+=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>);<span class="hljs-keyword">while</span>(e+t&gt;<span class="hljs-number">0</span>);<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getLine</span>();<span class="hljs-keyword">if</span>(i===<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;flow&quot;</span>);<span class="hljs-keyword">if</span>((s!==-<span class="hljs-number">1</span>&amp;&amp;s&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>&amp;&amp;i[<span class="hljs-number">0</span>]!==<span class="hljs-string">&quot;#&quot;</span>||s===<span class="hljs-number">0</span>&amp;&amp;(i.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;---&quot;</span>)||i.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;...&quot;</span>))&amp;&amp;<span class="hljs-title function_">z</span>(i[<span class="hljs-number">3</span>]))&amp;&amp;!(s===<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>-<span class="hljs-number">1</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>===<span class="hljs-number">1</span>&amp;&amp;(i[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;]&quot;</span>||i[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;}&quot;</span>)))<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>=<span class="hljs-number">0</span>,<span class="hljs-keyword">yield</span> <span class="hljs-title class_">Vt</span>,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseLineStart</span>();<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(;i[r]===<span class="hljs-string">&quot;,&quot;</span>;)r+=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>),r+=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">1</span>;<span class="hljs-keyword">switch</span>(r+=<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushIndicators</span>(),i[r]){<span class="hljs-keyword">case</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">return</span><span class="hljs-string">&quot;flow&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;#&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(i.<span class="hljs-property">length</span>-r),<span class="hljs-string">&quot;flow&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;{&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;[&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>+=<span class="hljs-number">1</span>,<span class="hljs-string">&quot;flow&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;}&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;]&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>-=<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>?<span class="hljs-string">&quot;flow&quot;</span>:<span class="hljs-string">&quot;doc&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;*&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushUntil</span>(<span class="hljs-title class_">Ht</span>),<span class="hljs-string">&quot;flow&quot;</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&#x27;&quot;&#x27;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&#x27;&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">0</span>,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseQuotedScalar</span>();<span class="hljs-keyword">case</span><span class="hljs-string">&quot;:&quot;</span>:{<span class="hljs-keyword">const</span> l=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>||<span class="hljs-title function_">z</span>(l)||l===<span class="hljs-string">&quot;,&quot;</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">1</span>,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>),<span class="hljs-string">&quot;flow&quot;</span>}<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">1</span>,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parsePlainScalar</span>()}}*<span class="hljs-title function_">parseQuotedScalar</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">0</span>);<span class="hljs-keyword">let</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">indexOf</span>(e,<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>+<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(e===<span class="hljs-string">&quot;&#x27;&quot;</span>)<span class="hljs-keyword">for</span>(;t!==-<span class="hljs-number">1</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[t+<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;&#x27;&quot;</span>;)t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;&#x27;&quot;</span>,t+<span class="hljs-number">2</span>);<span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span>(;t!==-<span class="hljs-number">1</span>;){<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(;<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[t-<span class="hljs-number">1</span>-r]===<span class="hljs-string">&quot;\\&quot;</span>;)r+=<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(r%<span class="hljs-number">2</span>===<span class="hljs-number">0</span>)<span class="hljs-keyword">break</span>;t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;&quot;&#x27;</span>,t+<span class="hljs-number">1</span>)}<span class="hljs-keyword">const</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,t);<span class="hljs-keyword">let</span> i=s.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>);<span class="hljs-keyword">if</span>(i!==-<span class="hljs-number">1</span>){<span class="hljs-keyword">for</span>(;i!==-<span class="hljs-number">1</span>;){<span class="hljs-keyword">const</span> r=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">continueScalar</span>(i+<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(r===-<span class="hljs-number">1</span>)<span class="hljs-keyword">break</span>;i=s.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>,r)}i!==-<span class="hljs-number">1</span>&amp;&amp;(t=i-(s[i-<span class="hljs-number">1</span>]===<span class="hljs-string">&quot;\r&quot;</span>?<span class="hljs-number">2</span>:<span class="hljs-number">1</span>))}<span class="hljs-keyword">if</span>(t===-<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;quoted-scalar&quot;</span>);t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-property">length</span>}<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushToIndex</span>(t+<span class="hljs-number">1</span>,!<span class="hljs-number">1</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>?<span class="hljs-string">&quot;flow&quot;</span>:<span class="hljs-string">&quot;doc&quot;</span>}*<span class="hljs-title function_">parseBlockScalarHeader</span>(<span class="hljs-params"></span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarIndent</span>=-<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarKeep</span>=!<span class="hljs-number">1</span>;<span class="hljs-keyword">let</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>;<span class="hljs-keyword">for</span>(;;){<span class="hljs-keyword">const</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[++e];<span class="hljs-keyword">if</span>(t===<span class="hljs-string">&quot;+&quot;</span>)<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarKeep</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t&gt;<span class="hljs-string">&quot;0&quot;</span>&amp;&amp;t&lt;=<span class="hljs-string">&quot;9&quot;</span>)<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarIndent</span>=<span class="hljs-title class_">Number</span>(t)-<span class="hljs-number">1</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t!==<span class="hljs-string">&quot;-&quot;</span>)<span class="hljs-keyword">break</span>}<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushUntil</span>(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span><span class="hljs-title function_">z</span>(t)||t===<span class="hljs-string">&quot;#&quot;</span>)}*<span class="hljs-title function_">parseBlockScalar</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">let</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>-<span class="hljs-number">1</span>,t=<span class="hljs-number">0</span>,s;<span class="hljs-attr">e</span>:<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>;s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[i];++i)<span class="hljs-keyword">switch</span>(s){<span class="hljs-keyword">case</span><span class="hljs-string">&quot; &quot;</span>:t+=<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">`
`</span>:e=i,t=<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;\r&quot;</span>:{<span class="hljs-keyword">const</span> r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[i+<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(!r&amp;&amp;!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;block-scalar&quot;</span>);<span class="hljs-keyword">if</span>(r===<span class="hljs-string">`
`</span>)<span class="hljs-keyword">break</span>}<span class="hljs-attr">default</span>:<span class="hljs-keyword">break</span> e}<span class="hljs-keyword">if</span>(!s&amp;&amp;!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;block-scalar&quot;</span>);<span class="hljs-keyword">if</span>(t&gt;=<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarIndent</span>===-<span class="hljs-number">1</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>=<span class="hljs-attr">t</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>+=<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarIndent</span>;<span class="hljs-keyword">do</span>{<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">continueScalar</span>(e+<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(i===-<span class="hljs-number">1</span>)<span class="hljs-keyword">break</span>;e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>,i)}<span class="hljs-keyword">while</span>(e!==-<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(e===-<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>)<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;block-scalar&quot;</span>);e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-property">length</span>}}<span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">blockScalarKeep</span>)<span class="hljs-keyword">do</span>{<span class="hljs-keyword">let</span> i=e-<span class="hljs-number">1</span>,r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[i];r===<span class="hljs-string">&quot;\r&quot;</span>&amp;&amp;(r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[--i]);<span class="hljs-keyword">const</span> l=i;<span class="hljs-keyword">for</span>(;r===<span class="hljs-string">&quot; &quot;</span>||r===<span class="hljs-string">&quot;	&quot;</span>;)r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[--i];<span class="hljs-keyword">if</span>(r===<span class="hljs-string">`
`</span>&amp;&amp;i&gt;=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>&amp;&amp;i+<span class="hljs-number">1</span>+t&gt;l)e=i;<span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>}<span class="hljs-keyword">while</span>(!<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span> ht,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushToIndex</span>(e+<span class="hljs-number">1</span>,!<span class="hljs-number">0</span>),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseLineStart</span>()}*<span class="hljs-title function_">parsePlainScalar</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>&gt;<span class="hljs-number">0</span>;<span class="hljs-keyword">let</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>-<span class="hljs-number">1</span>,s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>-<span class="hljs-number">1</span>,i;<span class="hljs-keyword">for</span>(;i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[++s];)<span class="hljs-keyword">if</span>(i===<span class="hljs-string">&quot;:&quot;</span>){<span class="hljs-keyword">const</span> r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[s+<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(<span class="hljs-title function_">z</span>(r)||e&amp;&amp;r===<span class="hljs-string">&quot;,&quot;</span>)<span class="hljs-keyword">break</span>;t=s}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">z</span>(i)){<span class="hljs-keyword">let</span> r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[s+<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(i===<span class="hljs-string">&quot;\r&quot;</span>&amp;&amp;(r===<span class="hljs-string">`
`</span>?(s+=<span class="hljs-number">1</span>,i=<span class="hljs-string">`
`</span>,r=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[s+<span class="hljs-number">1</span>]):t=s),r===<span class="hljs-string">&quot;#&quot;</span>||e&amp;&amp;xt.<span class="hljs-title function_">includes</span>(r))<span class="hljs-keyword">break</span>;<span class="hljs-keyword">if</span>(i===<span class="hljs-string">`
`</span>){<span class="hljs-keyword">const</span> l=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">continueScalar</span>(s+<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(l===-<span class="hljs-number">1</span>)<span class="hljs-keyword">break</span>;s=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(s,l-<span class="hljs-number">2</span>)}}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(e&amp;&amp;xt.<span class="hljs-title function_">includes</span>(i))<span class="hljs-keyword">break</span>;t=s}<span class="hljs-keyword">return</span>!i&amp;&amp;!<span class="hljs-variable language_">this</span>.<span class="hljs-property">atEnd</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setNext</span>(<span class="hljs-string">&quot;plain-scalar&quot;</span>):(<span class="hljs-keyword">yield</span> ht,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushToIndex</span>(t+<span class="hljs-number">1</span>,!<span class="hljs-number">0</span>),e?<span class="hljs-string">&quot;flow&quot;</span>:<span class="hljs-string">&quot;doc&quot;</span>)}*<span class="hljs-title function_">pushCount</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> e&gt;<span class="hljs-number">0</span>?(<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">substr</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>,e),<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>+=e,e):<span class="hljs-number">0</span>}*<span class="hljs-title function_">pushToIndex</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">const</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>,e);<span class="hljs-keyword">return</span> s?(<span class="hljs-keyword">yield</span> s,<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>+=s.<span class="hljs-property">length</span>,s.<span class="hljs-property">length</span>):(t&amp;&amp;(<span class="hljs-keyword">yield</span><span class="hljs-string">&quot;&quot;</span>),<span class="hljs-number">0</span>)}*<span class="hljs-title function_">pushIndicators</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">0</span>)){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;!&quot;</span>:<span class="hljs-keyword">return</span>(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushTag</span>())+(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>))+(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushIndicators</span>());<span class="hljs-keyword">case</span><span class="hljs-string">&quot;&amp;&quot;</span>:<span class="hljs-keyword">return</span>(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushUntil</span>(<span class="hljs-title class_">Ht</span>))+(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>))+(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushIndicators</span>());<span class="hljs-keyword">case</span><span class="hljs-string">&quot;-&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;?&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;:&quot;</span>:{<span class="hljs-keyword">const</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowLevel</span>&gt;<span class="hljs-number">0</span>,t=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(<span class="hljs-title function_">z</span>(t)||e&amp;&amp;xt.<span class="hljs-title function_">includes</span>(t))<span class="hljs-keyword">return</span> e?<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">flowKey</span>=!<span class="hljs-number">1</span>):<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentNext</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">indentValue</span>+<span class="hljs-number">1</span>,(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>))+(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushSpaces</span>(!<span class="hljs-number">0</span>))+(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushIndicators</span>())}}<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>}*<span class="hljs-title function_">pushTag</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">1</span>)===<span class="hljs-string">&quot;&lt;&quot;</span>){<span class="hljs-keyword">let</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>+<span class="hljs-number">2</span>,t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e];<span class="hljs-keyword">for</span>(;!<span class="hljs-title function_">z</span>(t)&amp;&amp;t!==<span class="hljs-string">&quot;&gt;&quot;</span>;)t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[++e];<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushToIndex</span>(t===<span class="hljs-string">&quot;&gt;&quot;</span>?e+<span class="hljs-number">1</span>:e,!<span class="hljs-number">1</span>)}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">let</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>+<span class="hljs-number">1</span>,t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e];<span class="hljs-keyword">for</span>(;t;)<span class="hljs-keyword">if</span>(bi.<span class="hljs-title function_">includes</span>(t))t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[++e];<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t===<span class="hljs-string">&quot;%&quot;</span>&amp;&amp;xs.<span class="hljs-title function_">includes</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e+<span class="hljs-number">1</span>])&amp;&amp;xs.<span class="hljs-title function_">includes</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e+<span class="hljs-number">2</span>]))t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[e+=<span class="hljs-number">3</span>];<span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushToIndex</span>(e,!<span class="hljs-number">1</span>)}}*<span class="hljs-title function_">pushNewline</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>];<span class="hljs-keyword">return</span> e===<span class="hljs-string">`
`</span>?<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">1</span>):e===<span class="hljs-string">&quot;\r&quot;</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">1</span>)===<span class="hljs-string">`
`</span>?<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushCount</span>(<span class="hljs-number">2</span>):<span class="hljs-number">0</span>}*<span class="hljs-title function_">pushSpaces</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>-<span class="hljs-number">1</span>,s;<span class="hljs-keyword">do</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[++t];<span class="hljs-keyword">while</span>(s===<span class="hljs-string">&quot; &quot;</span>||e&amp;&amp;s===<span class="hljs-string">&quot;	&quot;</span>);<span class="hljs-keyword">const</span> i=t-<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>;<span class="hljs-keyword">return</span> i&gt;<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">substr</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>,i),<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>=t),i}*<span class="hljs-title function_">pushUntil</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">pos</span>,s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[t];<span class="hljs-keyword">for</span>(;!<span class="hljs-title function_">e</span>(s);)s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">buffer</span>[++t];<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pushToIndex</span>(t,!<span class="hljs-number">1</span>)}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ee</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> t=<span class="hljs-number">0</span>;t&lt;n.<span class="hljs-property">length</span>;++t)<span class="hljs-keyword">if</span>(n[t].<span class="hljs-property">type</span>===e)<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Hs</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> e=<span class="hljs-number">0</span>;e&lt;n.<span class="hljs-property">length</span>;++e)<span class="hljs-keyword">switch</span>(n[e].<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span> e}<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Gs</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">switch</span>(n==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:n.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;alias&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-collection&quot;</span>:<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">dt</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">switch</span>(n.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;document&quot;</span>:<span class="hljs-keyword">return</span> n.<span class="hljs-property">start</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-map&quot;</span>:{<span class="hljs-keyword">const</span> t=n.<span class="hljs-property">items</span>[n.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<span class="hljs-keyword">return</span>(e=t.<span class="hljs-property">sep</span>)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">e</span>:t.<span class="hljs-property">start</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-seq&quot;</span>:<span class="hljs-keyword">return</span> n.<span class="hljs-property">items</span>[n.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>].<span class="hljs-property">start</span>;<span class="hljs-attr">default</span>:<span class="hljs-keyword">return</span>[]}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Be</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">if</span>(n.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>[];<span class="hljs-keyword">let</span> e=n.<span class="hljs-property">length</span>;<span class="hljs-attr">e</span>:<span class="hljs-keyword">for</span>(;--e&gt;=<span class="hljs-number">0</span>;)<span class="hljs-keyword">switch</span>(n[e].<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-start&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;explicit-key-ind&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;map-value-ind&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;seq-item-ind&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-keyword">break</span> e}<span class="hljs-keyword">for</span>(;((t=n[++e])==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t.<span class="hljs-property">type</span>)===<span class="hljs-string">&quot;space&quot;</span>;);<span class="hljs-keyword">return</span> n.<span class="hljs-title function_">splice</span>(e,n.<span class="hljs-property">length</span>)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Js</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">if</span>(n.<span class="hljs-property">start</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;flow-seq-start&quot;</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> e <span class="hljs-keyword">of</span> n.<span class="hljs-property">items</span>)e.<span class="hljs-property">sep</span>&amp;&amp;!e.<span class="hljs-property">value</span>&amp;&amp;!<span class="hljs-title function_">ee</span>(e.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;explicit-key-ind&quot;</span>)&amp;&amp;!<span class="hljs-title function_">ee</span>(e.<span class="hljs-property">sep</span>,<span class="hljs-string">&quot;map-value-ind&quot;</span>)&amp;&amp;(e.<span class="hljs-property">key</span>&amp;&amp;(e.<span class="hljs-property">value</span>=e.<span class="hljs-property">key</span>),<span class="hljs-keyword">delete</span> e.<span class="hljs-property">key</span>,<span class="hljs-title class_">Gs</span>(e.<span class="hljs-property">value</span>)?e.<span class="hljs-property">value</span>.<span class="hljs-property">end</span>?<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>.<span class="hljs-title function_">apply</span>(e.<span class="hljs-property">value</span>.<span class="hljs-property">end</span>,e.<span class="hljs-property">sep</span>):e.<span class="hljs-property">value</span>.<span class="hljs-property">end</span>=e.<span class="hljs-property">sep</span>:<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>.<span class="hljs-title function_">apply</span>(e.<span class="hljs-property">start</span>,e.<span class="hljs-property">sep</span>),<span class="hljs-keyword">delete</span> e.<span class="hljs-property">sep</span>)}<span class="hljs-keyword">class</span> <span class="hljs-title class_">ki</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNewLine</span>=!<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">atScalar</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>=<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>=<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">lexer</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Si</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">onNewLine</span>=e}*<span class="hljs-title function_">parse</span>(<span class="hljs-params">e,t=!<span class="hljs-number">1</span></span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">onNewLine</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>===<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onNewLine</span>(<span class="hljs-number">0</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">lexer</span>.<span class="hljs-title function_">lex</span>(e,t))<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">next</span>(s);t||(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">end</span>())}*<span class="hljs-title function_">next</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>=e,<span class="hljs-variable language_">this</span>.<span class="hljs-property">atScalar</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">atScalar</span>=!<span class="hljs-number">1</span>,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>(),<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>+=e.<span class="hljs-property">length</span>;<span class="hljs-keyword">return</span>}<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">yi</span>(e);<span class="hljs-keyword">if</span>(t)<span class="hljs-keyword">if</span>(t===<span class="hljs-string">&quot;scalar&quot;</span>)<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNewLine</span>=!<span class="hljs-number">1</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">atScalar</span>=!<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>=<span class="hljs-string">&quot;scalar&quot;</span>;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>=t,<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>(),t){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNewLine</span>=!<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">onNewLine</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onNewLine</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>+e.<span class="hljs-property">length</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNewLine</span>&amp;&amp;e[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot; &quot;</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>+=e.<span class="hljs-property">length</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;explicit-key-ind&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;map-value-ind&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;seq-item-ind&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNewLine</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>+=e.<span class="hljs-property">length</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-mode&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-error-end&quot;</span>:<span class="hljs-keyword">return</span>;<span class="hljs-attr">default</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNewLine</span>=!<span class="hljs-number">1</span>}<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>+=e.<span class="hljs-property">length</span>}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> s=<span class="hljs-string">`Not a YAML token: <span class="hljs-subst">${e}</span>`</span>;<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;error&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">message</span>:s,<span class="hljs-attr">source</span>:e}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>+=e.<span class="hljs-property">length</span>}}*<span class="hljs-title function_">end</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">for</span>(;<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>;)<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>()}<span class="hljs-keyword">get</span> <span class="hljs-title function_">sourceToken</span>(){<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">source</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>}}*<span class="hljs-title function_">step</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">const</span> e=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">peek</span>(<span class="hljs-number">1</span>);<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;doc-end&quot;</span>&amp;&amp;(!e||e.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;doc-end&quot;</span>)){<span class="hljs-keyword">for</span>(;<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>;)<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>();<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;doc-end&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">source</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>});<span class="hljs-keyword">return</span>}<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stream</span>();<span class="hljs-keyword">switch</span>(e.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;document&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">document</span>(e);<span class="hljs-keyword">case</span><span class="hljs-string">&quot;alias&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scalar</span>(e);<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-scalar&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">blockScalar</span>(e);<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-map&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">blockMap</span>(e);<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-seq&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">blockSequence</span>(e);<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-collection&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flowCollection</span>(e);<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-end&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">documentEnd</span>(e)}<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>()}<span class="hljs-title function_">peek</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>-e]}*<span class="hljs-title function_">pop</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span> t=e!=<span class="hljs-literal">null</span>?<span class="hljs-attr">e</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pop</span>();<span class="hljs-keyword">if</span>(t)<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)<span class="hljs-keyword">yield</span> t;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">peek</span>(<span class="hljs-number">1</span>);<span class="hljs-keyword">switch</span>(t.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-scalar&quot;</span>?t.<span class="hljs-property">indent</span>=<span class="hljs-string">&quot;indent&quot;</span><span class="hljs-keyword">in</span> s?s.<span class="hljs-property">indent</span>:<span class="hljs-number">0</span>:t.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;flow-collection&quot;</span>&amp;&amp;s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;document&quot;</span>&amp;&amp;(t.<span class="hljs-property">indent</span>=<span class="hljs-number">0</span>),t.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;flow-collection&quot;</span>&amp;&amp;<span class="hljs-title class_">Js</span>(t),s.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;document&quot;</span>:s.<span class="hljs-property">value</span>=t;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-scalar&quot;</span>:s.<span class="hljs-property">props</span>.<span class="hljs-title function_">push</span>(t);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-map&quot;</span>:{<span class="hljs-keyword">const</span> i=s.<span class="hljs-property">items</span>[s.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(i.<span class="hljs-property">value</span>){s.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[],<span class="hljs-attr">key</span>:t,<span class="hljs-attr">sep</span>:[]}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i.<span class="hljs-property">sep</span>)i.<span class="hljs-property">value</span>=t;<span class="hljs-keyword">else</span>{<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(i,{<span class="hljs-attr">key</span>:t,<span class="hljs-attr">sep</span>:[]}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-title function_">ee</span>(i.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;explicit-key-ind&quot;</span>);<span class="hljs-keyword">return</span>}<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-seq&quot;</span>:{<span class="hljs-keyword">const</span> i=s.<span class="hljs-property">items</span>[s.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];i.<span class="hljs-property">value</span>?s.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[],<span class="hljs-attr">value</span>:t}):i.<span class="hljs-property">value</span>=t;<span class="hljs-keyword">break</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-collection&quot;</span>:{<span class="hljs-keyword">const</span> i=s.<span class="hljs-property">items</span>[s.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];!i||i.<span class="hljs-property">value</span>?s.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[],<span class="hljs-attr">key</span>:t,<span class="hljs-attr">sep</span>:[]}):i.<span class="hljs-property">sep</span>?i.<span class="hljs-property">value</span>=<span class="hljs-attr">t</span>:<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(i,{<span class="hljs-attr">key</span>:t,<span class="hljs-attr">sep</span>:[]});<span class="hljs-keyword">return</span>}<span class="hljs-attr">default</span>:<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(t)}<span class="hljs-keyword">if</span>((s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;document&quot;</span>||s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-map&quot;</span>||s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-seq&quot;</span>)&amp;&amp;(t.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-map&quot;</span>||t.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-seq&quot;</span>)){<span class="hljs-keyword">const</span> i=t.<span class="hljs-property">items</span>[t.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];i&amp;&amp;!i.<span class="hljs-property">sep</span>&amp;&amp;!i.<span class="hljs-property">value</span>&amp;&amp;i.<span class="hljs-property">start</span>.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-title class_">Hs</span>(i.<span class="hljs-property">start</span>)===-<span class="hljs-number">1</span>&amp;&amp;(t.<span class="hljs-property">indent</span>===<span class="hljs-number">0</span>||i.<span class="hljs-property">start</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span>r.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;comment&quot;</span>||r.<span class="hljs-property">indent</span>&lt;t.<span class="hljs-property">indent</span>))&amp;&amp;(s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;document&quot;</span>?s.<span class="hljs-property">end</span>=i.<span class="hljs-property">start</span>:s.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:i.<span class="hljs-property">start</span>}),t.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))}}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> s=<span class="hljs-string">&quot;Tried to pop an empty stack&quot;</span>;<span class="hljs-keyword">yield</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;error&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">source</span>:<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">message</span>:s}}}*<span class="hljs-title function_">stream</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;directive-line&quot;</span>:<span class="hljs-keyword">yield</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;directive&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">source</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>};<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;byte-order-mark&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>;<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-mode&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-start&quot;</span>:{<span class="hljs-keyword">const</span> e={<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;document&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">start</span>:[]};<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;doc-start&quot;</span>&amp;&amp;e.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>),<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(e);<span class="hljs-keyword">return</span>}}<span class="hljs-keyword">yield</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;error&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">message</span>:<span class="hljs-string">`Unexpected <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span> token in YAML stream`</span>,<span class="hljs-attr">source</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>}}*<span class="hljs-title function_">document</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(e.<span class="hljs-property">value</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">lineEnd</span>(e);<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-start&quot;</span>:{<span class="hljs-title class_">Hs</span>(e.<span class="hljs-property">start</span>)!==-<span class="hljs-number">1</span>?(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>()):e.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;anchor&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;tag&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:e.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>}<span class="hljs-keyword">const</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startBlockValue</span>(e);t?<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(t):<span class="hljs-keyword">yield</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;error&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">message</span>:<span class="hljs-string">`Unexpected <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span> token in YAML document`</span>,<span class="hljs-attr">source</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>}}*<span class="hljs-title function_">scalar</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;map-value-ind&quot;</span>){<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">dt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">peek</span>(<span class="hljs-number">2</span>)),s=<span class="hljs-title class_">Be</span>(t);<span class="hljs-keyword">let</span> i;e.<span class="hljs-property">end</span>?(i=e.<span class="hljs-property">end</span>,i.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>),<span class="hljs-keyword">delete</span> e.<span class="hljs-property">end</span>):i=[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>];<span class="hljs-keyword">const</span> r={<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:e.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:e.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:s,<span class="hljs-attr">key</span>:e,<span class="hljs-attr">sep</span>:i}]};<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]=r}<span class="hljs-keyword">else</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">lineEnd</span>(e)}*<span class="hljs-title function_">blockScalar</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:e.<span class="hljs-property">props</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">if</span>(e.<span class="hljs-property">source</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">atNewLine</span>=!<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>=<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">onNewLine</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>)+<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(;t!==<span class="hljs-number">0</span>;)<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onNewLine</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>+t),t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>,t)+<span class="hljs-number">1</span>}<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>();<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>()}}*<span class="hljs-title function_">blockMap</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> s;<span class="hljs-keyword">const</span> t=e.<span class="hljs-property">items</span>[e.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">1</span>,t.<span class="hljs-property">value</span>){<span class="hljs-keyword">const</span> i=<span class="hljs-string">&quot;end&quot;</span><span class="hljs-keyword">in</span> t.<span class="hljs-property">value</span>?t.<span class="hljs-property">value</span>.<span class="hljs-property">end</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,r=<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(i)?i[i.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;(r==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:r.<span class="hljs-property">type</span>)===<span class="hljs-string">&quot;comment&quot;</span>?i==<span class="hljs-literal">null</span>||i.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]})}<span class="hljs-keyword">else</span> t.<span class="hljs-property">sep</span>?t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">if</span>(t.<span class="hljs-property">value</span>)e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]});<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(t.<span class="hljs-property">sep</span>)t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">atIndentedComment</span>(t.<span class="hljs-property">start</span>,e.<span class="hljs-property">indent</span>)){<span class="hljs-keyword">const</span> i=e.<span class="hljs-property">items</span>[e.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">2</span>],r=(s=i==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.<span class="hljs-property">value</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s.<span class="hljs-property">end</span>;<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(r)){<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>.<span class="hljs-title function_">apply</span>(r,t.<span class="hljs-property">start</span>),r.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>),e.<span class="hljs-property">items</span>.<span class="hljs-title function_">pop</span>();<span class="hljs-keyword">return</span>}}t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>)}<span class="hljs-keyword">return</span>}<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>&gt;=e.<span class="hljs-property">indent</span>){<span class="hljs-keyword">const</span> i=!<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>&amp;&amp;<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>===e.<span class="hljs-property">indent</span>&amp;&amp;t.<span class="hljs-property">sep</span>;<span class="hljs-keyword">let</span> r=[];<span class="hljs-keyword">if</span>(i&amp;&amp;t.<span class="hljs-property">sep</span>&amp;&amp;!t.<span class="hljs-property">value</span>){<span class="hljs-keyword">const</span> l=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;t.<span class="hljs-property">sep</span>.<span class="hljs-property">length</span>;++a){<span class="hljs-keyword">const</span> o=t.<span class="hljs-property">sep</span>[a];<span class="hljs-keyword">switch</span>(o.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:l.<span class="hljs-title function_">push</span>(a);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:o.<span class="hljs-property">indent</span>&gt;e.<span class="hljs-property">indent</span>&amp;&amp;(l.<span class="hljs-property">length</span>=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-attr">default</span>:l.<span class="hljs-property">length</span>=<span class="hljs-number">0</span>}}l.<span class="hljs-property">length</span>&gt;=<span class="hljs-number">2</span>&amp;&amp;(r=t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">splice</span>(l[<span class="hljs-number">1</span>]))}<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;anchor&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;tag&quot;</span>:i||t.<span class="hljs-property">value</span>?(r.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>),e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:r}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>):t.<span class="hljs-property">sep</span>?t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;explicit-key-ind&quot;</span>:!t.<span class="hljs-property">sep</span>&amp;&amp;!<span class="hljs-title function_">ee</span>(t.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;explicit-key-ind&quot;</span>)?t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):i||t.<span class="hljs-property">value</span>?(r.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>),e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:r})):<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}]}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;map-value-ind&quot;</span>:<span class="hljs-keyword">if</span>(<span class="hljs-title function_">ee</span>(t.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;explicit-key-ind&quot;</span>))<span class="hljs-keyword">if</span>(t.<span class="hljs-property">sep</span>)<span class="hljs-keyword">if</span>(t.<span class="hljs-property">value</span>)e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[],<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]});<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">ee</span>(t.<span class="hljs-property">sep</span>,<span class="hljs-string">&quot;map-value-ind&quot;</span>))<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:r,<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}]});<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Gs</span>(t.<span class="hljs-property">key</span>)&amp;&amp;!<span class="hljs-title function_">ee</span>(t.<span class="hljs-property">sep</span>,<span class="hljs-string">&quot;newline&quot;</span>)){<span class="hljs-keyword">const</span> l=<span class="hljs-title class_">Be</span>(t.<span class="hljs-property">start</span>),a=t.<span class="hljs-property">key</span>,o=t.<span class="hljs-property">sep</span>;o.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>),<span class="hljs-keyword">delete</span> t.<span class="hljs-property">key</span>,<span class="hljs-keyword">delete</span> t.<span class="hljs-property">sep</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:l,<span class="hljs-attr">key</span>:a,<span class="hljs-attr">sep</span>:o}]})}<span class="hljs-keyword">else</span> r.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>?t.<span class="hljs-property">sep</span>=t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">concat</span>(r,<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title function_">ee</span>(t.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;newline&quot;</span>))<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(t,{<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]});<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> l=<span class="hljs-title class_">Be</span>(t.<span class="hljs-property">start</span>);<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:l,<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}]})}<span class="hljs-keyword">else</span> t.<span class="hljs-property">sep</span>?t.<span class="hljs-property">value</span>||i?e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:r,<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}):<span class="hljs-title function_">ee</span>(t.<span class="hljs-property">sep</span>,<span class="hljs-string">&quot;map-value-ind&quot;</span>)?<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:[],<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}]}):t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(t,{<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]});<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;alias&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:{<span class="hljs-keyword">const</span> l=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flowScalar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>);i||t.<span class="hljs-property">value</span>?(e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:r,<span class="hljs-attr">key</span>:l,<span class="hljs-attr">sep</span>:[]}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>):t.<span class="hljs-property">sep</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(l):(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(t,{<span class="hljs-attr">key</span>:l,<span class="hljs-attr">sep</span>:[]}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span>}<span class="hljs-attr">default</span>:{<span class="hljs-keyword">const</span> l=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startBlockValue</span>(e);<span class="hljs-keyword">if</span>(l){i&amp;&amp;l.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;block-seq&quot;</span>&amp;&amp;<span class="hljs-title function_">ee</span>(t.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;explicit-key-ind&quot;</span>)&amp;&amp;e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:r}),<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(l);<span class="hljs-keyword">return</span>}}}}<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>()}*<span class="hljs-title function_">blockSequence</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> s;<span class="hljs-keyword">const</span> t=e.<span class="hljs-property">items</span>[e.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-keyword">if</span>(t.<span class="hljs-property">value</span>){<span class="hljs-keyword">const</span> i=<span class="hljs-string">&quot;end&quot;</span><span class="hljs-keyword">in</span> t.<span class="hljs-property">value</span>?t.<span class="hljs-property">value</span>.<span class="hljs-property">end</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,r=<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(i)?i[i.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;(r==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:r.<span class="hljs-property">type</span>)===<span class="hljs-string">&quot;comment&quot;</span>?i==<span class="hljs-literal">null</span>||i.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]})}<span class="hljs-keyword">else</span> t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">if</span>(t.<span class="hljs-property">value</span>)e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]});<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">atIndentedComment</span>(t.<span class="hljs-property">start</span>,e.<span class="hljs-property">indent</span>)){<span class="hljs-keyword">const</span> i=e.<span class="hljs-property">items</span>[e.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">2</span>],r=(s=i==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.<span class="hljs-property">value</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s.<span class="hljs-property">end</span>;<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(r)){<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>.<span class="hljs-title function_">apply</span>(r,t.<span class="hljs-property">start</span>),r.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>),e.<span class="hljs-property">items</span>.<span class="hljs-title function_">pop</span>();<span class="hljs-keyword">return</span>}}t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>)}<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;anchor&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;tag&quot;</span>:<span class="hljs-keyword">if</span>(t.<span class="hljs-property">value</span>||<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>&lt;=e.<span class="hljs-property">indent</span>)<span class="hljs-keyword">break</span>;t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;seq-item-ind&quot;</span>:<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>!==e.<span class="hljs-property">indent</span>)<span class="hljs-keyword">break</span>;t.<span class="hljs-property">value</span>||<span class="hljs-title function_">ee</span>(t.<span class="hljs-property">start</span>,<span class="hljs-string">&quot;seq-item-ind&quot;</span>)?e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}):t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>}<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>&gt;e.<span class="hljs-property">indent</span>){<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startBlockValue</span>(e);<span class="hljs-keyword">if</span>(i){<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(i);<span class="hljs-keyword">return</span>}}<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>()}*<span class="hljs-title function_">flowCollection</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">const</span> t=e.<span class="hljs-property">items</span>[e.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;flow-error-end&quot;</span>){<span class="hljs-keyword">let</span> s;<span class="hljs-keyword">do</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),s=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">peek</span>(<span class="hljs-number">1</span>);<span class="hljs-keyword">while</span>(s&amp;&amp;s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;flow-collection&quot;</span>)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.<span class="hljs-property">end</span>.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>){<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comma&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;explicit-key-ind&quot;</span>:!t||t.<span class="hljs-property">sep</span>?e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}):t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;map-value-ind&quot;</span>:!t||t.<span class="hljs-property">value</span>?e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[],<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}):t.<span class="hljs-property">sep</span>?t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(t,{<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]});<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;anchor&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;tag&quot;</span>:!t||t.<span class="hljs-property">value</span>?e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}):t.<span class="hljs-property">sep</span>?t.<span class="hljs-property">sep</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):t.<span class="hljs-property">start</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;alias&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:{<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flowScalar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>);!t||t.<span class="hljs-property">value</span>?e.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">start</span>:[],<span class="hljs-attr">key</span>:i,<span class="hljs-attr">sep</span>:[]}):t.<span class="hljs-property">sep</span>?<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(i):<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(t,{<span class="hljs-attr">key</span>:i,<span class="hljs-attr">sep</span>:[]});<span class="hljs-keyword">return</span>}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-map-end&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-seq-end&quot;</span>:e.<span class="hljs-property">end</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">return</span>}<span class="hljs-keyword">const</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startBlockValue</span>(e);s?<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(s):(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>())}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> s=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">peek</span>(<span class="hljs-number">2</span>);<span class="hljs-keyword">if</span>(s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;block-map&quot;</span>&amp;&amp;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;map-value-ind&quot;</span>&amp;&amp;s.<span class="hljs-property">indent</span>===e.<span class="hljs-property">indent</span>||<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>&amp;&amp;!s.<span class="hljs-property">items</span>[s.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>].<span class="hljs-property">sep</span>))<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>();<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;map-value-ind&quot;</span>&amp;&amp;s.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;flow-collection&quot;</span>){<span class="hljs-keyword">const</span> i=<span class="hljs-title function_">dt</span>(s),r=<span class="hljs-title class_">Be</span>(i);<span class="hljs-title class_">Js</span>(e);<span class="hljs-keyword">const</span> l=e.<span class="hljs-property">end</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>,e.<span class="hljs-property">end</span>.<span class="hljs-property">length</span>);l.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>);<span class="hljs-keyword">const</span> a={<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:e.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:e.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:r,<span class="hljs-attr">key</span>:e,<span class="hljs-attr">sep</span>:l}]};<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]=a}<span class="hljs-keyword">else</span> <span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">lineEnd</span>(e)}}<span class="hljs-title function_">flowScalar</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">onNewLine</span>){<span class="hljs-keyword">let</span> t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>)+<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(;t!==<span class="hljs-number">0</span>;)<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onNewLine</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>+t),t=<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">`
`</span>,t)+<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:e,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">source</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span>}}<span class="hljs-title function_">startBlockValue</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;alias&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;single-quoted-scalar&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;double-quoted-scalar&quot;</span>:<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flowScalar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>);<span class="hljs-keyword">case</span><span class="hljs-string">&quot;block-scalar-header&quot;</span>:<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-scalar&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">props</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>],<span class="hljs-attr">source</span>:<span class="hljs-string">&quot;&quot;</span>};<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-map-start&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-seq-start&quot;</span>:<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;flow-collection&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">start</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>,<span class="hljs-attr">items</span>:[],<span class="hljs-attr">end</span>:[]};<span class="hljs-keyword">case</span><span class="hljs-string">&quot;seq-item-ind&quot;</span>:<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-seq&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}]};<span class="hljs-keyword">case</span><span class="hljs-string">&quot;explicit-key-ind&quot;</span>:{<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">dt</span>(e),s=<span class="hljs-title class_">Be</span>(t);<span class="hljs-keyword">return</span> s.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>),{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:s}]}}<span class="hljs-keyword">case</span><span class="hljs-string">&quot;map-value-ind&quot;</span>:{<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> t=<span class="hljs-title function_">dt</span>(e),s=<span class="hljs-title class_">Be</span>(t);<span class="hljs-keyword">return</span>{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;block-map&quot;</span>,<span class="hljs-attr">offset</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>,<span class="hljs-attr">indent</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">start</span>:s,<span class="hljs-attr">key</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">sep</span>:[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>]}]}}}<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>}<span class="hljs-title function_">atIndentedComment</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;comment&quot;</span>||<span class="hljs-variable language_">this</span>.<span class="hljs-property">indent</span>&lt;=t?!<span class="hljs-number">1</span>:e.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>||s.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;space&quot;</span>)}*<span class="hljs-title function_">documentEnd</span>(<span class="hljs-params">e</span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>!==<span class="hljs-string">&quot;doc-mode&quot;</span>&amp;&amp;(e.<span class="hljs-property">end</span>?e.<span class="hljs-property">end</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):e.<span class="hljs-property">end</span>=[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>],<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>&amp;&amp;(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>()))}*<span class="hljs-title function_">lineEnd</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">switch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comma&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-start&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;doc-end&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-seq-end&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;flow-map-end&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;map-value-ind&quot;</span>:<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>(),<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">step</span>();<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;newline&quot;</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">onKeyLine</span>=!<span class="hljs-number">1</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;space&quot;</span>:<span class="hljs-keyword">case</span><span class="hljs-string">&quot;comment&quot;</span>:<span class="hljs-attr">default</span>:e.<span class="hljs-property">end</span>?e.<span class="hljs-property">end</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>):e.<span class="hljs-property">end</span>=[<span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceToken</span>],<span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>===<span class="hljs-string">&quot;newline&quot;</span>&amp;&amp;(<span class="hljs-keyword">yield</span>*<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pop</span>())}}}<span class="hljs-keyword">class</span> <span class="hljs-title class_">Ei</span>{<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>){<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineStarts</span>=[],<span class="hljs-variable language_">this</span>.<span class="hljs-property">addNewLine</span>=<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span><span class="hljs-variable language_">this</span>.<span class="hljs-property">lineStarts</span>.<span class="hljs-title function_">push</span>(e),<span class="hljs-variable language_">this</span>.<span class="hljs-property">linePos</span>=<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>{<span class="hljs-keyword">let</span> t=<span class="hljs-number">0</span>,s=<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineStarts</span>.<span class="hljs-property">length</span>;<span class="hljs-keyword">for</span>(;t&lt;s;){<span class="hljs-keyword">const</span> r=t+s&gt;&gt;<span class="hljs-number">1</span>;<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineStarts</span>[r]&lt;e?t=r+<span class="hljs-number">1</span>:s=r}<span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineStarts</span>[t]===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">line</span>:t+<span class="hljs-number">1</span>,<span class="hljs-attr">col</span>:<span class="hljs-number">1</span>};<span class="hljs-keyword">if</span>(t===<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>{<span class="hljs-attr">line</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">col</span>:e};<span class="hljs-keyword">const</span> i=<span class="hljs-variable language_">this</span>.<span class="hljs-property">lineStarts</span>[t-<span class="hljs-number">1</span>];<span class="hljs-keyword">return</span>{<span class="hljs-attr">line</span>:t,<span class="hljs-attr">col</span>:e-i+<span class="hljs-number">1</span>}}}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Qs</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span> e=n.<span class="hljs-property">prettyErrors</span>!==!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>{<span class="hljs-attr">lineCounter</span>:n.<span class="hljs-property">lineCounter</span>||e&amp;&amp;<span class="hljs-keyword">new</span> <span class="hljs-title class_">Ei</span>||<span class="hljs-literal">null</span>,<span class="hljs-attr">prettyErrors</span>:e}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Wi</span>(<span class="hljs-params">n,e={}</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">lineCounter</span>:t,<span class="hljs-attr">prettyErrors</span>:s}=<span class="hljs-title class_">Qs</span>(e),i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(t==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t.<span class="hljs-property">addNewLine</span>),r=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Composer</span>(e),l=<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(r.<span class="hljs-title function_">compose</span>(i.<span class="hljs-title function_">parse</span>(n)));<span class="hljs-keyword">if</span>(s&amp;&amp;t)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> l)a.<span class="hljs-property">errors</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-title function_">prettifyError</span>(n,t)),a.<span class="hljs-property">warnings</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-title function_">prettifyError</span>(n,t));<span class="hljs-keyword">return</span> l.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>?<span class="hljs-attr">l</span>:<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>([],{<span class="hljs-attr">empty</span>:!<span class="hljs-number">0</span>},r.<span class="hljs-title function_">streamInfo</span>())}<span class="hljs-keyword">function</span> <span class="hljs-title function_">_i</span>(<span class="hljs-params">n,e={}</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">lineCounter</span>:t,<span class="hljs-attr">prettyErrors</span>:s}=<span class="hljs-title class_">Qs</span>(e),i=<span class="hljs-keyword">new</span> <span class="hljs-title function_">ki</span>(t==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t.<span class="hljs-property">addNewLine</span>),r=<span class="hljs-keyword">new</span> <span class="hljs-title function_">pi</span>(e);<span class="hljs-keyword">let</span> l=<span class="hljs-literal">null</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> r.<span class="hljs-title function_">compose</span>(i.<span class="hljs-title function_">parse</span>(n),!<span class="hljs-number">0</span>,n.<span class="hljs-property">length</span>))<span class="hljs-keyword">if</span>(!l)l=a;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(l.<span class="hljs-property">options</span>.<span class="hljs-property">logLevel</span>!==<span class="hljs-string">&quot;silent&quot;</span>){l.<span class="hljs-property">errors</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Ve</span>(a.<span class="hljs-property">range</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>),<span class="hljs-string">&quot;MULTIPLE_DOCS&quot;</span>,<span class="hljs-string">&quot;Source contains multiple documents; please use YAML.parseAllDocuments()&quot;</span>));<span class="hljs-keyword">break</span>}<span class="hljs-keyword">return</span> s&amp;&amp;t&amp;&amp;(l.<span class="hljs-property">errors</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-title class_">Bs</span>(n,t)),l.<span class="hljs-property">warnings</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-title class_">Bs</span>(n,t))),l}<span class="hljs-keyword">function</span> <span class="hljs-title function_">pt</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">let</span> s;<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;function&quot;</span>?s=<span class="hljs-attr">e</span>:t===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>&amp;&amp;e&amp;&amp;<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;object&quot;</span>&amp;&amp;(t=e);<span class="hljs-keyword">const</span> i=<span class="hljs-title function_">_i</span>(n,t);<span class="hljs-keyword">if</span>(!i)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(i.<span class="hljs-property">warnings</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">r</span>=&gt;</span><span class="hljs-title function_">fs</span>(i.<span class="hljs-property">options</span>.<span class="hljs-property">logLevel</span>,r)),i.<span class="hljs-property">errors</span>.<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">if</span>(i.<span class="hljs-property">options</span>.<span class="hljs-property">logLevel</span>!==<span class="hljs-string">&quot;silent&quot;</span>)<span class="hljs-keyword">throw</span> i.<span class="hljs-property">errors</span>[<span class="hljs-number">0</span>];i.<span class="hljs-property">errors</span>=[]}<span class="hljs-keyword">return</span> i.<span class="hljs-title function_">toJS</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({<span class="hljs-attr">reviver</span>:s},t))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">zi</span>(<span class="hljs-params">n,e,t</span>){<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">let</span> s=<span class="hljs-literal">null</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> e==<span class="hljs-string">&quot;function&quot;</span>||<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(e)?s=<span class="hljs-attr">e</span>:t===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>&amp;&amp;e&amp;&amp;(t=e),<span class="hljs-keyword">typeof</span> t==<span class="hljs-string">&quot;string&quot;</span>&amp;&amp;(t=t.<span class="hljs-property">length</span>),<span class="hljs-keyword">typeof</span> t==<span class="hljs-string">&quot;number&quot;</span>){<span class="hljs-keyword">const</span> r=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(t);t=r&lt;<span class="hljs-number">1</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:r&gt;<span class="hljs-number">8</span>?{<span class="hljs-attr">indent</span>:<span class="hljs-number">8</span>}:{<span class="hljs-attr">indent</span>:r}}<span class="hljs-keyword">if</span>(n===<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">keepUndefined</span>:r}=(i=t!=<span class="hljs-literal">null</span>?<span class="hljs-attr">t</span>:e)!=<span class="hljs-literal">null</span>?<span class="hljs-attr">i</span>:{};<span class="hljs-keyword">if</span>(!r)<span class="hljs-keyword">return</span>}<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>(n,s,t).<span class="hljs-title function_">toString</span>(t)}<span class="hljs-keyword">const</span> <span class="hljs-title class_">Xi</span>=<span class="hljs-literal">null</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">Oi</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">var</span> e,t;<span class="hljs-keyword">let</span> n=(e=<span class="hljs-title function_">GM_getValue</span>(<span class="hljs-string">&quot;script.version&quot;</span>))!=<span class="hljs-literal">null</span>?<span class="hljs-attr">e</span>:<span class="hljs-string">&quot;1.0&quot;</span>;<span class="hljs-keyword">if</span>(GM_info.<span class="hljs-property">script</span>.<span class="hljs-property">version</span>&gt;n){<span class="hljs-keyword">let</span> i=(<span class="hljs-title function_">yield</span>(<span class="hljs-keyword">yield</span> <span class="hljs-title function_">fetch</span>(((t=GM_info.<span class="hljs-property">script</span>.<span class="hljs-property">icon64</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,<span class="hljs-number">37</span>))+<span class="hljs-string">&quot;/data.json&quot;</span>)).<span class="hljs-title function_">json</span>()).<span class="hljs-property">yaml</span>,r=[],l=[];<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(i).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[c,u]</span>)=&gt;</span>{<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(u).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">f</span>=&gt;</span>{<span class="hljs-keyword">var</span> h;l.<span class="hljs-title function_">push</span>({<span class="hljs-attr">key</span>:c,<span class="hljs-attr">fileName</span>:f}),r.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">fetch</span>(((h=GM_info.<span class="hljs-property">script</span>.<span class="hljs-property">icon64</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:h.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,<span class="hljs-number">37</span>))+<span class="hljs-string">&quot;/yaml/&quot;</span>+c+<span class="hljs-string">&quot;/&quot;</span>+f))})});<span class="hljs-keyword">let</span> a={},o=<span class="hljs-keyword">yield</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(r);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> c=<span class="hljs-number">0</span>;c&lt;o.<span class="hljs-property">length</span>;c++){<span class="hljs-keyword">let</span> f=<span class="hljs-keyword">yield</span> o[c].<span class="hljs-title function_">text</span>(),h=l[c];h.<span class="hljs-property">key</span>===<span class="hljs-string">&quot;rule&quot;</span>?a[h.<span class="hljs-property">key</span>]=<span class="hljs-title function_">ae</span>(<span class="hljs-title function_">ae</span>({},a[h.<span class="hljs-property">key</span>]),<span class="hljs-title class_">Ws</span>(<span class="hljs-title function_">pt</span>(f),h.<span class="hljs-property">fileName</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,h.<span class="hljs-property">fileName</span>.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">&quot;.&quot;</span>)))):a[h.<span class="hljs-property">key</span>]=<span class="hljs-title function_">ae</span>(<span class="hljs-title function_">ae</span>({},a[h.<span class="hljs-property">key</span>]),<span class="hljs-title function_">pt</span>(f))}<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(a).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[c,u]</span>)=&gt;</span>{<span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;script.&quot;</span>+c,u)}),<span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;script.version&quot;</span>,GM_info.<span class="hljs-property">script</span>.<span class="hljs-property">version</span>)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(GM_info.<span class="hljs-property">script</span>.<span class="hljs-property">version</span>&lt;n){<span class="hljs-keyword">let</span> s=<span class="hljs-title function_">GM_getResourceText</span>(<span class="hljs-string">&quot;data.json&quot;</span>),i=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(s).<span class="hljs-property">yaml</span>,r={<span class="hljs-attr">page</span>:{},<span class="hljs-attr">rule</span>:{},<span class="hljs-attr">setting</span>:{}};<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(i).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[l,a]</span>)=&gt;</span>{<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(a).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>{l===<span class="hljs-string">&quot;rule&quot;</span>?r[l]=<span class="hljs-title function_">ae</span>(<span class="hljs-title function_">ae</span>({},r[l]),<span class="hljs-title class_">Ws</span>(<span class="hljs-title function_">pt</span>(<span class="hljs-title function_">GM_getResourceText</span>(l+<span class="hljs-string">&quot;-&quot;</span>+o)),o.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>,o.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">&quot;.&quot;</span>)))):r[l]=<span class="hljs-title function_">ae</span>(<span class="hljs-title function_">ae</span>({},r[l]),<span class="hljs-title function_">pt</span>(<span class="hljs-title function_">GM_getResourceText</span>(l+<span class="hljs-string">&quot;-&quot;</span>+o)))})}),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(r).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[l,a]</span>)=&gt;</span>{<span class="hljs-title function_">GM_setValue</span>(<span class="hljs-string">&quot;script.&quot;</span>+l,a)})}})}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ws</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">let</span> t={};<span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(n).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[s,i]</span>)=&gt;</span>{t[e+<span class="hljs-string">&quot;-&quot;</span>+s]=i}),t}<span class="hljs-keyword">var</span> <span class="hljs-title class_">Ai</span>=<span class="hljs-title function_">T</span>(<span class="hljs-number">745</span>);<span class="hljs-keyword">const</span> E=antd,<span class="hljs-title class_">Ni</span>=<span class="hljs-title class_">React</span>;<span class="hljs-keyword">var</span> m=T.<span class="hljs-title function_">n</span>(<span class="hljs-title class_">Ni</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ti</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">page</span>:e}=n,[t,s]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(e.<span class="hljs-property">working</span>),i=<span class="hljs-function">()=&gt;</span>{e.<span class="hljs-property">working</span>?e.<span class="hljs-title function_">stop</span>():e.<span class="hljs-title function_">start</span>(),<span class="hljs-title function_">s</span>(e.<span class="hljs-property">working</span>)};<span class="hljs-keyword">return</span> <span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Card</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">14</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Typography</span>.<span class="hljs-property">Text</span>,{<span class="hljs-attr">type</span>:t?<span class="hljs-string">&quot;success&quot;</span>:<span class="hljs-string">&quot;danger&quot;</span>},e.<span class="hljs-property">name</span>)),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">4</span>}),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">6</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Button</span>,{<span class="hljs-attr">size</span>:<span class="hljs-string">&quot;small&quot;</span>,<span class="hljs-attr">onClick</span>:i},t?<span class="hljs-string">&quot;\u505C\u6B62&quot;</span>:<span class="hljs-string">&quot;\u542F\u52A8&quot;</span>)))))}<span class="hljs-keyword">const</span> ie=icons;<span class="hljs-keyword">var</span> <span class="hljs-title class_">Zi</span>=<span class="hljs-title function_">T</span>(<span class="hljs-number">852</span>),<span class="hljs-title class_">Li</span>=<span class="hljs-title function_">T</span>(<span class="hljs-number">212</span>),<span class="hljs-title class_">Ii</span>=T.<span class="hljs-title function_">n</span>(<span class="hljs-title class_">Li</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">zs</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">return</span>{<span class="hljs-attr">year</span>:<span class="hljs-title class_">String</span>(n.<span class="hljs-title function_">getFullYear</span>()),<span class="hljs-attr">month</span>:(n.<span class="hljs-title function_">getMonth</span>()&lt;<span class="hljs-number">9</span>?<span class="hljs-string">&quot;0&quot;</span>:<span class="hljs-string">&quot;&quot;</span>)+(n.<span class="hljs-title function_">getMonth</span>()+<span class="hljs-number">1</span>),<span class="hljs-attr">day</span>:(n.<span class="hljs-title function_">getDate</span>()&lt;<span class="hljs-number">10</span>?<span class="hljs-string">&quot;0&quot;</span>:<span class="hljs-string">&quot;&quot;</span>)+n.<span class="hljs-title function_">getDate</span>(),<span class="hljs-attr">hour</span>:(n.<span class="hljs-title function_">getHours</span>()&lt;<span class="hljs-number">10</span>?<span class="hljs-string">&quot;0&quot;</span>:<span class="hljs-string">&quot;&quot;</span>)+n.<span class="hljs-title function_">getHours</span>(),<span class="hljs-attr">minute</span>:(n.<span class="hljs-title function_">getMinutes</span>()&lt;<span class="hljs-number">10</span>?<span class="hljs-string">&quot;0&quot;</span>:<span class="hljs-string">&quot;&quot;</span>)+n.<span class="hljs-title function_">getMinutes</span>(),<span class="hljs-attr">second</span>:(n.<span class="hljs-title function_">getSeconds</span>()&lt;<span class="hljs-number">10</span>?<span class="hljs-string">&quot;0&quot;</span>:<span class="hljs-string">&quot;&quot;</span>)+n.<span class="hljs-title function_">getSeconds</span>(),<span class="hljs-attr">millisecond</span>:(n.<span class="hljs-title function_">getMilliseconds</span>()&lt;<span class="hljs-number">100</span>?<span class="hljs-string">&quot;0&quot;</span>:<span class="hljs-string">&quot;&quot;</span>)+(n.<span class="hljs-title function_">getMilliseconds</span>()&lt;<span class="hljs-number">10</span>?<span class="hljs-string">&quot;0&quot;</span>:<span class="hljs-string">&quot;&quot;</span>)+n.<span class="hljs-title function_">getMilliseconds</span>()}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">er</span>(<span class="hljs-params">n,e=<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span></span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">year</span>:t,<span class="hljs-attr">month</span>:s,<span class="hljs-attr">day</span>:i,<span class="hljs-attr">hour</span>:r,<span class="hljs-attr">minute</span>:l,<span class="hljs-attr">second</span>:a,<span class="hljs-attr">millisecond</span>:o}=<span class="hljs-title function_">zs</span>(n);<span class="hljs-keyword">return</span> e.<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;yyyy&quot;</span>,t).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;MM&quot;</span>,s).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;dd&quot;</span>,i).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;HH&quot;</span>,r).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;mm&quot;</span>,l).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;ss&quot;</span>,a).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;SSS&quot;</span>,o)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Xs</span>(<span class="hljs-params">n,e=<span class="hljs-string">&quot;YYYY-MM-DD HH:mm:ss.SSS&quot;</span></span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">year</span>:t,<span class="hljs-attr">month</span>:s,<span class="hljs-attr">day</span>:i,<span class="hljs-attr">hour</span>:r,<span class="hljs-attr">minute</span>:l,<span class="hljs-attr">second</span>:a,<span class="hljs-attr">millisecond</span>:o}=<span class="hljs-title function_">zs</span>(n);<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ii</span>()(e.<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;YYYY&quot;</span>,t).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;MM&quot;</span>,s).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;DD&quot;</span>,i).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;HH&quot;</span>,r).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;mm&quot;</span>,l).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;ss&quot;</span>,a).<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">&quot;SSS&quot;</span>,o),e)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Zs</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">expireTime</span>:e}=n,[t,s]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>({<span class="hljs-attr">date</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()+<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>),<span class="hljs-attr">millisecond</span>:<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>}),[i,r]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;time2date&quot;</span>),[l,a]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(!<span class="hljs-number">1</span>),o=<span class="hljs-function">(<span class="hljs-params">c,u</span>)=&gt;</span>{<span class="hljs-keyword">let</span> f=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> h=c;h&lt;=u;h++)f.<span class="hljs-title function_">push</span>(h);<span class="hljs-keyword">return</span> f};<span class="hljs-keyword">return</span> <span class="hljs-title function_">m</span>().<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">const</span> c=<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">()=&gt;</span>{i===<span class="hljs-string">&quot;date2time&quot;</span>&amp;&amp;(t.<span class="hljs-property">date</span>.<span class="hljs-title function_">getTime</span>()&lt;<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()?(<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;time2date&quot;</span>),<span class="hljs-title function_">s</span>(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>(u.<span class="hljs-property">date</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>,u.<span class="hljs-property">millisecond</span>=<span class="hljs-number">0</span>,u))):<span class="hljs-title function_">s</span>(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>(u.<span class="hljs-property">millisecond</span>=u.<span class="hljs-property">date</span>.<span class="hljs-title function_">getTime</span>()-<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),u)),<span class="hljs-title function_">a</span>(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>!u)),i===<span class="hljs-string">&quot;time2date&quot;</span>&amp;&amp;(<span class="hljs-title function_">s</span>(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>(u.<span class="hljs-property">date</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()+u.<span class="hljs-property">millisecond</span>),u)),<span class="hljs-title function_">a</span>(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>!u))},<span class="hljs-number">1e3</span>);<span class="hljs-keyword">return</span><span class="hljs-function">()=&gt;</span>{<span class="hljs-built_in">clearInterval</span>(c)}},[i]),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span>(<span class="hljs-title function_">e</span>(t.<span class="hljs-property">date</span>.<span class="hljs-title function_">getTime</span>()),<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">e</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)),[t,l]),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">12</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">DatePicker</span>,{<span class="hljs-attr">value</span>:<span class="hljs-title class_">Xs</span>(t.<span class="hljs-property">date</span>,<span class="hljs-string">&quot;YYYY-MM-DD&quot;</span>),<span class="hljs-attr">style</span>:{<span class="hljs-attr">width</span>:<span class="hljs-string">&quot;100%&quot;</span>},<span class="hljs-attr">getPopupContainer</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>c,<span class="hljs-attr">disabledDate</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-keyword">const</span> u=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>;<span class="hljs-keyword">return</span> u.<span class="hljs-title function_">getTime</span>()%(<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>)&lt;t.<span class="hljs-property">date</span>.<span class="hljs-title function_">getTime</span>()%(<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>)?c.<span class="hljs-title function_">year</span>()&lt;u.<span class="hljs-title function_">getFullYear</span>()||c.<span class="hljs-title function_">year</span>()===u.<span class="hljs-title function_">getFullYear</span>()&amp;&amp;c.<span class="hljs-title function_">month</span>()&lt;u.<span class="hljs-title function_">getMonth</span>()||c.<span class="hljs-title function_">year</span>()===u.<span class="hljs-title function_">getFullYear</span>()&amp;&amp;c.<span class="hljs-title function_">month</span>()===u.<span class="hljs-title function_">getMonth</span>()&amp;&amp;c.<span class="hljs-title function_">date</span>()&lt;u.<span class="hljs-title function_">getDate</span>():c.<span class="hljs-title function_">year</span>()&lt;u.<span class="hljs-title function_">getFullYear</span>()||c.<span class="hljs-title function_">year</span>()===u.<span class="hljs-title function_">getFullYear</span>()&amp;&amp;c.<span class="hljs-title function_">month</span>()&lt;u.<span class="hljs-title function_">getMonth</span>()||c.<span class="hljs-title function_">year</span>()===u.<span class="hljs-title function_">getFullYear</span>()&amp;&amp;c.<span class="hljs-title function_">month</span>()===u.<span class="hljs-title function_">getMonth</span>()&amp;&amp;c.<span class="hljs-title function_">date</span>()&lt;=u.<span class="hljs-title function_">getDate</span>()},<span class="hljs-attr">onFocus</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;date2time&quot;</span>)},<span class="hljs-attr">onChange</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;date2time&quot;</span>),c&amp;&amp;<span class="hljs-title function_">s</span>(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>(u.<span class="hljs-property">date</span>.<span class="hljs-title function_">setFullYear</span>(c.<span class="hljs-title function_">year</span>()),u.<span class="hljs-property">date</span>.<span class="hljs-title function_">setDate</span>(c.<span class="hljs-title function_">date</span>()),u.<span class="hljs-property">date</span>.<span class="hljs-title function_">setMonth</span>(c.<span class="hljs-title function_">month</span>()),u.<span class="hljs-property">millisecond</span>=u.<span class="hljs-property">date</span>.<span class="hljs-title function_">getTime</span>()-<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),u))}})),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">12</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">TimePicker</span>,{<span class="hljs-attr">value</span>:<span class="hljs-title class_">Xs</span>(t.<span class="hljs-property">date</span>,<span class="hljs-string">&quot;HH:mm:ss&quot;</span>),<span class="hljs-attr">style</span>:{<span class="hljs-attr">width</span>:<span class="hljs-string">&quot;100%&quot;</span>},<span class="hljs-attr">getPopupContainer</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>c,<span class="hljs-attr">disabledTime</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">const</span> c=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>;<span class="hljs-keyword">return</span> t.<span class="hljs-property">date</span>.<span class="hljs-title function_">getFullYear</span>()===c.<span class="hljs-title function_">getFullYear</span>()&amp;&amp;t.<span class="hljs-property">date</span>.<span class="hljs-title function_">getMonth</span>()==c.<span class="hljs-title function_">getMonth</span>()&amp;&amp;t.<span class="hljs-property">date</span>.<span class="hljs-title function_">getDate</span>()===c.<span class="hljs-title function_">getDate</span>()?{<span class="hljs-attr">disabledHours</span>:<span class="hljs-function">()=&gt;</span>c.<span class="hljs-title function_">getHours</span>()?<span class="hljs-title function_">o</span>(<span class="hljs-number">0</span>,c.<span class="hljs-title function_">getHours</span>()-<span class="hljs-number">1</span>):[],<span class="hljs-attr">disabledMinutes</span>:<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>u===c.<span class="hljs-title function_">getHours</span>()&amp;&amp;c.<span class="hljs-title function_">getMinutes</span>()?<span class="hljs-title function_">o</span>(<span class="hljs-number">0</span>,c.<span class="hljs-title function_">getMinutes</span>()-<span class="hljs-number">1</span>):[],<span class="hljs-attr">disabledSeconds</span>:<span class="hljs-function">(<span class="hljs-params">u,f</span>)=&gt;</span>u===c.<span class="hljs-title function_">getHours</span>()&amp;&amp;f===c.<span class="hljs-title function_">getMinutes</span>()&amp;&amp;c.<span class="hljs-title function_">getSeconds</span>()?<span class="hljs-title function_">o</span>(<span class="hljs-number">0</span>,c.<span class="hljs-title function_">getSeconds</span>()):[]}:{<span class="hljs-attr">disabledHours</span>:<span class="hljs-function">()=&gt;</span>[],<span class="hljs-attr">disabledMinutes</span>:<span class="hljs-function">()=&gt;</span>[],<span class="hljs-attr">disabledSeconds</span>:<span class="hljs-function">()=&gt;</span>[]}},<span class="hljs-attr">onFocus</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;date2time&quot;</span>)},<span class="hljs-attr">onChange</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;date2time&quot;</span>),c&amp;&amp;<span class="hljs-title function_">s</span>(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>(u.<span class="hljs-property">date</span>.<span class="hljs-title function_">setHours</span>(c.<span class="hljs-title function_">hour</span>()),u.<span class="hljs-property">date</span>.<span class="hljs-title function_">setMinutes</span>(c.<span class="hljs-title function_">minute</span>()),u.<span class="hljs-property">date</span>.<span class="hljs-title function_">setSeconds</span>(c.<span class="hljs-title function_">second</span>()),u.<span class="hljs-property">millisecond</span>=u.<span class="hljs-property">date</span>.<span class="hljs-title function_">getTime</span>()-<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),u))}}))),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,[{<span class="hljs-attr">addonAfter</span>:<span class="hljs-string">&quot;\u65E5&quot;</span>,<span class="hljs-attr">rate</span>:<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>,<span class="hljs-attr">max</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-attr">fun</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span><span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(c/(<span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>))},{<span class="hljs-attr">addonAfter</span>:<span class="hljs-string">&quot;\u65F6&quot;</span>,<span class="hljs-attr">rate</span>:<span class="hljs-number">60</span>*<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>,<span class="hljs-attr">max</span>:<span class="hljs-number">24</span>,<span class="hljs-attr">fun</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(c).<span class="hljs-title function_">getUTCHours</span>()},{<span class="hljs-attr">addonAfter</span>:<span class="hljs-string">&quot;\u5206&quot;</span>,<span class="hljs-attr">rate</span>:<span class="hljs-number">60</span>*<span class="hljs-number">1e3</span>,<span class="hljs-attr">max</span>:<span class="hljs-number">60</span>,<span class="hljs-attr">fun</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(c).<span class="hljs-title function_">getUTCMinutes</span>()},{<span class="hljs-attr">addonAfter</span>:<span class="hljs-string">&quot;\u79D2&quot;</span>,<span class="hljs-attr">rate</span>:<span class="hljs-number">1e3</span>,<span class="hljs-attr">max</span>:<span class="hljs-number">60</span>,<span class="hljs-attr">fun</span>:<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(c).<span class="hljs-title function_">getUTCSeconds</span>()}].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span><span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">6</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Input</span>,{<span class="hljs-attr">addonAfter</span>:c.<span class="hljs-property">addonAfter</span>,<span class="hljs-attr">value</span>:c.<span class="hljs-title function_">fun</span>(t.<span class="hljs-property">millisecond</span>),<span class="hljs-attr">onFocus</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;time2date&quot;</span>)},<span class="hljs-attr">onChange</span>:<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{<span class="hljs-keyword">let</span> f=u.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>;<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;time2date&quot;</span>);<span class="hljs-keyword">let</span> h=<span class="hljs-number">0</span>;f===<span class="hljs-string">&quot;&quot;</span>?h=-c.<span class="hljs-title function_">fun</span>(t.<span class="hljs-property">millisecond</span>)*c.<span class="hljs-property">rate</span>:<span class="hljs-regexp">/^[0-9]*$/</span>.<span class="hljs-title function_">test</span>(f)?h=((c.<span class="hljs-property">max</span>?<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-title class_">Number</span>(f),c.<span class="hljs-property">max</span>):<span class="hljs-title class_">Number</span>(f))-c.<span class="hljs-title function_">fun</span>(t.<span class="hljs-property">millisecond</span>))*c.<span class="hljs-property">rate</span>:f===<span class="hljs-string">&quot;0&quot;</span>&amp;&amp;(h=-c.<span class="hljs-title function_">fun</span>(t.<span class="hljs-property">millisecond</span>)*c.<span class="hljs-property">rate</span>),<span class="hljs-title function_">s</span>(<span class="hljs-function"><span class="hljs-params">p</span>=&gt;</span>(p.<span class="hljs-property">millisecond</span>+=h,p.<span class="hljs-property">date</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()+p.<span class="hljs-property">millisecond</span>),p))}})))))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Mi</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">setting</span>:e,<span class="hljs-attr">updateBox</span>:t}=n,[s,i]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>([]),[r,l]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>),[a,o]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(!<span class="hljs-number">0</span>),[c,u]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(!<span class="hljs-number">0</span>),[f,h]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(),p=<span class="hljs-function">()=&gt;</span>{j.<span class="hljs-title function_">selectSettingData</span>(e.<span class="hljs-property">key</span>).<span class="hljs-title function_">then</span>(i)};<span class="hljs-keyword">return</span> <span class="hljs-title function_">m</span>().<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span>{<span class="hljs-title function_">p</span>()},[]),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Card</span>,<span class="hljs-literal">null</span>,s.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span>!a||!y.<span class="hljs-property">hide</span>).<span class="hljs-title function_">sort</span>(<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span>y.<span class="hljs-property">hide</span>?<span class="hljs-number">1</span>:-<span class="hljs-number">1</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span><span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Tag</span>,{<span class="hljs-attr">closable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">key</span>:y.<span class="hljs-property">key</span>,<span class="hljs-attr">style</span>:{<span class="hljs-attr">userSelect</span>:<span class="hljs-string">&quot;none&quot;</span>,<span class="hljs-attr">maxWidth</span>:<span class="hljs-string">&quot;300px&quot;</span>,<span class="hljs-attr">whiteSpace</span>:<span class="hljs-string">&quot;normal&quot;</span>},<span class="hljs-attr">color</span>:y.<span class="hljs-property">hide</span>?<span class="hljs-string">&quot;#00000080&quot;</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-attr">onDoubleClick</span>:<span class="hljs-function">()=&gt;</span>{j.<span class="hljs-title function_">updateSettingData</span>(n.<span class="hljs-property">setting</span>.<span class="hljs-property">key</span>,{<span class="hljs-attr">key</span>:y.<span class="hljs-property">key</span>,<span class="hljs-attr">hide</span>:!y.<span class="hljs-property">hide</span>}),<span class="hljs-title function_">p</span>()},<span class="hljs-attr">onAuxClick</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">l</span>(y.<span class="hljs-property">key</span>),<span class="hljs-attr">onClose</span>:<span class="hljs-function">()=&gt;</span>{j.<span class="hljs-title function_">deleteSettingData</span>(n.<span class="hljs-property">setting</span>.<span class="hljs-property">key</span>,y.<span class="hljs-property">key</span>),<span class="hljs-title function_">p</span>(),<span class="hljs-title function_">t</span>()}},y.<span class="hljs-property">key</span>))),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">18</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Input</span>,{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;text&quot;</span>,<span class="hljs-attr">value</span>:r,<span class="hljs-attr">placeholder</span>:e.<span class="hljs-property">name</span>,<span class="hljs-attr">allowClear</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">onChange</span>:<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span><span class="hljs-title function_">l</span>(y.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)})),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">3</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Button</span>,{<span class="hljs-attr">block</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">icon</span>:<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">PlusOutlined</span>,<span class="hljs-literal">null</span>),<span class="hljs-attr">disabled</span>:!r||s.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span>y.<span class="hljs-property">key</span>===r).<span class="hljs-property">length</span>&gt;<span class="hljs-number">0</span>,<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span>{r&amp;&amp;j.<span class="hljs-title function_">insertSettingData</span>(e.<span class="hljs-property">key</span>,{<span class="hljs-attr">key</span>:r,<span class="hljs-attr">expireTime</span>:f}),<span class="hljs-title function_">l</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">p</span>(),<span class="hljs-title function_">t</span>()}})),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">3</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Button</span>,{<span class="hljs-attr">block</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">icon</span>:a?<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">EyeOutlined</span>,<span class="hljs-literal">null</span>):<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">EyeInvisibleOutlined</span>,<span class="hljs-literal">null</span>),<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">o</span>(!a)}))),!c&amp;&amp;<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Zs</span>,{<span class="hljs-attr">expireTime</span>:<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span><span class="hljs-title function_">h</span>(y)}),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Divider</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">CaretDownOutlined</span>,{<span class="hljs-attr">rotate</span>:c?<span class="hljs-number">0</span>:<span class="hljs-number">180</span>,<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">u</span>(<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span>!y)})))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">vi</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">let</span> e;<span class="hljs-keyword">const</span> t=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">i,r</span>)=&gt;</span>e=r);<span class="hljs-keyword">return</span>[<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([n,t]),e]}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Gt</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">var</span> s,i;mt.<span class="hljs-title function_">has</span>(e)||mt.<span class="hljs-title function_">set</span>(e,[]);<span class="hljs-keyword">let</span> t;<span class="hljs-keyword">for</span>(;t=(s=mt.<span class="hljs-title function_">get</span>(e))==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s.<span class="hljs-title function_">pop</span>();)t[<span class="hljs-number">1</span>](<span class="hljs-string">&quot;too late&quot;</span>);<span class="hljs-keyword">return</span> t=<span class="hljs-title function_">vi</span>(n),(i=mt.<span class="hljs-title function_">get</span>(e))==<span class="hljs-literal">null</span>||i.<span class="hljs-title function_">push</span>(t),t[<span class="hljs-number">0</span>]}<span class="hljs-keyword">const</span> mt=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ci</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">commit</span>:e,<span class="hljs-attr">functions</span>:t}=n,s=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(<span class="hljs-keyword">new</span> de)[<span class="hljs-number">0</span>],[i,r]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>),[l,a]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),[o,c]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>([]),[u,f]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;uid2username&quot;</span>),[h,p]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(!<span class="hljs-number">1</span>),y=<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span><span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">let</span> g=<span class="hljs-keyword">yield</span> s.<span class="hljs-title function_">uid2username</span>(d);<span class="hljs-keyword">return</span> g=g===<span class="hljs-string">&quot;&quot;</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:g,g});<span class="hljs-keyword">return</span> t.<span class="hljs-property">setUid</span>=<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span>{<span class="hljs-title function_">r</span>(d),<span class="hljs-title function_">y</span>(<span class="hljs-title class_">String</span>(d)).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">g</span>=&gt;</span>{<span class="hljs-title function_">a</span>(g),<span class="hljs-title function_">f</span>(<span class="hljs-string">&quot;username2uid&quot;</span>),g&amp;&amp;s.<span class="hljs-title function_">username2infos</span>(g).<span class="hljs-title function_">then</span>(c)})},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">18</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Input</span>,{<span class="hljs-attr">size</span>:<span class="hljs-string">&quot;small&quot;</span>,<span class="hljs-attr">allowClear</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">value</span>:i,<span class="hljs-attr">placeholder</span>:<span class="hljs-string">&quot;uid&quot;</span>,<span class="hljs-attr">onChange</span>:<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span>{<span class="hljs-keyword">let</span> g=d.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>;<span class="hljs-title function_">f</span>(<span class="hljs-string">&quot;uid2username&quot;</span>),g===<span class="hljs-string">&quot;&quot;</span>?(<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">a</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),<span class="hljs-title function_">c</span>([]),<span class="hljs-title function_">p</span>(!<span class="hljs-number">1</span>)):<span class="hljs-regexp">/^[1-9](\d+)?$/</span>.<span class="hljs-title function_">test</span>(g)?(<span class="hljs-title function_">r</span>(<span class="hljs-title class_">String</span>(g)),<span class="hljs-title function_">c</span>([]),<span class="hljs-title function_">p</span>(!<span class="hljs-number">1</span>),<span class="hljs-title class_">Gt</span>(<span class="hljs-title function_">y</span>(<span class="hljs-title class_">String</span>(g))).<span class="hljs-title function_">then</span>(a)):(<span class="hljs-title function_">r</span>(i),u===<span class="hljs-string">&quot;username2uid&quot;</span>&amp;&amp;(<span class="hljs-title function_">c</span>([]),<span class="hljs-title function_">p</span>(!<span class="hljs-number">1</span>),<span class="hljs-title class_">Gt</span>(<span class="hljs-title function_">y</span>(<span class="hljs-title class_">String</span>(g))).<span class="hljs-title function_">then</span>(a)))}})),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">AutoComplete</span>,{<span class="hljs-attr">size</span>:<span class="hljs-string">&quot;small&quot;</span>,<span class="hljs-attr">style</span>:{<span class="hljs-attr">width</span>:<span class="hljs-string">&quot;100%&quot;</span>},<span class="hljs-attr">showSearch</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">placeholder</span>:u===<span class="hljs-string">&quot;uid2username&quot;</span>&amp;&amp;i!==<span class="hljs-string">&quot;&quot;</span>?<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">UserDeleteOutlined</span>,<span class="hljs-literal">null</span>),<span class="hljs-string">&quot; \u7528\u6237\u4E0D\u5B58\u5728 ( \u15DC \u2038 \u15DC )&quot;</span>):<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-attr">allowClear</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">getPopupContainer</span>:<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span>d,<span class="hljs-attr">value</span>:l,<span class="hljs-attr">disabled</span>:u===<span class="hljs-string">&quot;uid2username&quot;</span>&amp;&amp;i!==<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-attr">onSearch</span>:<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span>{<span class="hljs-title function_">f</span>(<span class="hljs-string">&quot;username2uid&quot;</span>),<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">a</span>(d),<span class="hljs-title class_">Gt</span>(s.<span class="hljs-title function_">username2infos</span>(d)).<span class="hljs-title function_">then</span>(c),<span class="hljs-title function_">p</span>(!<span class="hljs-number">1</span>)},<span class="hljs-attr">onSelect</span>:<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span>{<span class="hljs-title function_">f</span>(<span class="hljs-string">&quot;username2uid&quot;</span>),<span class="hljs-title function_">r</span>(d),<span class="hljs-title function_">y</span>(d).<span class="hljs-title function_">then</span>(a)},<span class="hljs-attr">onPopupScroll</span>:<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span>{<span class="hljs-keyword">let</span> g=d.<span class="hljs-property">target</span>;g.<span class="hljs-property">scrollTop</span>+g.<span class="hljs-property">offsetHeight</span>===g.<span class="hljs-property">scrollHeight</span>&amp;&amp;(h||(l?s.<span class="hljs-title function_">username2infos</span>(l,o.<span class="hljs-property">length</span>/<span class="hljs-number">20</span>+<span class="hljs-number">1</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">w</span>=&gt;</span>{(w.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>||w.<span class="hljs-property">length</span>%<span class="hljs-number">20</span>!==<span class="hljs-number">0</span>)&amp;&amp;<span class="hljs-title function_">p</span>(!<span class="hljs-number">0</span>),<span class="hljs-title function_">c</span>([...o,...w])}):<span class="hljs-title function_">p</span>(!<span class="hljs-number">0</span>)))}},o.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span><span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">AutoComplete</span>.<span class="hljs-property">Option</span>,{<span class="hljs-attr">key</span>:d.<span class="hljs-property">uid</span>},d.<span class="hljs-property">username</span>))))),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">2</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Button</span>,{<span class="hljs-attr">size</span>:<span class="hljs-string">&quot;small&quot;</span>,<span class="hljs-attr">style</span>:{<span class="hljs-attr">width</span>:<span class="hljs-string">&quot;100%&quot;</span>,<span class="hljs-attr">height</span>:<span class="hljs-string">&quot;100%&quot;</span>},<span class="hljs-attr">block</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">disabled</span>:!i||!l,<span class="hljs-attr">icon</span>:<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">PlusOutlined</span>,<span class="hljs-literal">null</span>),<span class="hljs-attr">onAuxClick</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">switch</span>(u){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;username2uid&quot;</span>:<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">a</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),<span class="hljs-title function_">c</span>([]),<span class="hljs-title function_">p</span>(!<span class="hljs-number">1</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;uid2username&quot;</span>:<span class="hljs-title function_">f</span>(<span class="hljs-string">&quot;username2uid&quot;</span>),s.<span class="hljs-title function_">username2infos</span>(l!=<span class="hljs-literal">null</span>?<span class="hljs-attr">l</span>:<span class="hljs-string">&quot;&quot;</span>).<span class="hljs-title function_">then</span>(c),<span class="hljs-title function_">p</span>(!<span class="hljs-number">1</span>);<span class="hljs-keyword">break</span>}},<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">if</span>(i)<span class="hljs-keyword">switch</span>(u){<span class="hljs-keyword">case</span><span class="hljs-string">&quot;username2uid&quot;</span>:<span class="hljs-title function_">f</span>(<span class="hljs-string">&quot;uid2username&quot;</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">&quot;uid2username&quot;</span>:<span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-title function_">a</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),<span class="hljs-title function_">c</span>([]),<span class="hljs-title function_">p</span>(!<span class="hljs-number">1</span>),<span class="hljs-title function_">e</span>(i);<span class="hljs-keyword">break</span>}}})))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Di</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">updateBox</span>:e}=n,[t,s]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>([]),[i,r]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(!<span class="hljs-number">0</span>),[l,a]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(!<span class="hljs-number">0</span>),[o,c]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>(),u={},f=<span class="hljs-function">()=&gt;</span>j.<span class="hljs-title function_">selectSettingData</span>(<span class="hljs-string">&quot;username&quot;</span>).<span class="hljs-title function_">then</span>(s);<span class="hljs-keyword">return</span> <span class="hljs-title function_">m</span>().<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span>{<span class="hljs-title function_">f</span>()},[]),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Card</span>,<span class="hljs-literal">null</span>,t.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>!i||!h.<span class="hljs-property">hide</span>).<span class="hljs-title function_">sort</span>(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>h.<span class="hljs-property">hide</span>?<span class="hljs-number">1</span>:-<span class="hljs-number">1</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span><span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Tooltip</span>,{<span class="hljs-attr">title</span>:h.<span class="hljs-property">key</span>,<span class="hljs-attr">key</span>:h.<span class="hljs-property">key</span>,<span class="hljs-attr">getPopupContainer</span>:<span class="hljs-function"><span class="hljs-params">p</span>=&gt;</span>p,<span class="hljs-attr">mouseEnterDelay</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">trigger</span>:<span class="hljs-string">&quot;click&quot;</span>,<span class="hljs-attr">showArrow</span>:!<span class="hljs-number">1</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Tag</span>,{<span class="hljs-attr">closable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">style</span>:{<span class="hljs-attr">userSelect</span>:<span class="hljs-string">&quot;none&quot;</span>},<span class="hljs-attr">color</span>:h.<span class="hljs-property">hide</span>?<span class="hljs-string">&quot;#00000080&quot;</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-attr">onDoubleClick</span>:<span class="hljs-function">()=&gt;</span>{j.<span class="hljs-title function_">updateSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>,{<span class="hljs-attr">key</span>:h.<span class="hljs-property">key</span>,<span class="hljs-attr">hide</span>:!h.<span class="hljs-property">hide</span>}),<span class="hljs-title function_">f</span>()},<span class="hljs-attr">onAuxClick</span>:<span class="hljs-function">()=&gt;</span>{u.<span class="hljs-property">setUid</span>&amp;&amp;u.<span class="hljs-title function_">setUid</span>(h.<span class="hljs-property">key</span>)},<span class="hljs-attr">onClose</span>:<span class="hljs-function">()=&gt;</span>{j.<span class="hljs-title function_">deleteSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>,h.<span class="hljs-property">key</span>),<span class="hljs-title function_">f</span>(),<span class="hljs-title function_">e</span>()},<span class="hljs-attr">key</span>:h.<span class="hljs-property">username</span>},h.<span class="hljs-property">username</span>)))),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Ci</span>,{<span class="hljs-attr">functions</span>:u,<span class="hljs-attr">commit</span>:<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>{j.<span class="hljs-title function_">insertSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>,{<span class="hljs-attr">key</span>:h,<span class="hljs-attr">expireTime</span>:o}),<span class="hljs-title function_">f</span>(),<span class="hljs-title function_">e</span>()}}),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">2</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Button</span>,{<span class="hljs-attr">size</span>:<span class="hljs-string">&quot;small&quot;</span>,<span class="hljs-attr">style</span>:{<span class="hljs-attr">width</span>:<span class="hljs-string">&quot;100%&quot;</span>,<span class="hljs-attr">height</span>:<span class="hljs-string">&quot;100%&quot;</span>},<span class="hljs-attr">block</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">icon</span>:<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">SyncOutlined</span>,<span class="hljs-literal">null</span>),<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-keyword">yield</span> j.<span class="hljs-title function_">selectSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>j.<span class="hljs-title function_">resetSettingData</span>(<span class="hljs-string">&quot;uid&quot;</span>,h.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">p,y</span>)=&gt;</span><span class="hljs-title class_">Number</span>(p.<span class="hljs-property">key</span>)-<span class="hljs-title class_">Number</span>(y.<span class="hljs-property">key</span>)))),<span class="hljs-title function_">GM_listValues</span>().<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>h.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;uid_&quot;</span>)).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span><span class="hljs-title function_">GM_deleteValue</span>(h)),<span class="hljs-title function_">f</span>()})})),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">2</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Button</span>,{<span class="hljs-attr">size</span>:<span class="hljs-string">&quot;small&quot;</span>,<span class="hljs-attr">style</span>:{<span class="hljs-attr">width</span>:<span class="hljs-string">&quot;100%&quot;</span>,<span class="hljs-attr">height</span>:<span class="hljs-string">&quot;100%&quot;</span>},<span class="hljs-attr">block</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">icon</span>:i?<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">EyeOutlined</span>,<span class="hljs-literal">null</span>):<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">EyeInvisibleOutlined</span>,<span class="hljs-literal">null</span>),<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">r</span>(!i)}))),!l&amp;&amp;<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Zs</span>,{<span class="hljs-attr">expireTime</span>:<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span><span class="hljs-title function_">c</span>(h)}),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Divider</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(ie.<span class="hljs-property">CaretDownOutlined</span>,{<span class="hljs-attr">rotate</span>:l?<span class="hljs-number">0</span>:<span class="hljs-number">180</span>,<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span><span class="hljs-title function_">a</span>(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>!h)})))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">$i</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">const</span>[n,e]=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useState</span>((t=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(U))==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t.<span class="hljs-title function_">getAttribute</span>(P));<span class="hljs-keyword">return</span> <span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Card</span>,{<span class="hljs-attr">style</span>:{<span class="hljs-attr">height</span>:<span class="hljs-string">&quot;100%&quot;</span>},<span class="hljs-attr">bodyStyle</span>:{<span class="hljs-attr">display</span>:<span class="hljs-string">&quot;flex&quot;</span>,<span class="hljs-attr">alignItems</span>:<span class="hljs-string">&quot;center&quot;</span>,<span class="hljs-attr">height</span>:<span class="hljs-string">&quot;100%&quot;</span>}},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Tooltip</span>,{<span class="hljs-attr">title</span>:<span class="hljs-string">&quot;\u5207\u6362\u81F3&quot;</span>+(n===<span class="hljs-string">&quot;hide&quot;</span>?<span class="hljs-string">&quot;debug&quot;</span>:<span class="hljs-string">&quot;hide&quot;</span>),<span class="hljs-attr">getPopupContainer</span>:<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>s},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Button</span>,{<span class="hljs-attr">style</span>:{<span class="hljs-attr">width</span>:<span class="hljs-string">&quot;100px&quot;</span>},<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">let</span> s=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(U);<span class="hljs-keyword">const</span> i=s.<span class="hljs-title function_">getAttribute</span>(P)===<span class="hljs-string">&quot;hide&quot;</span>?<span class="hljs-string">&quot;debug&quot;</span>:<span class="hljs-string">&quot;hide&quot;</span>;s.<span class="hljs-title function_">setAttribute</span>(P,i),s.<span class="hljs-property">innerHTML</span>=te[i];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> r=<span class="hljs-number">0</span>;r&lt;<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>.<span class="hljs-property">length</span>;r++)<span class="hljs-keyword">try</span>{<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>[r].<span class="hljs-property">document</span>.<span class="hljs-title function_">getElementById</span>(U).<span class="hljs-property">innerHTML</span>=te[i]}<span class="hljs-keyword">catch</span>(l){}<span class="hljs-title function_">e</span>(i)}},n))))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Bi</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">const</span>{<span class="hljs-attr">pageMap</span>:e}=n,t=<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);<span class="hljs-title function_">m</span>().<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> n.<span class="hljs-property">pageMap</span>.<span class="hljs-title function_">values</span>())i.<span class="hljs-property">working</span>&amp;&amp;i.<span class="hljs-title function_">stop</span>()});<span class="hljs-keyword">function</span> <span class="hljs-title function_">s</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> e.<span class="hljs-title function_">values</span>())i.<span class="hljs-property">working</span>&amp;&amp;(i.<span class="hljs-title function_">stop</span>(),i.<span class="hljs-title function_">start</span>())}<span class="hljs-keyword">return</span> <span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">ConfigProvider</span>,{<span class="hljs-attr">theme</span>:{<span class="hljs-attr">token</span>:{<span class="hljs-attr">colorPrimary</span>:<span class="hljs-string">&quot;pink&quot;</span>}}},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>,{<span class="hljs-attr">ref</span>:t,<span class="hljs-attr">style</span>:{<span class="hljs-attr">display</span>:<span class="hljs-string">&quot;none&quot;</span>,<span class="hljs-attr">position</span>:<span class="hljs-string">&quot;absolute&quot;</span>,<span class="hljs-attr">top</span>:<span class="hljs-string">&quot;10px&quot;</span>,<span class="hljs-attr">right</span>:<span class="hljs-string">&quot;400px&quot;</span>,<span class="hljs-attr">zIndex</span>:<span class="hljs-number">99999</span>}},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>,{<span class="hljs-attr">style</span>:{<span class="hljs-attr">position</span>:<span class="hljs-string">&quot;fixed&quot;</span>,<span class="hljs-attr">backgroundColor</span>:<span class="hljs-string">&quot;white&quot;</span>,<span class="hljs-attr">border</span>:<span class="hljs-string">&quot;5px groove pink&quot;</span>,<span class="hljs-attr">width</span>:<span class="hljs-string">&quot;350px&quot;</span>}},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title function_">m</span>().<span class="hljs-property">Fragment</span>,<span class="hljs-literal">null</span>,[...e.<span class="hljs-title function_">values</span>()].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>i.<span class="hljs-title function_">isCurrent</span>()).<span class="hljs-property">length</span>!==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">14</span>},[...e.<span class="hljs-title function_">values</span>()].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>i.<span class="hljs-title function_">isCurrent</span>()).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span><span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Ti</span>,{<span class="hljs-attr">key</span>:i.<span class="hljs-property">key</span>,<span class="hljs-attr">page</span>:i}))),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">10</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>($i,<span class="hljs-literal">null</span>))),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Tabs</span>,{<span class="hljs-attr">defaultActiveKey</span>:<span class="hljs-string">&quot;uid&quot;</span>,<span class="hljs-attr">items</span>:[{<span class="hljs-attr">key</span>:<span class="hljs-string">&quot;uid&quot;</span>,<span class="hljs-attr">label</span>:<span class="hljs-string">&quot;uid&quot;</span>,<span class="hljs-attr">children</span>:<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Di</span>,{<span class="hljs-attr">updateBox</span>:s})},...[...j.<span class="hljs-title function_">getSystemSettings</span>().<span class="hljs-title function_">values</span>()].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">i</span>=&gt;</span>({<span class="hljs-attr">key</span>:i.<span class="hljs-property">key</span>,<span class="hljs-attr">label</span>:i.<span class="hljs-property">name</span>,<span class="hljs-attr">children</span>:<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Mi</span>,{<span class="hljs-attr">key</span>:i.<span class="hljs-property">key</span>,<span class="hljs-attr">setting</span>:i,<span class="hljs-attr">updateBox</span>:s})}))]}),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Row</span>,<span class="hljs-literal">null</span>,<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">8</span>}),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">8</span>}),<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Col</span>,{<span class="hljs-attr">span</span>:<span class="hljs-number">8</span>},<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(E.<span class="hljs-property">Button</span>,{<span class="hljs-attr">block</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">onClick</span>:<span class="hljs-function">()=&gt;</span>{t.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">&quot;display&quot;</span>,<span class="hljs-string">&quot;none&quot;</span>)}},<span class="hljs-string">&quot;\u9690\u85CF\u83DC\u5355&quot;</span>))))))))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">en</span>(<span class="hljs-params">n,e={root:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}</span>){e.<span class="hljs-property">root</span>&amp;&amp;e.<span class="hljs-property">root</span>.<span class="hljs-title function_">unmount</span>();<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> n.<span class="hljs-title function_">values</span>())s.<span class="hljs-title function_">arrive</span>(<span class="hljs-variable language_">window</span>);<span class="hljs-keyword">let</span> t;<span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(M)||(t=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>),t.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;id&quot;</span>,M),<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(t)),e.<span class="hljs-property">root</span>=(<span class="hljs-number">0</span>,<span class="hljs-title class_">Ai</span>.<span class="hljs-property">s</span>)(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(M)),e.<span class="hljs-property">root</span>.<span class="hljs-title function_">render</span>(<span class="hljs-title function_">m</span>().<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Bi</span>,{<span class="hljs-attr">pageMap</span>:n})),<span class="hljs-function">()=&gt;</span>{<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">leave</span>(<span class="hljs-string">`#<span class="hljs-subst">${M}</span>`</span>,{<span class="hljs-attr">fireOnAttributesModification</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">onceOnly</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">existing</span>:!<span class="hljs-number">1</span>},<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-title function_">en</span>(n,e)})}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Jt</span>(<span class="hljs-params">n,e</span>){<span class="hljs-keyword">if</span>(!e.<span class="hljs-title function_">getElementById</span>(U)){<span class="hljs-keyword">let</span> t=e.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;style&quot;</span>);t.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;id&quot;</span>,U),t.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;type&quot;</span>,<span class="hljs-string">&quot;text/css&quot;</span>),t.<span class="hljs-title function_">setAttribute</span>(P,n),t.<span class="hljs-property">innerHTML</span>=te[n],e.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(t)}<span class="hljs-keyword">return</span><span class="hljs-function">()=&gt;</span>{e.<span class="hljs-title function_">leave</span>(<span class="hljs-string">`#<span class="hljs-subst">${U}</span>`</span>,{<span class="hljs-attr">fireOnAttributesModification</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">onceOnly</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">existing</span>:!<span class="hljs-number">1</span>},<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">var</span> t;<span class="hljs-title class_">Jt</span>((t=<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(P))!=<span class="hljs-literal">null</span>?<span class="hljs-attr">t</span>:<span class="hljs-string">&quot;hide&quot;</span>,e)})}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Pi</span>(<span class="hljs-params">n</span>){<span class="hljs-keyword">let</span> e=[];<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>.<span class="hljs-property">length</span>;t++){<span class="hljs-keyword">let</span> s=<span class="hljs-variable language_">window</span>.<span class="hljs-property">frames</span>[t];<span class="hljs-keyword">if</span>(!e[t]||e[t].<span class="hljs-property">frame</span>!==s){<span class="hljs-keyword">let</span> i={};e[t]=i,i.<span class="hljs-property">frame</span>=s}<span class="hljs-keyword">try</span>{<span class="hljs-keyword">if</span>(s.<span class="hljs-property">document</span>&amp;&amp;e[t].<span class="hljs-property">document</span>!==s.<span class="hljs-property">document</span>){e[t].<span class="hljs-property">document</span>=s.<span class="hljs-property">document</span>,<span class="hljs-title class_">Jt</span>(<span class="hljs-string">&quot;hide&quot;</span>,s.<span class="hljs-property">document</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> n.<span class="hljs-title function_">values</span>())i.<span class="hljs-title function_">stop</span>(),i.<span class="hljs-title function_">start</span>()}}<span class="hljs-keyword">catch</span>(i){}}},<span class="hljs-number">500</span>)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ji</span>(<span class="hljs-params"></span>){<span class="hljs-variable language_">document</span>.<span class="hljs-property">oncontextmenu</span>=<span class="hljs-function"><span class="hljs-params">n</span>=&gt;</span>{<span class="hljs-keyword">var</span> e;<span class="hljs-keyword">return</span> n.<span class="hljs-property">srcElement</span>&amp;&amp;n.<span class="hljs-property">srcElement</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Node</span>?!((e=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(M))!=<span class="hljs-literal">null</span>&amp;&amp;e.<span class="hljs-title function_">contains</span>(n.<span class="hljs-property">srcElement</span>)):!<span class="hljs-number">1</span>}}<span class="hljs-title function_">q</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">function</span>*(){<span class="hljs-title function_">ji</span>(),<span class="hljs-keyword">yield</span> <span class="hljs-title class_">Oi</span>();<span class="hljs-keyword">let</span> n=<span class="hljs-title function_">pn</span>();<span class="hljs-title function_">en</span>(n)(),<span class="hljs-title class_">Jt</span>(<span class="hljs-string">&quot;hide&quot;</span>,<span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>)(),<span class="hljs-title class_">Pi</span>(n),<span class="hljs-title function_">GM_registerMenuCommand</span>(<span class="hljs-string">&quot;\u811A\u672C\u914D\u7F6E&quot;</span>,<span class="hljs-function">()=&gt;</span>{<span class="hljs-keyword">var</span> t;<span class="hljs-keyword">let</span> e=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">`#<span class="hljs-subst">${M}</span>&gt;div`</span>);e.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">&quot;display&quot;</span>,((t=e.<span class="hljs-property">style</span>)==<span class="hljs-literal">null</span>?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:t.<span class="hljs-title function_">getPropertyValue</span>(<span class="hljs-string">&quot;display&quot;</span>))===<span class="hljs-string">&quot;none&quot;</span>?<span class="hljs-string">&quot;&quot;</span>:<span class="hljs-string">&quot;none&quot;</span>)})})})()})();
</code></pre>

</body>
</html>